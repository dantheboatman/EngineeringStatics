{"version":3,"file":"759.bf719c8b83fe3c66.js","mappings":"4FAAAA,EAAEC,OAAOC,KAAK,CACVC,GAAI,CACAC,6BAA8B,mBAC9BC,+BACI,iHACJC,uBAAwB,WACxBC,oBAAqB,U,8FC+Bd,MAAMC,UAAkB,IACnC,WAAAC,CAAYC,GACRC,MAAMD,GACN,IAAIE,EAAOF,EAAKE,KAChBC,KAAKC,SAAWF,EAChBC,KAAKE,MAAQH,EAAKI,GAClBH,KAAKI,qBAAuBP,EAAKO,qBACjCJ,KAAKK,QAAS,EAEuB,OAAjCL,KAAKC,SAASK,QAAQD,SACtBL,KAAKK,QAAS,GAElBL,KAAKO,SAAW,GAChBP,KAAKQ,SAAW,GAChBR,KAAKS,WACLT,KAAKU,oBACLV,KAAKW,QAAU,cACfX,KAAKY,WAAW,aACK,oBAAVC,OACPA,MAAMC,kBAAkBd,KAAKe,aAErC,CAKA,QAAAN,GACIT,KAAKgB,cAAgB,GACrBhB,KAAKiB,aAAe,GACpB,IAAIC,EAAoBC,SAASC,cAAc,OAC/CF,EAAkBG,UAAUC,IAAI,2BAChCH,SAASI,KAAKC,YAAYN,GAE1B,IAAK,IAAIO,KAAWzB,KAAKC,SAASyB,iBAC9B,mCACD,CACC,IAAIC,EAAcR,SAASC,cAAc,QACzCO,EAAYC,UAAYH,EAAQG,UAChCD,EAAYxB,GAAKsB,EAAQtB,GACzBwB,EAAYE,aAAa,YAAa,QACtCF,EAAYN,UAAUC,IAAI,kBAC1BK,EAAYN,UAAUC,IAAI,WAC1BK,EAAYG,SAAW,EACvBH,EAAYE,aAAa,OAAQ,UACjCF,EAAYrB,QAAQyB,SAAW/B,KAAKgC,YAAYP,GAChDE,EAAYrB,QAAQ2B,UAAYjC,KAAKE,MACrCF,KAAKiB,aAAaiB,KAAKP,GACvB3B,KAAKmC,iBAAiBR,GAEtB,IAAIS,EAAejB,SAASC,cAAc,OAC1CgB,EAAaf,UAAUC,IAAI,gBAC3Bc,EAAaR,UAAY,2BAA6BD,EAAYC,UAClEQ,EAAaP,aAAa,OAAQ,SAClCO,EAAajC,GAAKwB,EAAYxB,GAAK,SACnCe,EAAkBM,YAAYY,EAClC,CACIpC,KAAKK,SAELL,KAAKiB,aAAeoB,EAAarC,KAAKiB,eAE1C,IAAK,IAAIQ,KAAWzB,KAAKC,SAASyB,iBAC9B,kCACD,CACC,IAAIC,EAAcR,SAASC,cAAc,QACzCO,EAAYC,UAAYH,EAAQG,UAChCD,EAAYxB,GAAKsB,EACZa,aAAa,OACbC,QAAQ,OAAQ,QACrBZ,EAAYN,UAAUC,IAClB,iBACA,aACA,YAEJK,EAAYG,SAAW,EACvBH,EAAYE,aAAa,OAAQ,UACjCF,EAAYrB,QAAQyB,SAAW/B,KAAKgC,YAAYP,GAChDE,EAAYrB,QAAQ2B,UAAYjC,KAAKE,MACrCF,KAAKgB,cAAckB,KAAKP,GACxB3B,KAAKwC,iBAAiBb,EAC1B,CAEA3B,KAAKQ,SAAWR,KAAKC,SAASwC,cAC1B,kCACFb,UACF,IAAIrB,EAAWP,KAAKC,SAASwC,cACzB,kCAEAlC,IACAP,KAAKO,SAAWA,EAASqB,UAEjC,CAEA,WAAAI,CAAYU,GACR,OAAIA,EAAKpC,QAAQyB,SACNW,EAAKpC,QAAQyB,SAIhBW,EAAKC,aAAa,OACXD,EAAKJ,aAAa,OAElBI,EAAKvC,EAGxB,CAKA,iBAAAO,GACIV,KAAKe,aAAeI,SAASC,cAAc,OAC3CpB,KAAKe,aAAaZ,GAAKH,KAAKE,MAC5BF,KAAKe,aAAaM,UAAUC,IAAI,uBAChCtB,KAAK4C,aAAezB,SAASC,cAAc,OAC3CpB,KAAK4C,aAAavB,UAAUC,IAAI,sBAChCtB,KAAK4C,aAAahB,UAAY5B,KAAKQ,SACnCR,KAAKe,aAAaS,YAAYxB,KAAK4C,cACnC5C,KAAKe,aAAaS,YAAYL,SAASC,cAAc,OACrDpB,KAAK6C,gBAAkB1B,SAASC,cAAc,OAC9CpB,KAAK6C,gBAAgBC,MAAMC,QAAU,QACrC/C,KAAKe,aAAaS,YAAYxB,KAAK6C,iBACnC7C,KAAKgD,aAAe7B,SAASC,cAAc,OAC3CpB,KAAKgD,aAAa3B,UAAUC,IAAI,cAAe,YAC/CtB,KAAKiD,sBACLjD,KAAKkD,YAAc/B,SAASC,cAAc,OAC1CpB,KAAKkD,YAAY7B,UAAUC,IAAI,eAC/BtB,KAAK6C,gBAAgBrB,YAAYxB,KAAKgD,cACtChD,KAAK6C,gBAAgBrB,YAAYxB,KAAKkD,aACtClD,KAAKmD,gBACLnD,KAAKoD,YAAY,aAAa,GAC1BC,YAAYC,eACZtD,KAAKuD,kBAETC,KAAOxD,KACPA,KAAKyD,IAAMzD,KAAK0D,eAAeC,KAAK3D,MACpCwD,KAAKI,aAAaJ,KAAKzC,aAC3B,CAEA,eAAAwC,GACIvD,KAAK6D,yBACL7D,KAAK8D,oBACL9D,KAAKC,SAAS8D,WAAWC,aAAahE,KAAKe,aAAcf,KAAKC,UACzDD,KAAKiE,qBACNjE,KAAKkE,UAAYlE,KAAKgD,aAAamB,aAEnCnE,KAAK4D,aAAa5D,KAAKe,cAAcqD,MAAK,KACtCpE,KAAKqE,sBAAsB,KAGnCrE,KAAKgD,aAAaF,MAAMwB,UAAYtE,KAAKkE,UAAUK,WAAa,KAC5DvE,KAAKkD,YAAYiB,aAAenE,KAAKkE,UACrClE,KAAK6C,gBAAgBC,MAAMwB,UACvBtE,KAAKkD,YAAYiB,aAAaI,WAAa,KAE/CvE,KAAK6C,gBAAgBC,MAAMwB,UACvBtE,KAAKkE,UAAUK,WAAa,KAEpCvE,KAAKgD,aAAaF,MAAM0B,MAAQ,GAAGxE,KAAKyE,aACxCzE,KAAKkD,YAAYJ,MAAM0B,MAAQ,GAAGxE,KAAK0E,YAC3C,CACA,mBAAAzB,GACI,IAAIO,EAAOxD,KACXA,KAAKgD,aAAa2B,iBACd,WACA,SAAUC,GACNA,EAAGC,iBACC7E,KAAKgD,aAAa3B,UAAUyD,SAAS,iBAGzC9E,KAAKgD,aAAa3B,UAAUC,IAAI,eACpC,EAAEqC,KAAK3D,OAEXA,KAAKgD,aAAa2B,iBACd,OACA,SAAUC,GACNpB,EAAKuB,YAAa,EAClBH,EAAGC,iBACC7E,KAAKgD,aAAa3B,UAAUyD,SAAS,iBACrC9E,KAAKgD,aAAa3B,UAAU2D,OAAO,gBAEvC,IAAIC,EAAOL,EAAGM,aAAaC,QAAQ,eAC/BC,EAAcjE,SAASkE,eAAeJ,GAErCjF,KAAKgD,aAAa8B,SAASM,IAC3BpF,KAAKsF,eAAeF,KAGrBpF,KAAKgD,aAAaxB,YAAY4D,GAC9BpF,KAAKqE,uBACLrE,KAAKkE,UAAYlE,KAAKgD,aAAamB,aACnCnE,KAAK6C,gBAAgBC,MAAMwB,UACvBtE,KAAKkE,UAAUK,WAAa,KAExC,EAAEZ,KAAK3D,OAEXA,KAAKgD,aAAa2B,iBACd,YACA,SAAUY,GACDvF,KAAKgD,aAAa3B,UAAUyD,SAAS,iBAG1C9E,KAAKgD,aAAa3B,UAAU2D,OAAO,eACvC,EAAErB,KAAK3D,MAEf,CACA,aAAAmD,GACInD,KAAKwF,UAAYrE,SAASC,cAAc,OACxCpB,KAAKwF,UAAUnE,UAAUC,IAAI,wBAC7BtB,KAAKyF,aAAetE,SAASC,cAAc,UAC3CpB,KAAKyF,aAAaC,YAAcvG,EAAEC,KAAK,0BACvCY,KAAKyF,aAAa5D,aAAa,QAAS,+BACxC7B,KAAKyF,aAAa5D,aAAa,OAAQ,aACvC7B,KAAKyF,aAAa5D,aAAa,OAAQ,UACvC7B,KAAKyF,aAAaE,QAAU,WACxB3F,KAAK4F,qBACL5F,KAAK6F,iBACL7F,KAAK8F,kBACT,EAAEnC,KAAK3D,MACPA,KAAK+F,YAAc5E,SAASC,cAAc,UAC1CpB,KAAK+F,YAAYL,YAAcvG,EAAEC,KAAK,uBACtCY,KAAK+F,YAAYlE,aACb,QACA,0CAEJ7B,KAAK+F,YAAYlE,aAAa,OAAQ,aACtC7B,KAAK+F,YAAYJ,QAAU,WACvB3F,KAAKgG,iBACT,EAAErC,KAAK3D,MACPA,KAAKwF,UAAUhE,YAAYxB,KAAKyF,cAChCzF,KAAKwF,UAAUhE,YAAYxB,KAAK+F,aAChC/F,KAAKe,aAAaS,YAAYxB,KAAKwF,UACvC,CACA,sBAAA3B,GACI,QACyBoC,IAArBjG,KAAKkG,aACoC,IAAzCC,OAAOC,KAAKpG,KAAKkG,aAAaG,OAChC,CACErG,KAAKkG,YAAc,CAAC,EACpB,IAAK,IAAIzE,KAAWzB,KAAKiB,aACrBjB,KAAKgD,aAAaxB,YAAYC,GAElC,IAAK,IAAIA,KAAWzB,KAAKgB,cACrBhB,KAAKkD,YAAY1B,YAAYC,EAErC,KAAO,CACH,IAAI6E,EAAiB,GACrB,IAAK,IAAIC,KAAYvG,KAAKgB,cAEtB,GADAhB,KAAKkD,YAAY1B,YAAY+E,GACzBvG,KAAKkG,YAAYK,EAASpG,IAC1B,IAAK,IAAIqG,KAAWxG,KAAKkG,YAAYK,EAASpG,IAAK,CAC/CmG,EAAepE,KAAKsE,GACpB,IAAIC,EAAezG,KAAK0G,YAAYF,GAChCC,EACAF,EAAS/E,YAAYiF,GAErBE,QAAQC,KACJ,mBAAmBJ,8BAG/B,CAGR,IAAK,IAAIA,KAAWxG,KAAKiB,cACsB,GAAvCqF,EAAeO,QAAQL,EAAQrG,KAC/BH,KAAKgD,aAAaxB,YAAYgF,EAG1C,CACJ,CAEA,WAAAE,CAAYvG,GACR,IAAK,IAAIqG,KAAWxG,KAAKiB,aACrB,GAAIuF,EAAQrG,IAAMA,EACd,OAAOqG,CAGnB,CAEA,kBAAAM,GAEI,IAAIC,EAAQ,EACRC,EAAQ,CAAC,EACb,IAAK,IAAIT,KAAYvG,KAAKkG,YACtB,GAAIK,EAASF,OAAS,EAClB,IAAK,IAAIG,KAAWD,EACXS,EAAMR,KACPO,IACAC,EAAMR,IAAW,GAKjC,OAAOO,CACX,CAEA,gBAAA5E,CAAiB8E,GACb,IAAIzD,EAAOxD,KACXiH,EAAOtC,iBAAiB,aAAa,SAAUC,GAC3CA,EAAGM,aAAagC,QAAQ,cAAetC,EAAGuC,OAAOhH,GACrD,IACA8G,EAAOtC,iBAAiB,YAAY,SAAUC,GAC1CA,EAAGC,gBACP,IACAoC,EAAOtC,iBACH,OACA,SAAUC,GACNpB,EAAKuB,YAAa,EAClBH,EAAGC,iBACH,IAAII,EAAOL,EAAGM,aAAaC,QAAQ,eAC/BC,EAAcjE,SAASkE,eAAeJ,GAEtCG,GAAeR,EAAGuC,QACjBnH,KAAKsF,eAAeF,IAGrBpF,KAAKgD,aAAaxB,YAAY4D,EAEtC,EAAEzB,KAAK3D,OAIXiH,EAAOtC,iBAAiB,WAAW,SAAUC,GAC1B,UAAXA,EAAGwC,KAA8B,MAAXxC,EAAGwC,MACzBxC,EAAGC,iBACErB,EAAK6D,iBAIN7D,EAAK6D,gBAAgBhG,UAAU2D,OAAO,YACtCxB,EAAK6D,gBAAkB,OAJvB7D,EAAK6D,gBAAkBJ,EACvBA,EAAO5F,UAAUC,IAAI,aAMjC,GACJ,CAEA,gBAAAkB,CAAiB8E,GACbA,EAAO3C,iBACH,WACA,SAAUC,GACNpB,KAAKuB,YAAa,EAClBH,EAAGC,iBACCD,EAAGuC,OAAO9F,UAAUyD,SAAS,iBAG7BF,EAAGuC,OAAO9F,UAAUyD,SAAS,mBAC7BF,EAAGuC,OAAO9F,UAAUC,IAAI,eAEhC,EAAEqC,KAAK3D,OAEXsH,EAAO3C,iBAAiB,aAAa,SAAUC,GAC3CpB,KAAKuB,YAAa,EAClBH,EAAGC,iBACED,EAAGuC,OAAO9F,UAAUyD,SAAS,iBAGlCF,EAAGuC,OAAO9F,UAAU2D,OAAO,eAC/B,IACAsC,EAAO3C,iBACH,OACA,SAAUC,GACNpB,KAAKuB,YAAa,EAClBH,EAAGC,iBACCD,EAAGuC,OAAO9F,UAAUyD,SAAS,iBAC7BF,EAAGuC,OAAO9F,UAAU2D,OAAO,gBAE/B,IAAIC,EAAOL,EAAGM,aAAaC,QAAQ,eAC/BC,EAAcjE,SAASkE,eAAeJ,IAEtCL,EAAGuC,OAAO9F,UAAUyD,SAAS,mBAC5B9E,KAAKsF,eAAeF,IACpBpF,KAAKiB,aAAasG,SAAS3C,EAAGuC,SAG/BvC,EAAGuC,OAAO3F,YAAY4D,GAE1BpF,KAAK4D,aAAa5D,KAAKe,cAAcqD,MAAK,KACtCpE,KAAKqE,sBAAsB,GAEnC,EAAEV,KAAK3D,OAIXsH,EAAO3C,iBAAiB,WAAW,SAAUC,GACzB,UAAXA,EAAGwC,KAA8B,MAAXxC,EAAGwC,MAAgB5D,KAAK6D,kBAC/CzC,EAAGC,iBAEErB,KAAK8B,eAAe9B,KAAK6D,kBACzB7D,KAAKvC,aAAasG,SAASD,KAE5BA,EAAO9F,YAAYgC,KAAK6D,iBACxB7D,KAAK6D,gBAAgBhG,UAAU2D,OAAO,YACtCxB,KAAK6D,gBAAkB,KACvB7D,KAAKI,aAAaJ,KAAKzC,cAAcqD,MAAK,KACtCZ,KAAKa,sBAAsB,KAI3C,GACJ,CAEA,oBAAAA,GAEIrE,KAAKgD,aAAaF,MAAM0B,MAAQ,cAEhC,MAAMgD,EAAgBxH,KAAKgD,aAAayE,YAClCC,EAAa1H,KAAK6C,gBAAgB4E,YAExC,IAAIE,EAAkBC,KAAKC,KAAML,EAAgBE,EAAc,KAC/DC,EAAkBC,KAAKE,IAAI,GAAIF,KAAKG,IAAIJ,EAAiB,KACzD,MAAMK,EAAkB,IAAML,EAAkB,EAEhD3H,KAAKyE,UAAYkD,EACjB3H,KAAK0E,UAAYsD,EAEjBhI,KAAKgD,aAAaF,MAAM0B,MAAQ,GAAGmD,KACnC3H,KAAKkD,YAAYJ,MAAM0B,MAAQ,GAAGwD,IACtC,CAEA,iBAAAlE,GACS9D,KAAKiI,cACNjI,KAAKiI,YAAc9G,SAASC,cAAc,OAC1CpB,KAAKiI,YAAY9H,GAAKH,KAAKE,MAAQ,YACnCF,KAAKiI,YAAYpG,aAAa,YAAa,UAC3C7B,KAAKiI,YAAYpG,aAAa,OAAQ,UACtC7B,KAAKe,aAAaS,YAAYL,SAASC,cAAc,OACrDpB,KAAKe,aAAaS,YAAYxB,KAAKiI,aAE3C,CAKA,cAAA3C,CAAe4C,GAEX,OAAIA,EAAS5H,QAAQ2B,WAAajC,KAAKE,KAK3C,CAIA,eAAA8F,GACIhG,KAAKkD,YAAYtB,UAAY,GAC7B,IAAK,IAAI2E,KAAYvG,KAAKgB,cACtBuF,EAASlF,UAAU2D,OAAO,kBAC1BhF,KAAKkD,YAAY1B,YAAY+E,GAEjCvG,KAAKgD,aAAapB,UAAY,GAE1B5B,KAAKK,SACLL,KAAKiB,aAAeoB,EAAarC,KAAKiB,eAE1C,IAAK,IAAIuF,KAAWxG,KAAKiB,aACrBjB,KAAKgD,aAAaxB,YAAYgF,GAElCxG,KAAKkG,YAAc,CAAC,EACpBlG,KAAKiI,YAAYnF,MAAMC,QAAU,OACjC/C,KAAKqE,uBACLrE,KAAKkE,UAAYlE,KAAKgD,aAAamB,aACnCnE,KAAK6C,gBAAgBC,MAAMwB,UACvBtE,KAAKkE,UAAUK,WAAa,KAChCvE,KAAKiI,YAAYnF,MAAMqF,WAAa,QACxC,CAIA,gBAAAC,GACIpI,KAAKqI,WAAa,GAClB,IAAK,IAAI9B,KAAYvG,KAAKkD,YAAYoF,WAClCtI,KAAKqI,WAAWnG,KAAKqE,EAASjG,QAAQyB,UAE1C,OAAO/B,KAAKqI,UAChB,CAEA,kBAAAzC,GACI,IAAIyC,EAAarI,KAAKoI,mBACtBpI,KAAKuI,SAAU,EACfvI,KAAKwI,cAAgB,EACrBxI,KAAKyI,aAAe,EACpBzI,KAAK0I,WAAa,EAClB1I,KAAK2I,QAAU3I,KAAKiB,aAAaoF,OAEjC,IAAK,IAAIE,KAAYvG,KAAKkD,YAAYoF,WAElC,IAAK,IAAI9B,KAAWoC,MAAMC,KAAKtC,EAAS+B,YAAYQ,OAChD9I,KAAKyD,KAED+C,EAAQlG,QAAQyB,UAAYwE,EAASjG,QAAQyB,SAC7C/B,KAAK0I,aAEL1I,KAAKyI,eAIjB,IAAK,IAAIjC,KAAWoC,MAAMC,KAAK7I,KAAKgD,aAAasF,YAAYQ,QACxDC,GAASA,EAAKC,WAAaC,KAAKC,aAEoB,GAAjDb,EAAWxB,QAAQL,EAAQlG,QAAQyB,UACnC/B,KAAK0I,aAEL1I,KAAKwI,gBAGbxI,KAAKmJ,QAAUnJ,KAAK0I,WAAa1I,KAAKiB,aAAaoF,OACnDM,QAAQyC,IAAIpJ,KAAKmJ,QAASnJ,KAAKyI,aAAczI,KAAKwI,eAC9CxI,KAAKmJ,QAAU,IACfnJ,KAAKuI,SAAU,GAEnBvI,KAAKqJ,gBAAgB,CAAEd,QAASvI,KAAKuI,QAAU,IAAM,KACzD,CAEA,aAAAe,CAAc/C,GAIV,IAAIgC,GAAU,EACVgB,EAAoB,EACxB,IAAK,IAAI/C,KAAWoC,MAAMC,KAAKtC,EAAS+B,YAAYQ,OAAO9I,KAAKyD,KACxD+C,EAAQlG,QAAQyB,UAAYwE,EAASjG,QAAQyB,SAC7CwG,GAAU,EAEVgB,IAGR,IAAIC,EAAW,EACf,IAAK,IAAIC,KAAUzJ,KAAKiB,aAChBwI,EAAOnJ,QAAQyB,UAAYwE,EAASjG,QAAQyB,UAC5CyH,IAGR,OAAOjB,GAAWgB,GAAqBC,CAC3C,CAEA,cAAA9F,CAAe8C,GACX,QAAIxG,KAAKiB,aAAasG,SAASf,EAKnC,CAEA,sBAAMV,CAAiB4D,GACnB,IAAIC,EAASC,KAAKC,UAAU7J,KAAKkG,aAC7BjB,EAAO,CACP6E,MAAO,YACPC,IAAKJ,EACLA,OAAQA,EACRK,WAAYpC,KAAKqC,MAAMjK,KAAKkE,WAC5BgG,WAAYlK,KAAKyE,UACjB0F,WAAYnK,KAAK0E,UACjB0F,OAAQpK,KAAKE,MACbqI,QAASvI,KAAKuI,QACdG,WAAY1I,KAAK0I,WACjBC,QAAS3I,KAAK2I,cAEC,IAARe,IACPzE,EAAKyE,IAAMA,SAET1J,KAAKqK,aAAapF,EAC5B,CACA,cAAAY,GACI,IAAK,IAAIU,KAAYvG,KAAKkD,YAAYoF,WAElC,IAAK,IAAI9B,KAAWoC,MAAMC,KAAKtC,EAAS+B,YAAYQ,OAChD9I,KAAKyD,KAID+C,EAAQlG,QAAQyB,UAAYwE,EAASjG,QAAQyB,UAE7CyE,EAAQnF,UAAUC,IAAI,kBACtBkF,EAAQ3E,aAAa,eAAgB,QACrC2E,EAAQ3E,aACJ,oBACA2E,EAAQrG,GAAK,UAEjBgB,SAASkE,eACLmB,EAAQrG,GAAK,UACfkB,UAAU2D,OAAO,kBAEnBwB,EAAQnF,UAAU2D,OAAO,kBACzBwB,EAAQ3E,aAAa,eAAgB,SACrC2E,EAAQ8D,gBAAgB,sBAQpC,GAJKtK,KAAKiI,aACNjI,KAAK8D,oBAET9D,KAAKiI,YAAYnF,MAAMqF,WAAa,UAChCnI,KAAKuI,QAAS,CACd,IAAIgC,EAAapL,EAAEC,KAAK,gCACxBoL,YAAW,KACPxK,KAAKiI,YAAYrG,UAAY2I,CAAU,GACxC,IACHvK,KAAKiI,YAAYwC,UAAY,qCAEjC,KAAO,CACH,IAAIC,EAAevL,EAAEC,KACjBD,EAAEC,KAAK,kCACPY,KAAK0I,WACL1I,KAAKyI,aACLzI,KAAK2I,QACL3I,KAAKwI,eAGTgC,YAAW,KACPxK,KAAKiI,YAAYrG,UAAY8I,EAAe,IAAM1K,KAAKO,QAAQ,GAChE,IACHP,KAAKiI,YAAYwC,UACb,uCACR,CACAzK,KAAK4D,aAAa5D,KAAKiI,YAC3B,CAIA,cAAA0C,CAAe1F,GAEXjF,KAAKiE,oBAAqB,EAC1BjE,KAAKkE,UAAYe,EAAK+E,WACtBhK,KAAKyE,UAAYQ,EAAKiF,WACtBlK,KAAK0E,UAAYO,EAAKkF,WACtBnK,KAAKkG,YAAc0D,KAAKgB,MAAM3F,EAAK0E,QACnC3J,KAAKuI,QAAUtD,EAAKsD,QACpBvI,KAAKuD,iBACT,CAEA,iBAAAsH,GACI,IAAI7K,KAAK8K,aAAT,CAGA,IAAIC,EAGJ,GAFA/K,KAAKiE,oBAAqB,EAChB+G,aAAa3E,OACb,EAAG,CACT,IAAI4E,EAAKD,aAAaE,QAAQlL,KAAKmL,mBACnC,GAAW,OAAPF,EAAa,CACbjL,KAAKiE,oBAAqB,EAC1B,IACI8G,EAAYnB,KAAKgB,MAAMK,GACvBjL,KAAKkE,UAAY6G,EAAUf,WAC3BhK,KAAKyE,UAAYsG,EAAUb,WAC3BlK,KAAK0E,UAAYqG,EAAUZ,UAC/B,CAAE,MAAOiB,GAML,OAJAzE,QAAQyC,IAAIgC,EAAIC,SAChBL,aAAaM,WAAWtL,KAAKmL,mBAC7BnL,KAAKiE,oBAAqB,OAC1BjE,KAAKuD,iBAET,CAEA,GADAvD,KAAKkG,YAAc6E,EAAUpB,OACzB3J,KAAKI,qBAAsB,CAE3B,IAAIuJ,EAASC,KAAKC,UAAU7J,KAAKkG,aACjClG,KAAKqK,aAAa,CACdP,MAAO,YACPC,IAAKJ,EACLA,OAAQA,EACRK,WAAYpC,KAAKqC,MAAMjK,KAAKkE,WAC5BgG,WAAYlK,KAAKyE,UACjB0F,WAAYnK,KAAK0E,UACjB0F,OAAQpK,KAAKE,MACbqI,QAASwC,EAAUxC,SAE3B,CACJ,CACJ,CACAvI,KAAKuD,iBAtCL,CAuCJ,CAEA,eAAA8F,CAAgBpE,GACZ,QAAoBgB,IAAhBhB,EAAK0E,OAAsB,CAE3B3J,KAAKkG,YAAc,CAAC,EACpB,IAAK,IAAIK,KAAYvG,KAAKkD,YAAYoF,WAAY,CAC9CtI,KAAKkG,YAAYK,EAASpG,IAAM,GAChC,IAAK,IAAIqG,KAAWD,EAAS+B,WAErB9B,EAAQwC,WAAaC,KAAKC,WAC1BlJ,KAAKiB,aAAasG,SAASf,IAE3BxG,KAAKkG,YAAYK,EAASpG,IAAI+B,KAAKsE,EAAQrG,GAGvD,CACJ,CACA,IAAIoL,EAAY,IAAIC,KAChBjD,EAAUtD,EAAKsD,QACfkD,EAAa,CACb9B,OAAQ3J,KAAKkG,YACb8D,WAAYhK,KAAKkE,UACjBwH,UAAWH,EACXhD,QAASA,EACT2B,WAAYlK,KAAKyE,UACjB0F,WAAYnK,KAAK0E,WAErBsG,aAAaW,QACT3L,KAAKmL,kBACLvB,KAAKC,UAAU4B,GAEvB,CAEA,kBAAAG,GACI5L,KAAK+F,YAAYjD,MAAMC,QAAU,OACjC,IAAK,IAAI8I,EAAI,EAAGA,EAAI7L,KAAKiB,aAAaoF,OAAQwF,IAE1C7L,KAAKiB,aAAa4K,GAAGC,WAAY,EACjC9L,KAAKiB,aAAa4K,GAAG/I,MAAMiJ,OAAS,SAE5C,EAGJ,SAAS1J,EAAa2J,GAClB,IAAK,IAAIH,EAAIG,EAAM3F,OAAS,EAAGwF,EAAI,EAAGA,IAAK,CAEvC,MAAMI,EAAIrE,KAAKsE,MAAMtE,KAAKvH,UAAYwL,EAAI,KAEzCG,EAAMH,GAAIG,EAAMC,IAAM,CAACD,EAAMC,GAAID,EAAMH,GAC5C,CACA,OAAOG,CACX,CAMA7K,SAASwD,iBAAiB,4BAA4B,WACjCxD,SAASO,iBAAiB,8BAClCyK,SAAS1K,IACd,MAAM5B,EAAO,CACTE,KAAM0B,EACNrB,qBAAsBiD,YAAYjD,sBAEtC,IAAKqB,EAAQ2K,QAAQ,oCAEjB,IACIC,OAAOC,aAAa7K,EAAQtB,IAAM,IAAIR,EAAUE,EACpD,CAAE,MAAOuL,GACLzE,QAAQyC,IACJ,qCAAqC3H,EAAQtB,OAAOiL,IAE5D,CACJ,GAER,IC7wBe,MAAMmB,UAAuB5M,EACxC,WAAAC,CAAYC,GACRC,MAAMD,GACNG,KAAKuD,kBACLvD,KAAKwM,gBAAgBxM,KAAKe,cAC1Bf,KAAKyM,aACT,CACA,WAAAA,GACItN,EAAEa,KAAKyF,cAAciH,MACzB,CACA,eAAAF,CAAgBG,GAGZ,IAAIC,EAAczL,SAASC,cAAc,OACrCyL,EAAW1L,SAASC,cAAc,OACtCjC,EAAE0N,GAAUC,KAAK,CACbC,IAAK,uBACLjK,MAAO,2BAEX8J,EAAYnC,UAAY,UACxBmC,EAAYI,MAAQ,GACpBJ,EAAYpL,YAAYqL,GACxB1N,EAAEwN,GAAWM,QAAQL,EACzB,CACA,iBAAAM,GAKI,OAHIlN,KAAKwI,gBAAkBxI,KAAKmN,cAAc9G,SAC1CrG,KAAKuI,QAAU,MAEXvI,KAAKuI,SACT,KAAK,EACD,MAAO,IACX,KAAK,EACD,MAAO,IACX,QACI,OAAO,KAEnB,CACA,YAAA6E,GACIjO,EAAEa,KAAKiI,aAAayE,MACxB,OAGoC,IAA7BL,OAAOgB,oBACdhB,OAAOgB,kBAAoB,CAAC,GAEhChB,OAAOgB,kBAA6B,UAAI,SAAUxN,GAC9C,OAAIA,EAAKyN,MACE,IAAIf,EAAe1M,GAEvB,IAAIF,EAAUE,EACzB,C,aCvDAV,EAAEC,OAAOC,KAAK,CACV,QAAS,CACLE,6BAA8B,WAC9BC,+BACI,wFACJC,uBAAwB,YACxBC,oBAAqB,Y","sources":["webpack://WebComponents/./runestone/dragndrop/js/dragndrop-i18n.en.js","webpack://WebComponents/./runestone/dragndrop/js/dragndrop.js","webpack://WebComponents/./runestone/dragndrop/js/timeddnd.js","webpack://WebComponents/./runestone/dragndrop/js/dragndrop-i18n.pt-br.js"],"sourcesContent":["$.i18n().load({\n    en: {\n        msg_dragndrop_correct_answer: \"You are correct!\",\n        msg_dragndrop_incorrect_answer:\n            \"Incorrect. Of the cards you have sorted you placed $1 correctly and $2 incorrectly. You have $4 left to place.\",\n        msg_dragndrop_check_me: \"Check me\",\n        msg_dragndrop_reset: \"Reset\",\n    },\n});\n","/*==========================================\n=======     Master dragndrop.js     ========\n============================================\n===     This file contains the JS for    ===\n=== the Runestone Drag n drop component. ===\n============================================\n===              Created by              ===\n===           Isaiah Mayerchak           ===\n===                7/6/15                ===\n===              Brad MIller             ===\n===                2/7/19                ===\n===               12/30/24               ===\n==========================================*/\n\n/*\n * Some terminology:\n * - draggable: the element that is being dragged\n * - dropzone: the element that is being dropped on\n * - premise: the element that is being dragged\n * - response: the element that is being dropped on\n * - category: each premis and response have a category.  Several premises can have the same category\n * and be dropped onto the same response.  If a premise has no response its category will not be in\n * the list of categories.\n *\n * Key variables:\n * - dragArray: an array of draggable elements\n * - dropArray: an array of dropzone elements\n * - categories: an array of all categories\n */\n\"use strict\";\n\nimport RunestoneBase from \"../../common/js/runestonebase.js\";\nimport \"../css/dragndrop.less\";\nimport \"./dragndrop-i18n.en.js\";\nimport \"./dragndrop-i18n.pt-br.js\";\n//import \"./DragDropTouch.js\";\n\nexport default class DragNDrop extends RunestoneBase {\n    constructor(opts) {\n        super(opts);\n        var orig = opts.orig; // entire <ul> element that will be replaced by new HTML\n        this.origElem = orig;\n        this.divid = orig.id;\n        this.useRunestoneServices = opts.useRunestoneServices;\n        this.random = true;\n        //check if the original element has a data-random attribute set to the value \"no\"\n        if (this.origElem.dataset.random === \"no\") {\n            this.random = false;\n        }\n        this.feedback = \"\";\n        this.question = \"\";\n        this.populate(); // Populates this.responseArray, this.premiseArray, this.feedback and this.question\n        this.createNewElements();\n        this.caption = \"Drag-N-Drop\";\n        this.addCaption(\"runestone\");\n        if (typeof Prism !== \"undefined\") {\n            Prism.highlightAllUnder(this.containerDiv);\n        }\n    }\n\n    /*======================\n    === Update variables ===\n    ======================*/\n    populate() {\n        this.responseArray = [];\n        this.premiseArray = [];\n        let invisibleErrorDiv = document.createElement(\"div\");\n        invisibleErrorDiv.classList.add(\"ptx-runestone-container\");\n        document.body.appendChild(invisibleErrorDiv);\n\n        for (let element of this.origElem.querySelectorAll(\n            \"[data-subcomponent='draggable']\"\n        )) {\n            let replaceSpan = document.createElement(\"span\");\n            replaceSpan.innerHTML = element.innerHTML;\n            replaceSpan.id = element.id;\n            replaceSpan.setAttribute(\"draggable\", \"true\");\n            replaceSpan.classList.add(\"draggable-drag\");\n            replaceSpan.classList.add(\"premise\");\n            replaceSpan.tabIndex = 0;\n            replaceSpan.setAttribute('role', 'button');\n            replaceSpan.dataset.category = this.getCategory(element);\n            replaceSpan.dataset.parent_id = this.divid;\n            this.premiseArray.push(replaceSpan);\n            this.setDragListeners(replaceSpan);\n            // now create an error message for when the premise is dropped in the wrong place\n            let errorMessage = document.createElement(\"div\");\n            errorMessage.classList.add(\"vh-dnd-error\");\n            errorMessage.innerHTML = \"Incorrect drop zone for \" + replaceSpan.innerHTML;\n            errorMessage.setAttribute(\"role\", \"alert\");\n            errorMessage.id = replaceSpan.id + \"_error\";\n            invisibleErrorDiv.appendChild(errorMessage);\n        }\n        if (this.random) {\n            // Shuffle the premiseArray if random is true\n            this.premiseArray = shuffleArray(this.premiseArray);\n        }\n        for (let element of this.origElem.querySelectorAll(\n            \"[data-subcomponent='dropzone']\"\n        )) {\n            let replaceSpan = document.createElement(\"span\");\n            replaceSpan.innerHTML = element.innerHTML;\n            replaceSpan.id = element\n                .getAttribute(\"for\")\n                .replace(\"drag\", \"drop\");\n            replaceSpan.classList.add(\n                \"draggable-drop\",\n                \"drop-label\",\n                \"response\"\n            );\n            replaceSpan.tabIndex = 0;\n            replaceSpan.setAttribute('role', 'button');\n            replaceSpan.dataset.category = this.getCategory(element);\n            replaceSpan.dataset.parent_id = this.divid;\n            this.responseArray.push(replaceSpan);\n            this.setDropListeners(replaceSpan);\n        }\n\n        this.question = this.origElem.querySelector(\n            \"[data-subcomponent='question']\"\n        ).innerHTML;\n        let feedback = this.origElem.querySelector(\n            \"[data-subcomponent='feedback']\"\n        );\n        if (feedback) {\n            this.feedback = feedback.innerHTML;\n        }\n    }\n\n    getCategory(elem) {\n        if (elem.dataset.category) {\n            return elem.dataset.category;\n        } else {\n            // if no category then use the for attribute or the id\n            // this is for backwards compatibility\n            if (elem.hasAttribute(\"for\")) {\n                return elem.getAttribute(\"for\");\n            } else {\n                return elem.id;\n            }\n        }\n    }\n    /*========================================\n    == Create new HTML elements and replace ==\n    ==      original element with them      ==\n    ========================================*/\n    createNewElements() {\n        this.containerDiv = document.createElement(\"div\");\n        this.containerDiv.id = this.divid;\n        this.containerDiv.classList.add(\"draggable-container\");\n        this.statementDiv = document.createElement(\"div\");\n        this.statementDiv.classList.add(\"cardsort-statement\");\n        this.statementDiv.innerHTML = this.question;\n        this.containerDiv.appendChild(this.statementDiv);\n        this.containerDiv.appendChild(document.createElement(\"br\"));\n        this.dragDropWrapDiv = document.createElement(\"div\"); // Holds the draggables/dropzones, prevents feedback from bleeding in\n        this.dragDropWrapDiv.style.display = \"block\";\n        this.containerDiv.appendChild(this.dragDropWrapDiv);\n        this.draggableDiv = document.createElement(\"div\");\n        this.draggableDiv.classList.add(\"rsdraggable\", \"dragzone\");\n        this.addDragDivListeners();\n        this.dropZoneDiv = document.createElement(\"div\");\n        this.dropZoneDiv.classList.add(\"rsdraggable\");\n        this.dragDropWrapDiv.appendChild(this.draggableDiv);\n        this.dragDropWrapDiv.appendChild(this.dropZoneDiv);\n        this.createButtons();\n        this.checkServer(\"dragNdrop\", true);\n        if (eBookConfig.practice_mode) {\n            this.finishSettingUp();\n        }\n        self = this;\n        this.ivp = this.isValidPremise.bind(this);\n        self.queueMathJax(self.containerDiv);\n    }\n\n    finishSettingUp() {\n        this.appendReplacementSpans();\n        this.createFeedbackDiv();\n        this.origElem.parentNode.replaceChild(this.containerDiv, this.origElem);\n        if (!this.hasStoredDropzones) {\n            this.minheight = this.draggableDiv.offsetHeight;\n            // Ensure MathJax has completed before adjusting the zone widths\n            this.queueMathJax(this.containerDiv).then(() => {\n                this.adjustDragDropWidths();\n            });\n        }\n        this.draggableDiv.style.minHeight = this.minheight.toString() + \"px\";\n        if (this.dropZoneDiv.offsetHeight > this.minheight) {\n            this.dragDropWrapDiv.style.minHeight =\n                this.dropZoneDiv.offsetHeight.toString() + \"px\";\n        } else {\n            this.dragDropWrapDiv.style.minHeight =\n                this.minheight.toString() + \"px\";\n        }\n        this.draggableDiv.style.width = `${this.dragwidth}%`;\n        this.dropZoneDiv.style.width = `${this.dropwidth}%`;\n    }\n    addDragDivListeners() {\n        let self = this;\n        this.draggableDiv.addEventListener(\n            \"dragover\",\n            function (ev) {\n                ev.preventDefault();\n                if (this.draggableDiv.classList.contains(\"possibleDrop\")) {\n                    return;\n                }\n                this.draggableDiv.classList.add(\"possibleDrop\");\n            }.bind(this)\n        );\n        this.draggableDiv.addEventListener(\n            \"drop\",\n            function (ev) {\n                self.isAnswered = true;\n                ev.preventDefault();\n                if (this.draggableDiv.classList.contains(\"possibleDrop\")) {\n                    this.draggableDiv.classList.remove(\"possibleDrop\");\n                }\n                var data = ev.dataTransfer.getData(\"draggableID\");\n                var draggedSpan = document.getElementById(data);\n                if (\n                    !this.draggableDiv.contains(draggedSpan) &&\n                    !this.strangerDanger(draggedSpan)\n                ) {\n                    // Make sure element isn't already there--prevents erros w/appending child\n                    this.draggableDiv.appendChild(draggedSpan);\n                    this.adjustDragDropWidths();\n                    this.minheight = this.draggableDiv.offsetHeight;\n                    this.dragDropWrapDiv.style.minHeight =\n                        this.minheight.toString() + \"px\";\n                }\n            }.bind(this)\n        );\n        this.draggableDiv.addEventListener(\n            \"dragleave\",\n            function (e) {\n                if (!this.draggableDiv.classList.contains(\"possibleDrop\")) {\n                    return;\n                }\n                this.draggableDiv.classList.remove(\"possibleDrop\");\n            }.bind(this)\n        );\n    }\n    createButtons() {\n        this.buttonDiv = document.createElement(\"div\");\n        this.buttonDiv.classList.add(\"dnd-button-container\");\n        this.submitButton = document.createElement(\"button\"); // Check me button\n        this.submitButton.textContent = $.i18n(\"msg_dragndrop_check_me\");\n        this.submitButton.setAttribute(\"class\", \"btn btn-success drag-button\");\n        this.submitButton.setAttribute(\"name\", \"do answer\");\n        this.submitButton.setAttribute(\"type\", \"button\");\n        this.submitButton.onclick = function () {\n            this.checkCurrentAnswer();\n            this.renderFeedback();\n            this.logCurrentAnswer();\n        }.bind(this);\n        this.resetButton = document.createElement(\"button\"); // Check me button\n        this.resetButton.textContent = $.i18n(\"msg_dragndrop_reset\");\n        this.resetButton.setAttribute(\n            \"class\",\n            \"btn btn-default drag-button drag-reset\"\n        );\n        this.resetButton.setAttribute(\"name\", \"do answer\");\n        this.resetButton.onclick = function () {\n            this.resetDraggables();\n        }.bind(this);\n        this.buttonDiv.appendChild(this.submitButton);\n        this.buttonDiv.appendChild(this.resetButton);\n        this.containerDiv.appendChild(this.buttonDiv);\n    }\n    appendReplacementSpans() {\n        if (\n            this.answerState === undefined ||\n            Object.keys(this.answerState).length === 0\n        ) {\n            this.answerState = {};\n            for (let element of this.premiseArray) {\n                this.draggableDiv.appendChild(element);\n            }\n            for (let element of this.responseArray) {\n                this.dropZoneDiv.appendChild(element);\n            }\n        } else {\n            let placedPremises = [];\n            for (let response of this.responseArray) {\n                this.dropZoneDiv.appendChild(response);\n                if (this.answerState[response.id]) {\n                    for (let premise of this.answerState[response.id]) {\n                        placedPremises.push(premise);\n                        let foundPremise = this.findPremise(premise);\n                        if (foundPremise) {\n                            response.appendChild(foundPremise);\n                        } else {\n                            console.warn(\n                                `Premise with ID ${premise} not found in premiseArray`\n                            );\n                        }\n                    }\n                }\n            }\n            for (let premise of this.premiseArray) {\n                if (placedPremises.indexOf(premise.id) == -1) {\n                    this.draggableDiv.appendChild(premise);\n                }\n            }\n        }\n    }\n\n    findPremise(id) {\n        for (let premise of this.premiseArray) {\n            if (premise.id == id) {\n                return premise;\n            }\n        }\n    }\n\n    countSavedPremises() {\n        // Count how many premises are saved in the answerState\n        let count = 0;\n        let names = {};\n        for (let response of this.answerState) {\n            if (response.length > 0) {\n                for (let premise of response) {\n                    if (!names[premise]) {\n                        count++;\n                        names[premise] = true;\n                    }\n                }\n            }\n        }\n        return count;\n    }\n\n    setDragListeners(dgSpan) {\n        let self = this;\n        dgSpan.addEventListener(\"dragstart\", function (ev) {\n            ev.dataTransfer.setData(\"draggableID\", ev.target.id);\n        });\n        dgSpan.addEventListener(\"dragover\", function (ev) {\n            ev.preventDefault();\n        });\n        dgSpan.addEventListener(\n            \"drop\",\n            function (ev) {\n                self.isAnswered = true;\n                ev.preventDefault();\n                var data = ev.dataTransfer.getData(\"draggableID\");\n                var draggedSpan = document.getElementById(data);\n                if (\n                    draggedSpan != ev.target &&\n                    !this.strangerDanger(draggedSpan)\n                ) {\n                    // Make sure element isn't already there--prevents errors w/appending child\n                    this.draggableDiv.appendChild(draggedSpan);\n                }\n            }.bind(this)\n        );\n\n        // Add keyboard navigation for selecting premises\n        dgSpan.addEventListener(\"keydown\", function (ev) {\n            if (ev.key === \"Enter\" || ev.key === \" \") {\n                ev.preventDefault();\n                if (!self.selectedPremise) {\n                    self.selectedPremise = dgSpan;\n                    dgSpan.classList.add(\"selected\");\n                } else {\n                    self.selectedPremise.classList.remove(\"selected\");\n                    self.selectedPremise = null;\n                }\n            }\n        });\n    }\n\n    setDropListeners(dpSpan) {\n        dpSpan.addEventListener(\n            \"dragover\",\n            function (ev) {\n                self.isAnswered = true;\n                ev.preventDefault();\n                if (ev.target.classList.contains(\"possibleDrop\")) {\n                    return;\n                }\n                if (ev.target.classList.contains(\"draggable-drop\")) {\n                    ev.target.classList.add(\"possibleDrop\");\n                }\n            }.bind(this)\n        );\n        dpSpan.addEventListener(\"dragleave\", function (ev) {\n            self.isAnswered = true;\n            ev.preventDefault();\n            if (!ev.target.classList.contains(\"possibleDrop\")) {\n                return;\n            }\n            ev.target.classList.remove(\"possibleDrop\");\n        });\n        dpSpan.addEventListener(\n            \"drop\",\n            function (ev) {\n                self.isAnswered = true;\n                ev.preventDefault();\n                if (ev.target.classList.contains(\"possibleDrop\")) {\n                    ev.target.classList.remove(\"possibleDrop\");\n                }\n                var data = ev.dataTransfer.getData(\"draggableID\");\n                var draggedSpan = document.getElementById(data);\n                if (\n                    ev.target.classList.contains(\"draggable-drop\") &&\n                    !this.strangerDanger(draggedSpan) &&\n                    !this.premiseArray.includes(ev.target) // don't drop on another premise!\n                ) {\n                    // Make sure element isn't already there--prevents errors w/appending child\n                    ev.target.appendChild(draggedSpan);\n                }\n                this.queueMathJax(this.containerDiv).then(() => {\n                    this.adjustDragDropWidths();\n                });\n            }.bind(this)\n        );\n\n        // Add keyboard navigation for dropping premises\n        dpSpan.addEventListener(\"keydown\", function (ev) {\n            if ((ev.key === \"Enter\" || ev.key === \" \") && self.selectedPremise) {\n                ev.preventDefault();\n                if (\n                    !self.strangerDanger(self.selectedPremise) &&\n                    !self.premiseArray.includes(dpSpan) // don't drop on another premise!\n                ) {\n                    dpSpan.appendChild(self.selectedPremise);\n                    self.selectedPremise.classList.remove(\"selected\");\n                    self.selectedPremise = null;\n                    self.queueMathJax(self.containerDiv).then(() => {\n                        self.adjustDragDropWidths();\n                    });\n                }\n            }\n        });\n    }\n\n    adjustDragDropWidths() {\n        // Temporarily minimize the dragzone width to the content\n        this.draggableDiv.style.width = \"fit-content\";\n\n        const dragzoneWidth = this.draggableDiv.offsetWidth;\n        const totalWidth = this.dragDropWrapDiv.offsetWidth;\n\n        let dragzonePercent = Math.ceil((dragzoneWidth / totalWidth) * 100);\n        dragzonePercent = Math.max(28, Math.min(dragzonePercent, 48));\n        const dropzonePercent = 100 - dragzonePercent - 4; // 4 accounts for zone padding\n\n        this.dragwidth = dragzonePercent;\n        this.dropwidth = dropzonePercent;\n\n        this.draggableDiv.style.width = `${dragzonePercent}%`;\n        this.dropZoneDiv.style.width = `${dropzonePercent}%`;\n    }\n\n    createFeedbackDiv() {\n        if (!this.feedBackDiv) {\n            this.feedBackDiv = document.createElement(\"div\");\n            this.feedBackDiv.id = this.divid + \"_feedback\";\n            this.feedBackDiv.setAttribute(\"aria-live\", \"polite\");\n            this.feedBackDiv.setAttribute(\"role\", \"status\");\n            this.containerDiv.appendChild(document.createElement(\"br\"));\n            this.containerDiv.appendChild(this.feedBackDiv);\n        }\n    }\n    /*=======================\n    == Auxiliary functions ==\n    =======================*/\n    /* leaving the name as is, because it reminds me of Isaiah! */\n    strangerDanger(testSpan) {\n        // Returns true if the test span doesn't belong to this instance of DragNDrop\n        if (testSpan.dataset.parent_id != this.divid) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n    /*==============================\n    == Reset button functionality ==\n    ==============================*/\n    resetDraggables() {\n        this.dropZoneDiv.innerHTML = \"\";\n        for (let response of this.responseArray) {\n            response.classList.remove(\"drop-incorrect\");\n            this.dropZoneDiv.appendChild(response);\n        }\n        this.draggableDiv.innerHTML = \"\";\n        // Shuffle the premiseArray if random is true\n        if (this.random) {\n            this.premiseArray = shuffleArray(this.premiseArray);\n        }\n        for (let premise of this.premiseArray) {\n            this.draggableDiv.appendChild(premise);\n        }\n        this.answerState = {};\n        this.feedBackDiv.style.display = \"none\";\n        this.adjustDragDropWidths();\n        this.minheight = this.draggableDiv.offsetHeight;\n        this.dragDropWrapDiv.style.minHeight =\n            this.minheight.toString() + \"px\";\n        this.feedBackDiv.style.visibility = \"hidden\";\n    }\n    /*===========================\n    == Evaluation and feedback ==\n    ===========================*/\n    getAllCategories() {\n        this.categories = [];\n        for (let response of this.dropZoneDiv.childNodes) {\n            this.categories.push(response.dataset.category);\n        }\n        return this.categories;\n    }\n\n    checkCurrentAnswer() {\n        let categories = this.getAllCategories();\n        this.correct = true;\n        this.unansweredNum = 0;\n        this.incorrectNum = 0;\n        this.correctNum = 0;\n        this.dragNum = this.premiseArray.length;\n\n        for (let response of this.dropZoneDiv.childNodes) {\n            // ignore drop zone children that aren't premises\n            for (let premise of Array.from(response.childNodes).filter(\n                this.ivp\n            )) {\n                if (premise.dataset.category == response.dataset.category) {\n                    this.correctNum++;\n                } else {\n                    this.incorrectNum++;\n                }\n            }\n        }\n        for (let premise of Array.from(this.draggableDiv.childNodes).filter(\n            (node) => node.nodeType !== Node.TEXT_NODE\n        )) {\n            if (categories.indexOf(premise.dataset.category) == -1) {\n                this.correctNum++;\n            } else {\n                this.unansweredNum++;\n            }\n        }\n        this.percent = this.correctNum / this.premiseArray.length;\n        console.log(this.percent, this.incorrectNum, this.unansweredNum);\n        if (this.percent < 1.0) {\n            this.correct = false;\n        }\n        this.setLocalStorage({ correct: this.correct ? \"T\" : \"F\" });\n    }\n\n    isCorrectDrop(response) {\n        // Returns true if all premises in the response are in the correct category\n        // and all premises in the category are in the response\n        // used by renderFeedback\n        let correct = true;\n        let correctPlacements = 0;\n        for (let premise of Array.from(response.childNodes).filter(this.ivp)) {\n            if (premise.dataset.category != response.dataset.category) {\n                correct = false;\n            } else {\n                correctPlacements++;\n            }\n        }\n        let catCount = 0;\n        for (let premis of this.premiseArray) {\n            if (premis.dataset.category == response.dataset.category) {\n                catCount++;\n            }\n        }\n        return correct && correctPlacements == catCount;\n    }\n\n    isValidPremise(premise) {\n        if (this.premiseArray.includes(premise)) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    async logCurrentAnswer(sid) {\n        let answer = JSON.stringify(this.answerState);\n        let data = {\n            event: \"dragNdrop\",\n            act: answer,\n            answer: answer,\n            min_height: Math.round(this.minheight),\n            drag_width: this.dragwidth,\n            drop_width: this.dropwidth,\n            div_id: this.divid,\n            correct: this.correct,\n            correctNum: this.correctNum,\n            dragNum: this.dragNum,\n        };\n        if (typeof sid !== \"undefined\") {\n            data.sid = sid;\n        }\n        await this.logBookEvent(data);\n    }\n    renderFeedback() {\n        for (let response of this.dropZoneDiv.childNodes) {\n            // iterate over all the premises in the response\n            for (let premise of Array.from(response.childNodes).filter(\n                this.ivp\n            )) {\n                // if the premise is not in the correct category, add the class\n                if (\n                    premise.dataset.category != response.dataset.category\n                ) {\n                    premise.classList.add(\"drop-incorrect\");\n                    premise.setAttribute(\"aria-invalid\", \"true\");\n                    premise.setAttribute(\n                        \"aria-errormessage\",\n                        premise.id + \"_error\"\n                    );\n                    document.getElementById(\n                        premise.id + \"_error\"\n                    ).classList.remove(\"vh-dnd-error\");\n                } else {\n                    premise.classList.remove(\"drop-incorrect\");\n                    premise.setAttribute(\"aria-invalid\", \"false\");\n                    premise.removeAttribute(\"aria-errormessage\");\n                }\n            }\n        }\n        if (!this.feedBackDiv) {\n            this.createFeedbackDiv();\n        }\n        this.feedBackDiv.style.visibility = \"visible\";\n        if (this.correct) {\n            var msgCorrect = $.i18n(\"msg_dragndrop_correct_answer\");\n            setTimeout(() => {\n                this.feedBackDiv.innerHTML = msgCorrect;\n            }, 10);\n            this.feedBackDiv.className = \"alert alert-info draggable-feedback\";\n\n        } else {\n            var msgIncorrect = $.i18n(\n                $.i18n(\"msg_dragndrop_incorrect_answer\"),\n                this.correctNum,\n                this.incorrectNum,\n                this.dragNum,\n                this.unansweredNum\n            );\n            // this.feedback comes from the author (a hint maybe)\n            setTimeout(() => {\n                this.feedBackDiv.innerHTML = msgIncorrect + \" \" + this.feedback;\n            }, 10);\n            this.feedBackDiv.className =\n                \"alert alert-danger draggable-feedback\";\n        }\n        this.queueMathJax(this.feedBackDiv);\n    }\n    /*===================================\n    === Checking/restoring from storage ===\n    ===================================*/\n    restoreAnswers(data) {\n        // Restore answers from storage retrieval done in RunestoneBase\n        this.hasStoredDropzones = true;\n        this.minheight = data.min_height;\n        this.dragwidth = data.drag_width;\n        this.dropwidth = data.drop_width;\n        this.answerState = JSON.parse(data.answer);\n        this.correct = data.correct;\n        this.finishSettingUp();\n    }\n\n    checkLocalStorage() {\n        if (this.graderactive) {\n            return;\n        }\n        var storedObj;\n        this.hasStoredDropzones = false;\n        var len = localStorage.length;\n        if (len > 0) {\n            var ex = localStorage.getItem(this.localStorageKey());\n            if (ex !== null) {\n                this.hasStoredDropzones = true;\n                try {\n                    storedObj = JSON.parse(ex);\n                    this.minheight = storedObj.min_height;\n                    this.dragwidth = storedObj.drag_width;\n                    this.dropwidth = storedObj.drop_width;\n                } catch (err) {\n                    // error while parsing; likely due to bad value stored in storage\n                    console.log(err.message);\n                    localStorage.removeItem(this.localStorageKey());\n                    this.hasStoredDropzones = false;\n                    this.finishSettingUp();\n                    return;\n                }\n                this.answerState = storedObj.answer;\n                if (this.useRunestoneServices) {\n                    // store answer in database\n                    let answer = JSON.stringify(this.answerState);\n                    this.logBookEvent({\n                        event: \"dragNdrop\",\n                        act: answer,\n                        answer: answer,\n                        min_height: Math.round(this.minheight),\n                        drag_width: this.dragwidth,\n                        drop_width: this.dropwidth,\n                        div_id: this.divid,\n                        correct: storedObj.correct,\n                    });\n                }\n            }\n        }\n        this.finishSettingUp();\n    }\n\n    setLocalStorage(data) {\n        if (data.answer === undefined) {\n            // If we didn't load from the server, we must generate the data\n            this.answerState = {};\n            for (let response of this.dropZoneDiv.childNodes) {\n                this.answerState[response.id] = [];\n                for (let premise of response.childNodes) {\n                    if (\n                        premise.nodeType !== Node.TEXT_NODE &&\n                        this.premiseArray.includes(premise)\n                    ) {\n                        this.answerState[response.id].push(premise.id);\n                    }\n                }\n            }\n        }\n        var timeStamp = new Date();\n        var correct = data.correct;\n        var storageObj = {\n            answer: this.answerState,\n            min_height: this.minheight,\n            timestamp: timeStamp,\n            correct: correct,\n            drag_width: this.dragwidth,\n            drop_width: this.dropwidth,\n        };\n        localStorage.setItem(\n            this.localStorageKey(),\n            JSON.stringify(storageObj)\n        );\n    }\n\n    disableInteraction() {\n        this.resetButton.style.display = \"none\";\n        for (var i = 0; i < this.premiseArray.length; i++) {\n            // No more dragging\n            this.premiseArray[i].draggable = false;\n            this.premiseArray[i].style.cursor = \"initial\";\n        }\n    }\n}\n\nfunction shuffleArray(array) {\n    for (let i = array.length - 1; i > 0; i--) {\n        // Generate a random index between 0 and i\n        const j = Math.floor(Math.random() * (i + 1));\n        // Swap elements at indices i and j\n        [array[i], array[j]] = [array[j], array[i]];\n    }\n    return array;\n}\n\n/*=================================\n== Find the custom HTML tags and ==\n==   execute our code on them    ==\n=================================*/\ndocument.addEventListener(\"runestone:login-complete\", function () {\n    const elements = document.querySelectorAll(\"[data-component=dragndrop]\");\n    elements.forEach((element) => {\n        const opts = {\n            orig: element,\n            useRunestoneServices: eBookConfig.useRunestoneServices,\n        };\n        if (!element.closest(\"[data-component=timedAssessment]\")) {\n            // If this element exists within a timed component, don't render it here\n            try {\n                window.componentMap[element.id] = new DragNDrop(opts);\n            } catch (err) {\n                console.log(\n                    `Error rendering DragNDrop Problem ${element.id}: ${err}`\n                );\n            }\n        }\n    });\n});\n","\"use strict\";\n\nimport DragNDrop from \"./dragndrop.js\";\n\nexport default class TimedDragNDrop extends DragNDrop {\n    constructor(opts) {\n        super(opts);\n        this.finishSettingUp();\n        this.renderTimedIcon(this.containerDiv);\n        this.hideButtons();\n    }\n    hideButtons() {\n        $(this.submitButton).hide();\n    }\n    renderTimedIcon(component) {\n        // renders the clock icon on timed components.    The component parameter\n        // is the element that the icon should be appended to.\n        var timeIconDiv = document.createElement(\"div\");\n        var timeIcon = document.createElement(\"img\");\n        $(timeIcon).attr({\n            src: \"../_static/clock.png\",\n            style: \"width:15px;height:15px\",\n        });\n        timeIconDiv.className = \"timeTip\";\n        timeIconDiv.title = \"\";\n        timeIconDiv.appendChild(timeIcon);\n        $(component).prepend(timeIconDiv);\n    }\n    checkCorrectTimed() {\n        // Returns if the question was correct.    Used for timed assessment grading.\n        if (this.unansweredNum === this.dragPairArray.length) {\n            this.correct = null;\n        }\n        switch (this.correct) {\n            case true:\n                return \"T\";\n            case false:\n                return \"F\";\n            default:\n                return null;\n        }\n    }\n    hideFeedback() {\n        $(this.feedBackDiv).hide();\n    }\n}\n\nif (typeof window.component_factory === \"undefined\") {\n    window.component_factory = {};\n}\nwindow.component_factory[\"dragndrop\"] = function (opts) {\n    if (opts.timed) {\n        return new TimedDragNDrop(opts);\n    }\n    return new DragNDrop(opts);\n};\n","$.i18n().load({\n    \"pt-br\": {\n        msg_dragndrop_correct_answer: \"Correto!\",\n        msg_dragndrop_incorrect_answer:\n            \"Incorreto. Você teve $1 correto(s) e $2 incorreto(s) de $3. Você deixou $4 em branco.\",\n        msg_dragndrop_check_me: \"Verificar\",\n        msg_dragndrop_reset: \"Resetar\",\n    },\n});\n"],"names":["$","i18n","load","en","msg_dragndrop_correct_answer","msg_dragndrop_incorrect_answer","msg_dragndrop_check_me","msg_dragndrop_reset","DragNDrop","constructor","opts","super","orig","this","origElem","divid","id","useRunestoneServices","random","dataset","feedback","question","populate","createNewElements","caption","addCaption","Prism","highlightAllUnder","containerDiv","responseArray","premiseArray","invisibleErrorDiv","document","createElement","classList","add","body","appendChild","element","querySelectorAll","replaceSpan","innerHTML","setAttribute","tabIndex","category","getCategory","parent_id","push","setDragListeners","errorMessage","shuffleArray","getAttribute","replace","setDropListeners","querySelector","elem","hasAttribute","statementDiv","dragDropWrapDiv","style","display","draggableDiv","addDragDivListeners","dropZoneDiv","createButtons","checkServer","eBookConfig","practice_mode","finishSettingUp","self","ivp","isValidPremise","bind","queueMathJax","appendReplacementSpans","createFeedbackDiv","parentNode","replaceChild","hasStoredDropzones","minheight","offsetHeight","then","adjustDragDropWidths","minHeight","toString","width","dragwidth","dropwidth","addEventListener","ev","preventDefault","contains","isAnswered","remove","data","dataTransfer","getData","draggedSpan","getElementById","strangerDanger","e","buttonDiv","submitButton","textContent","onclick","checkCurrentAnswer","renderFeedback","logCurrentAnswer","resetButton","resetDraggables","undefined","answerState","Object","keys","length","placedPremises","response","premise","foundPremise","findPremise","console","warn","indexOf","countSavedPremises","count","names","dgSpan","setData","target","key","selectedPremise","dpSpan","includes","dragzoneWidth","offsetWidth","totalWidth","dragzonePercent","Math","ceil","max","min","dropzonePercent","feedBackDiv","testSpan","visibility","getAllCategories","categories","childNodes","correct","unansweredNum","incorrectNum","correctNum","dragNum","Array","from","filter","node","nodeType","Node","TEXT_NODE","percent","log","setLocalStorage","isCorrectDrop","correctPlacements","catCount","premis","sid","answer","JSON","stringify","event","act","min_height","round","drag_width","drop_width","div_id","logBookEvent","removeAttribute","msgCorrect","setTimeout","className","msgIncorrect","restoreAnswers","parse","checkLocalStorage","graderactive","storedObj","localStorage","ex","getItem","localStorageKey","err","message","removeItem","timeStamp","Date","storageObj","timestamp","setItem","disableInteraction","i","draggable","cursor","array","j","floor","forEach","closest","window","componentMap","TimedDragNDrop","renderTimedIcon","hideButtons","hide","component","timeIconDiv","timeIcon","attr","src","title","prepend","checkCorrectTimed","dragPairArray","hideFeedback","component_factory","timed"],"sourceRoot":""}