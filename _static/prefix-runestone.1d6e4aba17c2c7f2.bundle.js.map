{"version":3,"file":"prefix-runestone.1d6e4aba17c2c7f2.bundle.js","mappings":"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","sources":["webpack://WebComponents/./runestone/common/project_template/_templates/plugin_layouts/sphinx_bootstrap/static/bootstrap-sphinx.js","webpack://WebComponents/./runestone/common/js/presenter_mode.js","webpack://WebComponents/./runestone/common/js/jquery_i18n/jquery.i18n.fallbacks.js","webpack://WebComponents/./runestone/common/js/jquery_i18n/jquery.i18n.language.js","webpack://WebComponents/./runestone/common/js/jquery_i18n/jquery.i18n.emitter.bidi.js","webpack://WebComponents/external var \"jQuery\"","webpack://WebComponents/./runestone/common/js/jquery_i18n/jquery.i18n.emitter.js","webpack://WebComponents/./runestone/common/js/jquery_i18n/jquery.i18n.parser.js","webpack://WebComponents/./runestone/common/js/jquery_i18n/jquery.i18n.messagestore.js","webpack://WebComponents/./runestone/common/js/jquery_i18n/jquery.i18n.js","webpack://WebComponents/./runestone/common/js/jquery.idle-timer.js","webpack://WebComponents/./runestone/common/js/user-highlights.js","webpack://WebComponents/./runestone/common/js/pretext.js","webpack://WebComponents/./runestone/splice/js/spliceWrapper.js","webpack://WebComponents/./webpack.index.js","webpack://WebComponents/./runestone/common/js/theme.js","webpack://WebComponents/./runestone/common/js/runestonebase.js","webpack://WebComponents/./runestone/common/js/bookfuncs.js","webpack://WebComponents/./runestone/common/js/renderComponent.js"],"sourcesContent":["(function ($) {\n  /**\n   * Patch TOC list.\n   *\n   * Will mutate the underlying span to have a correct ul for nav.\n   *\n   * @param $span: Span containing nested UL's to mutate.\n   * @param minLevel: Starting level for nested lists. (1: global, 2: local).\n   */\n  var patchToc = function ($ul, minLevel) {\n    var findA,\n      patchTables,\n      $localLi;\n\n    // Find all a \"internal\" tags, traversing recursively.\n    findA = function ($elem, level) {\n      level = level || 0;\n      var $items = $elem.find(\"> li > a.internal, > ul, > li > ul\");\n\n      // Iterate everything in order.\n      $items.each(function (index, item) {\n        var $item = $(item),\n          tag = item.tagName.toLowerCase(),\n          $childrenLi = $item.children('li'),\n          $parentLi = $($item.parent('li'), $item.parent().parent('li'));\n\n        // Add dropdowns if more children and above minimum level.\n        if (tag === 'ul' && level >= minLevel && $childrenLi.length > 0) {\n          $parentLi\n            .addClass('dropdown-submenu')\n            .children('a').first().attr('tabindex', -1);\n\n          $item.addClass('dropdown-menu');\n        }\n\n        findA($item, level + 1);\n      });\n    };\n\n    findA($ul);\n  };\n\n  /**\n   * Patch all tables to remove ``docutils`` class and add Bootstrap base\n   * ``table`` class.\n   */\n  patchTables = function () {\n    $(\"table.docutils\")\n      .removeClass(\"docutils\")\n      .addClass(\"table\")\n      .attr(\"border\", 0);\n  };\n\n$(function () {\n\n    /*\n     * Scroll the window to avoid the topnav bar\n     * https://github.com/twitter/bootstrap/issues/1768\n     */\n    if ($(\"#navbar.navbar-fixed-top\").length > 0) {\n      var navHeight = $(\"#navbar\").height(),\n        shiftWindow = function() { scrollBy(0, -navHeight - 10); };\n\n      if (location.hash) {\n        shiftWindow();\n      }\n\n      window.addEventListener(\"hashchange\", shiftWindow);\n    }\n\n    // Add styling, structure to TOC's.\n    $(\".dropdown-menu\").each(function () {\n      $(this).find(\"ul\").each(function (index, item){\n        var $item = $(item);\n        $item.addClass('unstyled');\n      });\n    });\n\n    // Global TOC.\n    if ($(\"ul.globaltoc li\").length) {\n      patchToc($(\"ul.globaltoc\"), 1);\n    } else {\n      // Remove Global TOC.\n      $(\".globaltoc-container\").remove();\n    }\n\n    // Local TOC.\n    patchToc($(\"ul.localtoc\"), 2);\n\n    // Mutate sub-lists (for bs-2.3.0).\n    $(\".dropdown-menu ul\").not(\".dropdown-menu\").each(function () {\n      var $ul = $(this),\n        $parent = $ul.parent(),\n        tag = $parent[0].tagName.toLowerCase(),\n        $kids = $ul.children().detach();\n\n      // Replace list with items if submenu header.\n      if (tag === \"ul\") {\n        $ul.replaceWith($kids);\n      } else if (tag === \"li\") {\n        // Insert into previous list.\n        $parent.after($kids);\n        $ul.remove();\n      }\n    });\n\n    // Add divider in page TOC.\n    $localLi = $(\"ul.localtoc li\");\n    if ($localLi.length > 2) {\n      $localLi.first().after('<li class=\"divider\"></li>');\n    }\n\n    // Enable dropdown.\n    $('.dropdown-toggle').dropdown();\n\n    // Patch tables.\n    patchTables();\n\n    // Add Note, Warning styles.\n    $('div.note').addClass('alert').addClass('alert-info');\n    $('div.warning').addClass('alert').addClass('alert-warning');\n\n    // Inline code styles to Bootstrap style.\n    $('tt.docutils.literal').not(\".xref\").each(function (i, e) {\n      // ignore references\n      if (!$(e).parent().hasClass(\"reference\")) {\n        $(e).replaceWith(function () {\n          return $(\"<code />\").text($(this).text());\n        });\n      }});\n  });\n}(window.jQuery));\n","var codeExercises;\nvar presenterCssLink;\nvar presentModeInitialized = false;\n\nfunction presentToggle() {\n    if (!presentModeInitialized) {\n        presentModeSetup();\n        presentModeInitialized = true;\n    }\n    let bod = $(\"body\");\n    let presentClass = \"present\";\n    let fullHeightClass = \"full-height\";\n    let bottomClass = \"bottom\";\n    if (bod.hasClass(presentClass)) {\n        $(\"section *\")\n            .not(\n                \"h1, .presentation-title, .btn-presenter, .runestone, .runestone *, section, .pre, code\"\n            )\n            .removeClass(\"hidden\"); //show everything\n        $(\"#completionButton\").removeClass(\"hidden\");\n        bod.removeClass(presentClass);\n        $(\".\" + fullHeightClass).removeClass(fullHeightClass);\n        $(\".\" + bottomClass).removeClass(bottomClass);\n        localStorage.setItem(\"presentMode\", \"text\");\n        codeExercises.removeClass(\"hidden\");\n        presenterCssLink.disabled = true; // disable present_mode.css\n    } else {\n        $(\"section *\")\n            .not(\n                \"h1, .presentation-title, .btn-presenter, .runestone, .runestone *, section, .pre, code\"\n            )\n            .addClass(\"hidden\"); // hide extraneous stuff\n        $(\"#completionButton\").addClass(\"hidden\");\n        bod.addClass(presentClass);\n        bod.addClass(fullHeightClass);\n        $(\"html\").addClass(fullHeightClass);\n        $(\"section .runestone\").addClass(fullHeightClass);\n        $(\".ac-caption\").addClass(bottomClass);\n        localStorage.setItem(\"presentMode\", presentClass);\n        // presenter_mode.css is loaded by webpack\n        //loadPresenterCss(); // present_mode.css should only apply when in presenter mode.\n        activateExercise();\n    }\n}\n\nfunction loadPresenterCss() {\n    presenterCssLink = document.createElement(\"link\");\n    presenterCssLink.type = \"text/css\";\n    presenterCssLink.href = \"../_static/presenter_mode.less\";\n    presenterCssLink.rel = \"stylesheet\";\n    document.getElementsByTagName(\"head\")[0].appendChild(presenterCssLink);\n}\n\nfunction presentModeSetup() {\n    // moved this out of configure\n    let dataComponent = $(\"[data-childcomponent]\");\n\n    // this still leaves some things semi-messed up when you exit presenter mode.\n    // but instructors will probably just learn to refresh the page.\n    dataComponent.addClass(\"runestone\");\n    dataComponent.parent().closest(\"div\").not(\"section\").addClass(\"runestone\");\n    dataComponent.parent().closest(\"div\").css(\"max-width\", \"none\");\n\n    dataComponent.each(function (index) {\n        let me = $(this);\n        $(this)\n            .find(\".ac_code_div, .ac_output\")\n            .wrapAll(\"<div class='ac-block' style='width: 100%;'></div>\");\n    });\n\n    codelensListener(500);\n    $(\"section img\").wrap('<div class=\"runestone\">');\n    codeExercises = $(\".runestone\").not(\".runestone .runestone\");\n    // codeExercises.each(function(){\n    $(\"h1\").before(\n        \"<div class='presentation-title'> \\\n        <button class='prev-exercise btn-presenter btn-grey-outline' onclick='prevExercise()'>Back</button> \\\n        <button class='next-exercise btn-presenter btn-grey-solid' onclick='nextExercise()'>Next</button> \\\n      </div>\"\n    );\n}\nfunction getActiveExercise() {\n    return (active = codeExercises.filter(\".active\"));\n}\n\nfunction activateExercise(index) {\n    if (typeof index == \"undefined\") {\n        index = 0;\n    }\n\n    let active = getActiveExercise();\n\n    if (codeExercises.length) {\n        active.removeClass(\"active\");\n        active = $(codeExercises[index]).addClass(\"active\");\n        active.removeClass(\"hidden\");\n        codeExercises.not(codeExercises.filter(\".active\")).addClass(\"hidden\");\n    }\n}\n\nwindow.nextExercise = function() {\n    let active = getActiveExercise();\n    let nextIndex = codeExercises.index(active) + 1;\n    if (nextIndex < codeExercises.length) {\n        activateExercise(nextIndex);\n    }\n}\n\nwindow.prevExercise = function() {\n    let active = getActiveExercise();\n    let prevIndex = codeExercises.index(active) - 1;\n    if (prevIndex >= 0) {\n        activateExercise(prevIndex);\n    }\n}\n\nfunction configure() {\n    let rightNav = $(\".navbar-right\");\n    rightNav.prepend(\n        \"<li class='dropdown view-toggle'> \\\n      <label>View: \\\n        <select class='mode-select'> \\\n          <option value='text'>Textbook</option> \\\n          <option value='present'>Code Presenter</option> \\\n        </select> \\\n      </label> \\\n    </li>\"\n    );\n\n    let modeSelect = $(\".mode-select\").change(presentToggle);\n}\n\nfunction codelensListener(duration) {\n    // $(\".ExecutionVisualizer\").length ? configureCodelens() : setTimeout(codelensListener, duration);\n    // configureCodelens();\n}\n\nfunction configureCodelens() {\n    let acCodeTitle = document.createElement(\"h4\");\n    acCodeTitle.textContent = \"Active Code Window\";\n    let acCode = $(\".ac_code_div\");\n    $(\".ac_code_div\").addClass(\"col-md-6\");\n    acCode.prepend(acCodeTitle);\n\n    acOutTitle = document.createElement(\"h4\");\n    acOutTitle.textContent = \"Output Window\";\n    let acOut = $(\".ac_output\").addClass(\"col-md-6\");\n    $(\".ac_output\").prepend(acOutTitle);\n\n    let sketchpadTitle = document.createElement(\"h4\");\n    sketchpadTitle.textContent = \"Sketchpad\";\n    let sketchpad = document.createElement(\"span\");\n    $(sketchpad).addClass(\"sketchpad\");\n    let sketchpadContainer = document.createElement(\"div\");\n    $(sketchpadContainer).addClass(\"sketchpad-container\");\n    sketchpadContainer.appendChild(sketchpadTitle);\n    sketchpadContainer.appendChild(sketchpad);\n    //$('.ac_output').append(sketchpadContainer);\n\n    let visualizers = $(\".ExecutionVisualizer\");\n\n    console.log(\"Econtainer: \", this.eContainer);\n\n    $(\"[data-childcomponent]\").on(\"click\", \"button.row-mode\", function () {\n        $(this).closest(\"[data-childcomponent]\").removeClass(\"card-mode\");\n        $(this).closest(\"[data-childcomponent]\").addClass(\"row-mode\");\n        $(this).next(\".card-mode\").removeClass(\"active-layout\");\n        $(this).addClass(\"active-layout\");\n    });\n\n    $(\"[data-childcomponent]\").on(\"click\", \"button.card-mode\", function () {\n        $(this).closest(\"[data-childcomponent]\").removeClass(\"row-mode\");\n        $(this).closest(\"[data-childcomponent]\").addClass(\"card-mode\");\n        $(this).prev(\".row-mode\").removeClass(\"active-layout\");\n        $(this).addClass(\"active-layout\");\n    });\n\n    $(\"[data-childcomponent] .ac_section\").each(function () {\n        $(this).prepend(\n            '<div class=\"presentation-options\"><button class=\"row-mode layout-btn\"><img src=\"../_images/row-btn-content.png\" alt=\"Rows\"></button><button class=\"card-mode layout-btn\"><img src=\"../_images/card-btn-content.png\" alt=\"Card\"></button></div>'\n        );\n    });\n\n    visualizers.each(function (index) {\n        let me = $(this);\n        let col1 = me.find(\"#vizLayoutTdFirst\");\n        let col2 = me.find(\"#vizLayoutTdSecond\");\n        let dataVis = me.find(\"#dataViz\");\n        let stackHeapTable = me.find(\"#stackHeapTable\");\n        let output = me.find(\"#progOutputs\");\n        output.css(\"display\", \"block\");\n        me.parent().prepend(\n            \"<div class='presentation-title'><div class='title-text'> Example \" +\n                (Number(index) + 1) +\n                \"</div></div>\"\n        );\n    });\n\n    acCode.each(function () {\n        let section = $(this).closest(\".ac-block\").parent();\n        console.log(section, section.length);\n        section.append(sketchpadContainer);\n    });\n\n    $(\"button.card-mode\").click();\n\n    let modeSelect = $(\".mode-select\");\n    let mode = localStorage.getItem(\"presentMode\");\n    if (mode == \"present\") {\n        modeSelect.val(\"present\");\n        modeSelect.change();\n    }\n}\n\n$(document).on(\"runestone:login-complete\", function () {\n    // if user is instructor, enable presenter mode\n    if (eBookConfig.isInstructor) {\n        configure();\n    }\n});\n","/*!\n * jQuery Internationalization library\n *\n * Copyright (C) 2012 Santhosh Thottingal\n *\n * jquery.i18n is dual licensed GPLv2 or later and MIT. You don't have to do anything special to\n * choose one license or the other and you don't have to notify anyone which license you are using.\n * You are free to use UniversalLanguageSelector in commercial projects as long as the copyright\n * header is left intact. See files GPL-LICENSE and MIT-LICENSE for details.\n *\n * @licence GNU General Public Licence 2.0 or later\n * @licence MIT License\n */\n( function ( $ ) {\n\t'use strict';\n\n\t$.i18n = $.i18n || {};\n\t$.extend( $.i18n.fallbacks, {\n\t\tab: [ 'ru' ],\n\t\tace: [ 'id' ],\n\t\taln: [ 'sq' ],\n\t\t// Not so standard - als is supposed to be Tosk Albanian,\n\t\t// but in Wikipedia it's used for a Germanic language.\n\t\tals: [ 'gsw', 'de' ],\n\t\tan: [ 'es' ],\n\t\tanp: [ 'hi' ],\n\t\tarn: [ 'es' ],\n\t\tarz: [ 'ar' ],\n\t\tav: [ 'ru' ],\n\t\tay: [ 'es' ],\n\t\tba: [ 'ru' ],\n\t\tbar: [ 'de' ],\n\t\t'bat-smg': [ 'sgs', 'lt' ],\n\t\tbcc: [ 'fa' ],\n\t\t'be-x-old': [ 'be-tarask' ],\n\t\tbh: [ 'bho' ],\n\t\tbjn: [ 'id' ],\n\t\tbm: [ 'fr' ],\n\t\tbpy: [ 'bn' ],\n\t\tbqi: [ 'fa' ],\n\t\tbug: [ 'id' ],\n\t\t'cbk-zam': [ 'es' ],\n\t\tce: [ 'ru' ],\n\t\tcrh: [ 'crh-latn' ],\n\t\t'crh-cyrl': [ 'ru' ],\n\t\tcsb: [ 'pl' ],\n\t\tcv: [ 'ru' ],\n\t\t'de-at': [ 'de' ],\n\t\t'de-ch': [ 'de' ],\n\t\t'de-formal': [ 'de' ],\n\t\tdsb: [ 'de' ],\n\t\tdtp: [ 'ms' ],\n\t\tegl: [ 'it' ],\n\t\teml: [ 'it' ],\n\t\tff: [ 'fr' ],\n\t\tfit: [ 'fi' ],\n\t\t'fiu-vro': [ 'vro', 'et' ],\n\t\tfrc: [ 'fr' ],\n\t\tfrp: [ 'fr' ],\n\t\tfrr: [ 'de' ],\n\t\tfur: [ 'it' ],\n\t\tgag: [ 'tr' ],\n\t\tgan: [ 'gan-hant', 'zh-hant', 'zh-hans' ],\n\t\t'gan-hans': [ 'zh-hans' ],\n\t\t'gan-hant': [ 'zh-hant', 'zh-hans' ],\n\t\tgl: [ 'pt' ],\n\t\tglk: [ 'fa' ],\n\t\tgn: [ 'es' ],\n\t\tgsw: [ 'de' ],\n\t\thif: [ 'hif-latn' ],\n\t\thsb: [ 'de' ],\n\t\tht: [ 'fr' ],\n\t\tii: [ 'zh-cn', 'zh-hans' ],\n\t\tinh: [ 'ru' ],\n\t\tiu: [ 'ike-cans' ],\n\t\tjut: [ 'da' ],\n\t\tjv: [ 'id' ],\n\t\tkaa: [ 'kk-latn', 'kk-cyrl' ],\n\t\tkbd: [ 'kbd-cyrl' ],\n\t\tkhw: [ 'ur' ],\n\t\tkiu: [ 'tr' ],\n\t\tkk: [ 'kk-cyrl' ],\n\t\t'kk-arab': [ 'kk-cyrl' ],\n\t\t'kk-latn': [ 'kk-cyrl' ],\n\t\t'kk-cn': [ 'kk-arab', 'kk-cyrl' ],\n\t\t'kk-kz': [ 'kk-cyrl' ],\n\t\t'kk-tr': [ 'kk-latn', 'kk-cyrl' ],\n\t\tkl: [ 'da' ],\n\t\t'ko-kp': [ 'ko' ],\n\t\tkoi: [ 'ru' ],\n\t\tkrc: [ 'ru' ],\n\t\tks: [ 'ks-arab' ],\n\t\tksh: [ 'de' ],\n\t\tku: [ 'ku-latn' ],\n\t\t'ku-arab': [ 'ckb' ],\n\t\tkv: [ 'ru' ],\n\t\tlad: [ 'es' ],\n\t\tlb: [ 'de' ],\n\t\tlbe: [ 'ru' ],\n\t\tlez: [ 'ru' ],\n\t\tli: [ 'nl' ],\n\t\tlij: [ 'it' ],\n\t\tliv: [ 'et' ],\n\t\tlmo: [ 'it' ],\n\t\tln: [ 'fr' ],\n\t\tltg: [ 'lv' ],\n\t\tlzz: [ 'tr' ],\n\t\tmai: [ 'hi' ],\n\t\t'map-bms': [ 'jv', 'id' ],\n\t\tmg: [ 'fr' ],\n\t\tmhr: [ 'ru' ],\n\t\tmin: [ 'id' ],\n\t\tmo: [ 'ro' ],\n\t\tmrj: [ 'ru' ],\n\t\tmwl: [ 'pt' ],\n\t\tmyv: [ 'ru' ],\n\t\tmzn: [ 'fa' ],\n\t\tnah: [ 'es' ],\n\t\tnap: [ 'it' ],\n\t\tnds: [ 'de' ],\n\t\t'nds-nl': [ 'nl' ],\n\t\t'nl-informal': [ 'nl' ],\n\t\tno: [ 'nb' ],\n\t\tos: [ 'ru' ],\n\t\tpcd: [ 'fr' ],\n\t\tpdc: [ 'de' ],\n\t\tpdt: [ 'de' ],\n\t\tpfl: [ 'de' ],\n\t\tpms: [ 'it' ],\n\t\tpt: [ 'pt-br' ],\n\t\t'pt-br': [ 'pt' ],\n\t\tqu: [ 'es' ],\n\t\tqug: [ 'qu', 'es' ],\n\t\trgn: [ 'it' ],\n\t\trmy: [ 'ro' ],\n\t\t'roa-rup': [ 'rup' ],\n\t\true: [ 'uk', 'ru' ],\n\t\truq: [ 'ruq-latn', 'ro' ],\n\t\t'ruq-cyrl': [ 'mk' ],\n\t\t'ruq-latn': [ 'ro' ],\n\t\tsa: [ 'hi' ],\n\t\tsah: [ 'ru' ],\n\t\tscn: [ 'it' ],\n\t\tsg: [ 'fr' ],\n\t\tsgs: [ 'lt' ],\n\t\tsli: [ 'de' ],\n\t\tsr: [ 'sr-ec' ],\n\t\tsrn: [ 'nl' ],\n\t\tstq: [ 'de' ],\n\t\tsu: [ 'id' ],\n\t\tszl: [ 'pl' ],\n\t\ttcy: [ 'kn' ],\n\t\ttg: [ 'tg-cyrl' ],\n\t\ttt: [ 'tt-cyrl', 'ru' ],\n\t\t'tt-cyrl': [ 'ru' ],\n\t\tty: [ 'fr' ],\n\t\tudm: [ 'ru' ],\n\t\tug: [ 'ug-arab' ],\n\t\tuk: [ 'ru' ],\n\t\tvec: [ 'it' ],\n\t\tvep: [ 'et' ],\n\t\tvls: [ 'nl' ],\n\t\tvmf: [ 'de' ],\n\t\tvot: [ 'fi' ],\n\t\tvro: [ 'et' ],\n\t\twa: [ 'fr' ],\n\t\two: [ 'fr' ],\n\t\twuu: [ 'zh-hans' ],\n\t\txal: [ 'ru' ],\n\t\txmf: [ 'ka' ],\n\t\tyi: [ 'he' ],\n\t\tza: [ 'zh-hans' ],\n\t\tzea: [ 'nl' ],\n\t\tzh: [ 'zh-hans' ],\n\t\t'zh-classical': [ 'lzh' ],\n\t\t'zh-cn': [ 'zh-hans' ],\n\t\t'zh-hant': [ 'zh-hans' ],\n\t\t'zh-hk': [ 'zh-hant', 'zh-hans' ],\n\t\t'zh-min-nan': [ 'nan' ],\n\t\t'zh-mo': [ 'zh-hk', 'zh-hant', 'zh-hans' ],\n\t\t'zh-my': [ 'zh-sg', 'zh-hans' ],\n\t\t'zh-sg': [ 'zh-hans' ],\n\t\t'zh-tw': [ 'zh-hant', 'zh-hans' ],\n\t\t'zh-yue': [ 'yue' ]\n\t} );\n}( jQuery ) );\n","/* global pluralRuleParser */\n( function ( $ ) {\n\t'use strict';\n\n\t// jscs:disable\n\tvar language = {\n\t\t// CLDR plural rules generated using\n\t\t// libs/CLDRPluralRuleParser/tools/PluralXML2JSON.html\n\t\tpluralRules: {\n\t\t\tak: {\n\t\t\t\tone: 'n = 0..1'\n\t\t\t},\n\t\t\tam: {\n\t\t\t\tone: 'i = 0 or n = 1'\n\t\t\t},\n\t\t\tar: {\n\t\t\t\tzero: 'n = 0',\n\t\t\t\tone: 'n = 1',\n\t\t\t\ttwo: 'n = 2',\n\t\t\t\tfew: 'n % 100 = 3..10',\n\t\t\t\tmany: 'n % 100 = 11..99'\n\t\t\t},\n\t\t\tars: {\n\t\t\t\tzero: 'n = 0',\n\t\t\t\tone: 'n = 1',\n\t\t\t\ttwo: 'n = 2',\n\t\t\t\tfew: 'n % 100 = 3..10',\n\t\t\t\tmany: 'n % 100 = 11..99'\n\t\t\t},\n\t\t\tas: {\n\t\t\t\tone: 'i = 0 or n = 1'\n\t\t\t},\n\t\t\tbe: {\n\t\t\t\tone: 'n % 10 = 1 and n % 100 != 11',\n\t\t\t\tfew: 'n % 10 = 2..4 and n % 100 != 12..14',\n\t\t\t\tmany: 'n % 10 = 0 or n % 10 = 5..9 or n % 100 = 11..14'\n\t\t\t},\n\t\t\tbh: {\n\t\t\t\tone: 'n = 0..1'\n\t\t\t},\n\t\t\tbn: {\n\t\t\t\tone: 'i = 0 or n = 1'\n\t\t\t},\n\t\t\tbr: {\n\t\t\t\tone: 'n % 10 = 1 and n % 100 != 11,71,91',\n\t\t\t\ttwo: 'n % 10 = 2 and n % 100 != 12,72,92',\n\t\t\t\tfew: 'n % 10 = 3..4,9 and n % 100 != 10..19,70..79,90..99',\n\t\t\t\tmany: 'n != 0 and n % 1000000 = 0'\n\t\t\t},\n\t\t\tbs: {\n\t\t\t\tone: 'v = 0 and i % 10 = 1 and i % 100 != 11 or f % 10 = 1 and f % 100 != 11',\n\t\t\t\tfew: 'v = 0 and i % 10 = 2..4 and i % 100 != 12..14 or f % 10 = 2..4 and f % 100 != 12..14'\n\t\t\t},\n\t\t\tcs: {\n\t\t\t\tone: 'i = 1 and v = 0',\n\t\t\t\tfew: 'i = 2..4 and v = 0',\n\t\t\t\tmany: 'v != 0'\n\t\t\t},\n\t\t\tcy: {\n\t\t\t\tzero: 'n = 0',\n\t\t\t\tone: 'n = 1',\n\t\t\t\ttwo: 'n = 2',\n\t\t\t\tfew: 'n = 3',\n\t\t\t\tmany: 'n = 6'\n\t\t\t},\n\t\t\tda: {\n\t\t\t\tone: 'n = 1 or t != 0 and i = 0,1'\n\t\t\t},\n\t\t\tdsb: {\n\t\t\t\tone: 'v = 0 and i % 100 = 1 or f % 100 = 1',\n\t\t\t\ttwo: 'v = 0 and i % 100 = 2 or f % 100 = 2',\n\t\t\t\tfew: 'v = 0 and i % 100 = 3..4 or f % 100 = 3..4'\n\t\t\t},\n\t\t\tfa: {\n\t\t\t\tone: 'i = 0 or n = 1'\n\t\t\t},\n\t\t\tff: {\n\t\t\t\tone: 'i = 0,1'\n\t\t\t},\n\t\t\tfil: {\n\t\t\t\tone: 'v = 0 and i = 1,2,3 or v = 0 and i % 10 != 4,6,9 or v != 0 and f % 10 != 4,6,9'\n\t\t\t},\n\t\t\tfr: {\n\t\t\t\tone: 'i = 0,1'\n\t\t\t},\n\t\t\tga: {\n\t\t\t\tone: 'n = 1',\n\t\t\t\ttwo: 'n = 2',\n\t\t\t\tfew: 'n = 3..6',\n\t\t\t\tmany: 'n = 7..10'\n\t\t\t},\n\t\t\tgd: {\n\t\t\t\tone: 'n = 1,11',\n\t\t\t\ttwo: 'n = 2,12',\n\t\t\t\tfew: 'n = 3..10,13..19'\n\t\t\t},\n\t\t\tgu: {\n\t\t\t\tone: 'i = 0 or n = 1'\n\t\t\t},\n\t\t\tguw: {\n\t\t\t\tone: 'n = 0..1'\n\t\t\t},\n\t\t\tgv: {\n\t\t\t\tone: 'v = 0 and i % 10 = 1',\n\t\t\t\ttwo: 'v = 0 and i % 10 = 2',\n\t\t\t\tfew: 'v = 0 and i % 100 = 0,20,40,60,80',\n\t\t\t\tmany: 'v != 0'\n\t\t\t},\n\t\t\the: {\n\t\t\t\tone: 'i = 1 and v = 0',\n\t\t\t\ttwo: 'i = 2 and v = 0',\n\t\t\t\tmany: 'v = 0 and n != 0..10 and n % 10 = 0'\n\t\t\t},\n\t\t\thi: {\n\t\t\t\tone: 'i = 0 or n = 1'\n\t\t\t},\n\t\t\thr: {\n\t\t\t\tone: 'v = 0 and i % 10 = 1 and i % 100 != 11 or f % 10 = 1 and f % 100 != 11',\n\t\t\t\tfew: 'v = 0 and i % 10 = 2..4 and i % 100 != 12..14 or f % 10 = 2..4 and f % 100 != 12..14'\n\t\t\t},\n\t\t\thsb: {\n\t\t\t\tone: 'v = 0 and i % 100 = 1 or f % 100 = 1',\n\t\t\t\ttwo: 'v = 0 and i % 100 = 2 or f % 100 = 2',\n\t\t\t\tfew: 'v = 0 and i % 100 = 3..4 or f % 100 = 3..4'\n\t\t\t},\n\t\t\thy: {\n\t\t\t\tone: 'i = 0,1'\n\t\t\t},\n\t\t\tis: {\n\t\t\t\tone: 't = 0 and i % 10 = 1 and i % 100 != 11 or t != 0'\n\t\t\t},\n\t\t\tiu: {\n\t\t\t\tone: 'n = 1',\n\t\t\t\ttwo: 'n = 2'\n\t\t\t},\n\t\t\tiw: {\n\t\t\t\tone: 'i = 1 and v = 0',\n\t\t\t\ttwo: 'i = 2 and v = 0',\n\t\t\t\tmany: 'v = 0 and n != 0..10 and n % 10 = 0'\n\t\t\t},\n\t\t\tkab: {\n\t\t\t\tone: 'i = 0,1'\n\t\t\t},\n\t\t\tkn: {\n\t\t\t\tone: 'i = 0 or n = 1'\n\t\t\t},\n\t\t\tkw: {\n\t\t\t\tone: 'n = 1',\n\t\t\t\ttwo: 'n = 2'\n\t\t\t},\n\t\t\tlag: {\n\t\t\t\tzero: 'n = 0',\n\t\t\t\tone: 'i = 0,1 and n != 0'\n\t\t\t},\n\t\t\tln: {\n\t\t\t\tone: 'n = 0..1'\n\t\t\t},\n\t\t\tlt: {\n\t\t\t\tone: 'n % 10 = 1 and n % 100 != 11..19',\n\t\t\t\tfew: 'n % 10 = 2..9 and n % 100 != 11..19',\n\t\t\t\tmany: 'f != 0'\n\t\t\t},\n\t\t\tlv: {\n\t\t\t\tzero: 'n % 10 = 0 or n % 100 = 11..19 or v = 2 and f % 100 = 11..19',\n\t\t\t\tone: 'n % 10 = 1 and n % 100 != 11 or v = 2 and f % 10 = 1 and f % 100 != 11 or v != 2 and f % 10 = 1'\n\t\t\t},\n\t\t\tmg: {\n\t\t\t\tone: 'n = 0..1'\n\t\t\t},\n\t\t\tmk: {\n\t\t\t\tone: 'v = 0 and i % 10 = 1 or f % 10 = 1'\n\t\t\t},\n\t\t\tmo: {\n\t\t\t\tone: 'i = 1 and v = 0',\n\t\t\t\tfew: 'v != 0 or n = 0 or n != 1 and n % 100 = 1..19'\n\t\t\t},\n\t\t\tmr: {\n\t\t\t\tone: 'i = 0 or n = 1'\n\t\t\t},\n\t\t\tmt: {\n\t\t\t\tone: 'n = 1',\n\t\t\t\tfew: 'n = 0 or n % 100 = 2..10',\n\t\t\t\tmany: 'n % 100 = 11..19'\n\t\t\t},\n\t\t\tnaq: {\n\t\t\t\tone: 'n = 1',\n\t\t\t\ttwo: 'n = 2'\n\t\t\t},\n\t\t\tnso: {\n\t\t\t\tone: 'n = 0..1'\n\t\t\t},\n\t\t\tpa: {\n\t\t\t\tone: 'n = 0..1'\n\t\t\t},\n\t\t\tpl: {\n\t\t\t\tone: 'i = 1 and v = 0',\n\t\t\t\tfew: 'v = 0 and i % 10 = 2..4 and i % 100 != 12..14',\n\t\t\t\tmany: 'v = 0 and i != 1 and i % 10 = 0..1 or v = 0 and i % 10 = 5..9 or v = 0 and i % 100 = 12..14'\n\t\t\t},\n\t\t\tprg: {\n\t\t\t\tzero: 'n % 10 = 0 or n % 100 = 11..19 or v = 2 and f % 100 = 11..19',\n\t\t\t\tone: 'n % 10 = 1 and n % 100 != 11 or v = 2 and f % 10 = 1 and f % 100 != 11 or v != 2 and f % 10 = 1'\n\t\t\t},\n\t\t\tpt: {\n\t\t\t\tone: 'i = 0..1'\n\t\t\t},\n\t\t\tro: {\n\t\t\t\tone: 'i = 1 and v = 0',\n\t\t\t\tfew: 'v != 0 or n = 0 or n != 1 and n % 100 = 1..19'\n\t\t\t},\n\t\t\tru: {\n\t\t\t\tone: 'v = 0 and i % 10 = 1 and i % 100 != 11',\n\t\t\t\tfew: 'v = 0 and i % 10 = 2..4 and i % 100 != 12..14',\n\t\t\t\tmany: 'v = 0 and i % 10 = 0 or v = 0 and i % 10 = 5..9 or v = 0 and i % 100 = 11..14'\n\t\t\t},\n\t\t\tse: {\n\t\t\t\tone: 'n = 1',\n\t\t\t\ttwo: 'n = 2'\n\t\t\t},\n\t\t\tsh: {\n\t\t\t\tone: 'v = 0 and i % 10 = 1 and i % 100 != 11 or f % 10 = 1 and f % 100 != 11',\n\t\t\t\tfew: 'v = 0 and i % 10 = 2..4 and i % 100 != 12..14 or f % 10 = 2..4 and f % 100 != 12..14'\n\t\t\t},\n\t\t\tshi: {\n\t\t\t\tone: 'i = 0 or n = 1',\n\t\t\t\tfew: 'n = 2..10'\n\t\t\t},\n\t\t\tsi: {\n\t\t\t\tone: 'n = 0,1 or i = 0 and f = 1'\n\t\t\t},\n\t\t\tsk: {\n\t\t\t\tone: 'i = 1 and v = 0',\n\t\t\t\tfew: 'i = 2..4 and v = 0',\n\t\t\t\tmany: 'v != 0'\n\t\t\t},\n\t\t\tsl: {\n\t\t\t\tone: 'v = 0 and i % 100 = 1',\n\t\t\t\ttwo: 'v = 0 and i % 100 = 2',\n\t\t\t\tfew: 'v = 0 and i % 100 = 3..4 or v != 0'\n\t\t\t},\n\t\t\tsma: {\n\t\t\t\tone: 'n = 1',\n\t\t\t\ttwo: 'n = 2'\n\t\t\t},\n\t\t\tsmi: {\n\t\t\t\tone: 'n = 1',\n\t\t\t\ttwo: 'n = 2'\n\t\t\t},\n\t\t\tsmj: {\n\t\t\t\tone: 'n = 1',\n\t\t\t\ttwo: 'n = 2'\n\t\t\t},\n\t\t\tsmn: {\n\t\t\t\tone: 'n = 1',\n\t\t\t\ttwo: 'n = 2'\n\t\t\t},\n\t\t\tsms: {\n\t\t\t\tone: 'n = 1',\n\t\t\t\ttwo: 'n = 2'\n\t\t\t},\n\t\t\tsr: {\n\t\t\t\tone: 'v = 0 and i % 10 = 1 and i % 100 != 11 or f % 10 = 1 and f % 100 != 11',\n\t\t\t\tfew: 'v = 0 and i % 10 = 2..4 and i % 100 != 12..14 or f % 10 = 2..4 and f % 100 != 12..14'\n\t\t\t},\n\t\t\tti: {\n\t\t\t\tone: 'n = 0..1'\n\t\t\t},\n\t\t\ttl: {\n\t\t\t\tone: 'v = 0 and i = 1,2,3 or v = 0 and i % 10 != 4,6,9 or v != 0 and f % 10 != 4,6,9'\n\t\t\t},\n\t\t\ttzm: {\n\t\t\t\tone: 'n = 0..1 or n = 11..99'\n\t\t\t},\n\t\t\tuk: {\n\t\t\t\tone: 'v = 0 and i % 10 = 1 and i % 100 != 11',\n\t\t\t\tfew: 'v = 0 and i % 10 = 2..4 and i % 100 != 12..14',\n\t\t\t\tmany: 'v = 0 and i % 10 = 0 or v = 0 and i % 10 = 5..9 or v = 0 and i % 100 = 11..14'\n\t\t\t},\n\t\t\twa: {\n\t\t\t\tone: 'n = 0..1'\n\t\t\t},\n\t\t\tzu: {\n\t\t\t\tone: 'i = 0 or n = 1'\n\t\t\t}\n\t\t},\n\t\t// jscs:enable\n\n\t\t/**\n\t\t * Plural form transformations, needed for some languages.\n\t\t *\n\t\t * @param {integer} count\n\t\t *            Non-localized quantifier\n\t\t * @param {Array} forms\n\t\t *            List of plural forms\n\t\t * @return {string} Correct form for quantifier in this language\n\t\t */\n\t\tconvertPlural: function ( count, forms ) {\n\t\t\tvar pluralRules,\n\t\t\t\tpluralFormIndex,\n\t\t\t\tindex,\n\t\t\t\texplicitPluralPattern = new RegExp( '\\\\d+=', 'i' ),\n\t\t\t\tformCount,\n\t\t\t\tform;\n\n\t\t\tif ( !forms || forms.length === 0 ) {\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\t// Handle for Explicit 0= & 1= values\n\t\t\tfor ( index = 0; index < forms.length; index++ ) {\n\t\t\t\tform = forms[ index ];\n\t\t\t\tif ( explicitPluralPattern.test( form ) ) {\n\t\t\t\t\tformCount = parseInt( form.slice( 0, form.indexOf( '=' ) ), 10 );\n\t\t\t\t\tif ( formCount === count ) {\n\t\t\t\t\t\treturn ( form.slice( form.indexOf( '=' ) + 1 ) );\n\t\t\t\t\t}\n\t\t\t\t\tforms[ index ] = undefined;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tforms = $.map( forms, function ( form ) {\n\t\t\t\tif ( form !== undefined ) {\n\t\t\t\t\treturn form;\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tpluralRules = this.pluralRules[ $.i18n().locale ];\n\n\t\t\tif ( !pluralRules ) {\n\t\t\t\t// default fallback.\n\t\t\t\treturn ( count === 1 ) ? forms[ 0 ] : forms[ 1 ];\n\t\t\t}\n\n\t\t\tpluralFormIndex = this.getPluralForm( count, pluralRules );\n\t\t\tpluralFormIndex = Math.min( pluralFormIndex, forms.length - 1 );\n\n\t\t\treturn forms[ pluralFormIndex ];\n\t\t},\n\n\t\t/**\n\t\t * For the number, get the plural for index\n\t\t *\n\t\t * @param {integer} number\n\t\t * @param {Object} pluralRules\n\t\t * @return {integer} plural form index\n\t\t */\n\t\tgetPluralForm: function ( number, pluralRules ) {\n\t\t\tvar i,\n\t\t\t\tpluralForms = [ 'zero', 'one', 'two', 'few', 'many', 'other' ],\n\t\t\t\tpluralFormIndex = 0;\n\n\t\t\tfor ( i = 0; i < pluralForms.length; i++ ) {\n\t\t\t\tif ( pluralRules[ pluralForms[ i ] ] ) {\n\t\t\t\t\tif ( pluralRuleParser( pluralRules[ pluralForms[ i ] ], number ) ) {\n\t\t\t\t\t\treturn pluralFormIndex;\n\t\t\t\t\t}\n\n\t\t\t\t\tpluralFormIndex++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn pluralFormIndex;\n\t\t},\n\n\t\t/**\n\t\t * Converts a number using digitTransformTable.\n\t\t *\n\t\t * @param {number} num Value to be converted\n\t\t * @param {boolean} integer Convert the return value to an integer\n\t\t * @return {string} The number converted into a String.\n\t\t */\n\t\tconvertNumber: function ( num, integer ) {\n\t\t\tvar tmp, item, i,\n\t\t\t\ttransformTable, numberString, convertedNumber;\n\n\t\t\t// Set the target Transform table:\n\t\t\ttransformTable = this.digitTransformTable( $.i18n().locale );\n\t\t\tnumberString = String( num );\n\t\t\tconvertedNumber = '';\n\n\t\t\tif ( !transformTable ) {\n\t\t\t\treturn num;\n\t\t\t}\n\n\t\t\t// Check if the restore to Latin number flag is set:\n\t\t\tif ( integer ) {\n\t\t\t\tif ( parseFloat( num, 10 ) === num ) {\n\t\t\t\t\treturn num;\n\t\t\t\t}\n\n\t\t\t\ttmp = [];\n\n\t\t\t\tfor ( item in transformTable ) {\n\t\t\t\t\ttmp[ transformTable[ item ] ] = item;\n\t\t\t\t}\n\n\t\t\t\ttransformTable = tmp;\n\t\t\t}\n\n\t\t\tfor ( i = 0; i < numberString.length; i++ ) {\n\t\t\t\tif ( transformTable[ numberString[ i ] ] ) {\n\t\t\t\t\tconvertedNumber += transformTable[ numberString[ i ] ];\n\t\t\t\t} else {\n\t\t\t\t\tconvertedNumber += numberString[ i ];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn integer ? parseFloat( convertedNumber, 10 ) : convertedNumber;\n\t\t},\n\n\t\t/**\n\t\t * Grammatical transformations, needed for inflected languages.\n\t\t * Invoked by putting {{grammar:form|word}} in a message.\n\t\t * Override this method for languages that need special grammar rules\n\t\t * applied dynamically.\n\t\t *\n\t\t * @param {string} word\n\t\t * @param {string} form\n\t\t * @return {string}\n\t\t */\n\t\t// eslint-disable-next-line no-unused-vars\n\t\tconvertGrammar: function ( word, form ) {\n\t\t\treturn word;\n\t\t},\n\n\t\t/**\n\t\t * Provides an alternative text depending on specified gender. Usage\n\t\t * {{gender:[gender|user object]|masculine|feminine|neutral}}. If second\n\t\t * or third parameter are not specified, masculine is used.\n\t\t *\n\t\t * These details may be overriden per language.\n\t\t *\n\t\t * @param {string} gender\n\t\t *      male, female, or anything else for neutral.\n\t\t * @param {Array} forms\n\t\t *      List of gender forms\n\t\t *\n\t\t * @return {string}\n\t\t */\n\t\tgender: function ( gender, forms ) {\n\t\t\tif ( !forms || forms.length === 0 ) {\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\twhile ( forms.length < 2 ) {\n\t\t\t\tforms.push( forms[ forms.length - 1 ] );\n\t\t\t}\n\n\t\t\tif ( gender === 'male' ) {\n\t\t\t\treturn forms[ 0 ];\n\t\t\t}\n\n\t\t\tif ( gender === 'female' ) {\n\t\t\t\treturn forms[ 1 ];\n\t\t\t}\n\n\t\t\treturn ( forms.length === 3 ) ? forms[ 2 ] : forms[ 0 ];\n\t\t},\n\n\t\t/**\n\t\t * Get the digit transform table for the given language\n\t\t * See http://cldr.unicode.org/translation/numbering-systems\n\t\t *\n\t\t * @param {string} language\n\t\t * @return {Array|boolean} List of digits in the passed language or false\n\t\t * representation, or boolean false if there is no information.\n\t\t */\n\t\tdigitTransformTable: function ( language ) {\n\t\t\tvar tables = {\n\t\t\t\tar: '',\n\t\t\t\tfa: '',\n\t\t\t\tml: '',\n\t\t\t\tkn: '',\n\t\t\t\tlo: '',\n\t\t\t\tor: '',\n\t\t\t\tkh: '',\n\t\t\t\tpa: '',\n\t\t\t\tgu: '',\n\t\t\t\thi: '',\n\t\t\t\tmy: '',\n\t\t\t\tta: '',\n\t\t\t\tte: '',\n\t\t\t\tth: '', // FIXME use iso 639 codes\n\t\t\t\tbo: '' // FIXME use iso 639 codes\n\t\t\t};\n\n\t\t\tif ( !tables[ language ] ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn tables[ language ].split( '' );\n\t\t}\n\t};\n\n\t$.extend( $.i18n.languages, {\n\t\t'default': language\n\t} );\n}( jQuery ) );\n","/*!\n * BIDI embedding support for jQuery.i18n\n *\n * Copyright (C) 2015, David Chan\n *\n * This code is dual licensed GPLv2 or later and MIT. You don't have to do\n * anything special to choose one license or the other and you don't have to\n * notify anyone which license you are using. You are free to use this code\n * in commercial projects as long as the copyright header is left intact.\n * See files GPL-LICENSE and MIT-LICENSE for details.\n *\n * @licence GNU General Public Licence 2.0 or later\n * @licence MIT License\n */\n\n( function ( $ ) {\n\t'use strict';\n\tvar strongDirRegExp;\n\n\t/**\n\t * Matches the first strong directionality codepoint:\n\t * - in group 1 if it is LTR\n\t * - in group 2 if it is RTL\n\t * Does not match if there is no strong directionality codepoint.\n\t *\n\t * Generated by UnicodeJS (see tools/strongDir) from the UCD; see\n\t * https://phabricator.wikimedia.org/diffusion/GUJS/ .\n\t */\n\tstrongDirRegExp = new RegExp(\n\t\t'(?:' +\n\t\t\t'(' +\n\t\t\t\t'[\\u0041-\\u005a\\u0061-\\u007a\\u00aa\\u00b5\\u00ba\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u02b8\\u02bb-\\u02c1\\u02d0\\u02d1\\u02e0-\\u02e4\\u02ee\\u0370-\\u0373\\u0376\\u0377\\u037a-\\u037d\\u037f\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0482\\u048a-\\u052f\\u0531-\\u0556\\u0559-\\u055f\\u0561-\\u0587\\u0589\\u0903-\\u0939\\u093b\\u093d-\\u0940\\u0949-\\u094c\\u094e-\\u0950\\u0958-\\u0961\\u0964-\\u0980\\u0982\\u0983\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd-\\u09c0\\u09c7\\u09c8\\u09cb\\u09cc\\u09ce\\u09d7\\u09dc\\u09dd\\u09df-\\u09e1\\u09e6-\\u09f1\\u09f4-\\u09fa\\u0a03\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a3e-\\u0a40\\u0a59-\\u0a5c\\u0a5e\\u0a66-\\u0a6f\\u0a72-\\u0a74\\u0a83\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd-\\u0ac0\\u0ac9\\u0acb\\u0acc\\u0ad0\\u0ae0\\u0ae1\\u0ae6-\\u0af0\\u0af9\\u0b02\\u0b03\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b3e\\u0b40\\u0b47\\u0b48\\u0b4b\\u0b4c\\u0b57\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b66-\\u0b77\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bbe\\u0bbf\\u0bc1\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcc\\u0bd0\\u0bd7\\u0be6-\\u0bf2\\u0c01-\\u0c03\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c39\\u0c3d\\u0c41-\\u0c44\\u0c58-\\u0c5a\\u0c60\\u0c61\\u0c66-\\u0c6f\\u0c7f\\u0c82\\u0c83\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd-\\u0cc4\\u0cc6-\\u0cc8\\u0cca\\u0ccb\\u0cd5\\u0cd6\\u0cde\\u0ce0\\u0ce1\\u0ce6-\\u0cef\\u0cf1\\u0cf2\\u0d02\\u0d03\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d-\\u0d40\\u0d46-\\u0d48\\u0d4a-\\u0d4c\\u0d4e\\u0d57\\u0d5f-\\u0d61\\u0d66-\\u0d75\\u0d79-\\u0d7f\\u0d82\\u0d83\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0dcf-\\u0dd1\\u0dd8-\\u0ddf\\u0de6-\\u0def\\u0df2-\\u0df4\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e4f-\\u0e5b\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0ed0-\\u0ed9\\u0edc-\\u0edf\\u0f00-\\u0f17\\u0f1a-\\u0f34\\u0f36\\u0f38\\u0f3e-\\u0f47\\u0f49-\\u0f6c\\u0f7f\\u0f85\\u0f88-\\u0f8c\\u0fbe-\\u0fc5\\u0fc7-\\u0fcc\\u0fce-\\u0fda\\u1000-\\u102c\\u1031\\u1038\\u103b\\u103c\\u103f-\\u1057\\u105a-\\u105d\\u1061-\\u1070\\u1075-\\u1081\\u1083\\u1084\\u1087-\\u108c\\u108e-\\u109c\\u109e-\\u10c5\\u10c7\\u10cd\\u10d0-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1360-\\u137c\\u1380-\\u138f\\u13a0-\\u13f5\\u13f8-\\u13fd\\u1401-\\u167f\\u1681-\\u169a\\u16a0-\\u16f8\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1735\\u1736\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17b6\\u17be-\\u17c5\\u17c7\\u17c8\\u17d4-\\u17da\\u17dc\\u17e0-\\u17e9\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191e\\u1923-\\u1926\\u1929-\\u192b\\u1930\\u1931\\u1933-\\u1938\\u1946-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19b0-\\u19c9\\u19d0-\\u19da\\u1a00-\\u1a16\\u1a19\\u1a1a\\u1a1e-\\u1a55\\u1a57\\u1a61\\u1a63\\u1a64\\u1a6d-\\u1a72\\u1a80-\\u1a89\\u1a90-\\u1a99\\u1aa0-\\u1aad\\u1b04-\\u1b33\\u1b35\\u1b3b\\u1b3d-\\u1b41\\u1b43-\\u1b4b\\u1b50-\\u1b6a\\u1b74-\\u1b7c\\u1b82-\\u1ba1\\u1ba6\\u1ba7\\u1baa\\u1bae-\\u1be5\\u1be7\\u1bea-\\u1bec\\u1bee\\u1bf2\\u1bf3\\u1bfc-\\u1c2b\\u1c34\\u1c35\\u1c3b-\\u1c49\\u1c4d-\\u1c7f\\u1cc0-\\u1cc7\\u1cd3\\u1ce1\\u1ce9-\\u1cec\\u1cee-\\u1cf3\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u200e\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u214f\\u2160-\\u2188\\u2336-\\u237a\\u2395\\u249c-\\u24e9\\u26ac\\u2800-\\u28ff\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d70\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u3005-\\u3007\\u3021-\\u3029\\u302e\\u302f\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u3190-\\u31ba\\u31f0-\\u321c\\u3220-\\u324f\\u3260-\\u327b\\u327f-\\u32b0\\u32c0-\\u32cb\\u32d0-\\u32fe\\u3300-\\u3376\\u337b-\\u33dd\\u33e0-\\u33fe\\u3400-\\u4db5\\u4e00-\\u9fd5\\ua000-\\ua48c\\ua4d0-\\ua60c\\ua610-\\ua62b\\ua640-\\ua66e\\ua680-\\ua69d\\ua6a0-\\ua6ef\\ua6f2-\\ua6f7\\ua722-\\ua787\\ua789-\\ua7ad\\ua7b0-\\ua7b7\\ua7f7-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua824\\ua827\\ua830-\\ua837\\ua840-\\ua873\\ua880-\\ua8c3\\ua8ce-\\ua8d9\\ua8f2-\\ua8fd\\ua900-\\ua925\\ua92e-\\ua946\\ua952\\ua953\\ua95f-\\ua97c\\ua983-\\ua9b2\\ua9b4\\ua9b5\\ua9ba\\ua9bb\\ua9bd-\\ua9cd\\ua9cf-\\ua9d9\\ua9de-\\ua9e4\\ua9e6-\\ua9fe\\uaa00-\\uaa28\\uaa2f\\uaa30\\uaa33\\uaa34\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa4d\\uaa50-\\uaa59\\uaa5c-\\uaa7b\\uaa7d-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaaeb\\uaaee-\\uaaf5\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uab30-\\uab65\\uab70-\\uabe4\\uabe6\\uabe7\\uabe9-\\uabec\\uabf0-\\uabf9\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\ue000-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc]|\\ud800[\\udc00-\\udc0b]|\\ud800[\\udc0d-\\udc26]|\\ud800[\\udc28-\\udc3a]|\\ud800\\udc3c|\\ud800\\udc3d|\\ud800[\\udc3f-\\udc4d]|\\ud800[\\udc50-\\udc5d]|\\ud800[\\udc80-\\udcfa]|\\ud800\\udd00|\\ud800\\udd02|\\ud800[\\udd07-\\udd33]|\\ud800[\\udd37-\\udd3f]|\\ud800[\\uddd0-\\uddfc]|\\ud800[\\ude80-\\ude9c]|\\ud800[\\udea0-\\uded0]|\\ud800[\\udf00-\\udf23]|\\ud800[\\udf30-\\udf4a]|\\ud800[\\udf50-\\udf75]|\\ud800[\\udf80-\\udf9d]|\\ud800[\\udf9f-\\udfc3]|\\ud800[\\udfc8-\\udfd5]|\\ud801[\\udc00-\\udc9d]|\\ud801[\\udca0-\\udca9]|\\ud801[\\udd00-\\udd27]|\\ud801[\\udd30-\\udd63]|\\ud801\\udd6f|\\ud801[\\ude00-\\udf36]|\\ud801[\\udf40-\\udf55]|\\ud801[\\udf60-\\udf67]|\\ud804\\udc00|\\ud804[\\udc02-\\udc37]|\\ud804[\\udc47-\\udc4d]|\\ud804[\\udc66-\\udc6f]|\\ud804[\\udc82-\\udcb2]|\\ud804\\udcb7|\\ud804\\udcb8|\\ud804[\\udcbb-\\udcc1]|\\ud804[\\udcd0-\\udce8]|\\ud804[\\udcf0-\\udcf9]|\\ud804[\\udd03-\\udd26]|\\ud804\\udd2c|\\ud804[\\udd36-\\udd43]|\\ud804[\\udd50-\\udd72]|\\ud804[\\udd74-\\udd76]|\\ud804[\\udd82-\\uddb5]|\\ud804[\\uddbf-\\uddc9]|\\ud804\\uddcd|\\ud804[\\uddd0-\\udddf]|\\ud804[\\udde1-\\uddf4]|\\ud804[\\ude00-\\ude11]|\\ud804[\\ude13-\\ude2e]|\\ud804\\ude32|\\ud804\\ude33|\\ud804\\ude35|\\ud804[\\ude38-\\ude3d]|\\ud804[\\ude80-\\ude86]|\\ud804\\ude88|\\ud804[\\ude8a-\\ude8d]|\\ud804[\\ude8f-\\ude9d]|\\ud804[\\ude9f-\\udea9]|\\ud804[\\udeb0-\\udede]|\\ud804[\\udee0-\\udee2]|\\ud804[\\udef0-\\udef9]|\\ud804\\udf02|\\ud804\\udf03|\\ud804[\\udf05-\\udf0c]|\\ud804\\udf0f|\\ud804\\udf10|\\ud804[\\udf13-\\udf28]|\\ud804[\\udf2a-\\udf30]|\\ud804\\udf32|\\ud804\\udf33|\\ud804[\\udf35-\\udf39]|\\ud804[\\udf3d-\\udf3f]|\\ud804[\\udf41-\\udf44]|\\ud804\\udf47|\\ud804\\udf48|\\ud804[\\udf4b-\\udf4d]|\\ud804\\udf50|\\ud804\\udf57|\\ud804[\\udf5d-\\udf63]|\\ud805[\\udc80-\\udcb2]|\\ud805\\udcb9|\\ud805[\\udcbb-\\udcbe]|\\ud805\\udcc1|\\ud805[\\udcc4-\\udcc7]|\\ud805[\\udcd0-\\udcd9]|\\ud805[\\udd80-\\uddb1]|\\ud805[\\uddb8-\\uddbb]|\\ud805\\uddbe|\\ud805[\\uddc1-\\udddb]|\\ud805[\\ude00-\\ude32]|\\ud805\\ude3b|\\ud805\\ude3c|\\ud805\\ude3e|\\ud805[\\ude41-\\ude44]|\\ud805[\\ude50-\\ude59]|\\ud805[\\ude80-\\udeaa]|\\ud805\\udeac|\\ud805\\udeae|\\ud805\\udeaf|\\ud805\\udeb6|\\ud805[\\udec0-\\udec9]|\\ud805[\\udf00-\\udf19]|\\ud805\\udf20|\\ud805\\udf21|\\ud805\\udf26|\\ud805[\\udf30-\\udf3f]|\\ud806[\\udca0-\\udcf2]|\\ud806\\udcff|\\ud806[\\udec0-\\udef8]|\\ud808[\\udc00-\\udf99]|\\ud809[\\udc00-\\udc6e]|\\ud809[\\udc70-\\udc74]|\\ud809[\\udc80-\\udd43]|\\ud80c[\\udc00-\\udfff]|\\ud80d[\\udc00-\\udc2e]|\\ud811[\\udc00-\\ude46]|\\ud81a[\\udc00-\\ude38]|\\ud81a[\\ude40-\\ude5e]|\\ud81a[\\ude60-\\ude69]|\\ud81a\\ude6e|\\ud81a\\ude6f|\\ud81a[\\uded0-\\udeed]|\\ud81a\\udef5|\\ud81a[\\udf00-\\udf2f]|\\ud81a[\\udf37-\\udf45]|\\ud81a[\\udf50-\\udf59]|\\ud81a[\\udf5b-\\udf61]|\\ud81a[\\udf63-\\udf77]|\\ud81a[\\udf7d-\\udf8f]|\\ud81b[\\udf00-\\udf44]|\\ud81b[\\udf50-\\udf7e]|\\ud81b[\\udf93-\\udf9f]|\\ud82c\\udc00|\\ud82c\\udc01|\\ud82f[\\udc00-\\udc6a]|\\ud82f[\\udc70-\\udc7c]|\\ud82f[\\udc80-\\udc88]|\\ud82f[\\udc90-\\udc99]|\\ud82f\\udc9c|\\ud82f\\udc9f|\\ud834[\\udc00-\\udcf5]|\\ud834[\\udd00-\\udd26]|\\ud834[\\udd29-\\udd66]|\\ud834[\\udd6a-\\udd72]|\\ud834\\udd83|\\ud834\\udd84|\\ud834[\\udd8c-\\udda9]|\\ud834[\\uddae-\\udde8]|\\ud834[\\udf60-\\udf71]|\\ud835[\\udc00-\\udc54]|\\ud835[\\udc56-\\udc9c]|\\ud835\\udc9e|\\ud835\\udc9f|\\ud835\\udca2|\\ud835\\udca5|\\ud835\\udca6|\\ud835[\\udca9-\\udcac]|\\ud835[\\udcae-\\udcb9]|\\ud835\\udcbb|\\ud835[\\udcbd-\\udcc3]|\\ud835[\\udcc5-\\udd05]|\\ud835[\\udd07-\\udd0a]|\\ud835[\\udd0d-\\udd14]|\\ud835[\\udd16-\\udd1c]|\\ud835[\\udd1e-\\udd39]|\\ud835[\\udd3b-\\udd3e]|\\ud835[\\udd40-\\udd44]|\\ud835\\udd46|\\ud835[\\udd4a-\\udd50]|\\ud835[\\udd52-\\udea5]|\\ud835[\\udea8-\\udeda]|\\ud835[\\udedc-\\udf14]|\\ud835[\\udf16-\\udf4e]|\\ud835[\\udf50-\\udf88]|\\ud835[\\udf8a-\\udfc2]|\\ud835[\\udfc4-\\udfcb]|\\ud836[\\udc00-\\uddff]|\\ud836[\\ude37-\\ude3a]|\\ud836[\\ude6d-\\ude74]|\\ud836[\\ude76-\\ude83]|\\ud836[\\ude85-\\ude8b]|\\ud83c[\\udd10-\\udd2e]|\\ud83c[\\udd30-\\udd69]|\\ud83c[\\udd70-\\udd9a]|\\ud83c[\\udde6-\\ude02]|\\ud83c[\\ude10-\\ude3a]|\\ud83c[\\ude40-\\ude48]|\\ud83c\\ude50|\\ud83c\\ude51|[\\ud840-\\ud868][\\udc00-\\udfff]|\\ud869[\\udc00-\\uded6]|\\ud869[\\udf00-\\udfff]|[\\ud86a-\\ud86c][\\udc00-\\udfff]|\\ud86d[\\udc00-\\udf34]|\\ud86d[\\udf40-\\udfff]|\\ud86e[\\udc00-\\udc1d]|\\ud86e[\\udc20-\\udfff]|[\\ud86f-\\ud872][\\udc00-\\udfff]|\\ud873[\\udc00-\\udea1]|\\ud87e[\\udc00-\\ude1d]|[\\udb80-\\udbbe][\\udc00-\\udfff]|\\udbbf[\\udc00-\\udffd]|[\\udbc0-\\udbfe][\\udc00-\\udfff]|\\udbff[\\udc00-\\udffd]' +\n\t\t\t')|(' +\n\t\t\t\t'[\\u0590\\u05be\\u05c0\\u05c3\\u05c6\\u05c8-\\u05ff\\u07c0-\\u07ea\\u07f4\\u07f5\\u07fa-\\u0815\\u081a\\u0824\\u0828\\u082e-\\u0858\\u085c-\\u089f\\u200f\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb4f\\u0608\\u060b\\u060d\\u061b-\\u064a\\u066d-\\u066f\\u0671-\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u0710\\u0712-\\u072f\\u074b-\\u07a5\\u07b1-\\u07bf\\u08a0-\\u08e2\\ufb50-\\ufd3d\\ufd40-\\ufdcf\\ufdf0-\\ufdfc\\ufdfe\\ufdff\\ufe70-\\ufefe]|\\ud802[\\udc00-\\udd1e]|\\ud802[\\udd20-\\ude00]|\\ud802\\ude04|\\ud802[\\ude07-\\ude0b]|\\ud802[\\ude10-\\ude37]|\\ud802[\\ude3b-\\ude3e]|\\ud802[\\ude40-\\udee4]|\\ud802[\\udee7-\\udf38]|\\ud802[\\udf40-\\udfff]|\\ud803[\\udc00-\\ude5f]|\\ud803[\\ude7f-\\udfff]|\\ud83a[\\udc00-\\udccf]|\\ud83a[\\udcd7-\\udfff]|\\ud83b[\\udc00-\\uddff]|\\ud83b[\\udf00-\\udfff]|\\ud83b[\\udf00-\\udfff]|\\ud83b[\\udf00-\\udfff]|\\ud83b[\\udf00-\\udfff]|\\ud83b[\\udf00-\\udfff]|\\ud83b[\\udf00-\\udfff]|\\ud83b[\\udf00-\\udfff]|\\ud83b[\\udf00-\\udfff]|\\ud83b[\\udf00-\\udfff]|\\ud83b[\\udf00-\\udfff]|\\ud83b[\\udf00-\\udfff]|\\ud83b[\\udf00-\\udfff]|\\ud83b[\\udf00-\\udfff]|\\ud83b[\\ude00-\\udeef]|\\ud83b[\\udef2-\\udeff]' +\n\t\t\t')' +\n\t\t')'\n\t);\n\n\t/**\n\t * Gets directionality of the first strongly directional codepoint\n\t *\n\t * This is the rule the BIDI algorithm uses to determine the directionality of\n\t * paragraphs ( http://unicode.org/reports/tr9/#The_Paragraph_Level ) and\n\t * FSI isolates ( http://unicode.org/reports/tr9/#Explicit_Directional_Isolates ).\n\t *\n\t * TODO: Does not handle BIDI control characters inside the text.\n\t * TODO: Does not handle unallocated characters.\n\t *\n\t * @param {string} text The text from which to extract initial directionality.\n\t * @return {string} Directionality (either 'ltr' or 'rtl')\n\t */\n\tfunction strongDirFromContent( text ) {\n\t\tvar m = text.match( strongDirRegExp );\n\t\tif ( !m ) {\n\t\t\treturn null;\n\t\t}\n\t\tif ( m[ 2 ] === undefined ) {\n\t\t\treturn 'ltr';\n\t\t}\n\t\treturn 'rtl';\n\t}\n\n\t$.extend( $.i18n.parser.emitter, {\n\t\t/**\n\t\t * Wraps argument with unicode control characters for directionality safety\n\t\t *\n\t\t * This solves the problem where directionality-neutral characters at the edge of\n\t\t * the argument string get interpreted with the wrong directionality from the\n\t\t * enclosing context, giving renderings that look corrupted like \"(Ben_(WMF\".\n\t\t *\n\t\t * The wrapping is LRE...PDF or RLE...PDF, depending on the detected\n\t\t * directionality of the argument string, using the BIDI algorithm's own \"First\n\t\t * strong directional codepoint\" rule. Essentially, this works round the fact that\n\t\t * there is no embedding equivalent of U+2068 FSI (isolation with heuristic\n\t\t * direction inference). The latter is cleaner but still not widely supported.\n\t\t *\n\t\t * @param {string[]} nodes The text nodes from which to take the first item.\n\t\t * @return {string} Wrapped String of content as needed.\n\t\t */\n\t\tbidi: function ( nodes ) {\n\t\t\tvar dir = strongDirFromContent( nodes[ 0 ] );\n\t\t\tif ( dir === 'ltr' ) {\n\t\t\t\t// Wrap in LEFT-TO-RIGHT EMBEDDING ... POP DIRECTIONAL FORMATTING\n\t\t\t\treturn '\\u202A' + nodes[ 0 ] + '\\u202C';\n\t\t\t}\n\t\t\tif ( dir === 'rtl' ) {\n\t\t\t\t// Wrap in RIGHT-TO-LEFT EMBEDDING ... POP DIRECTIONAL FORMATTING\n\t\t\t\treturn '\\u202B' + nodes[ 0 ] + '\\u202C';\n\t\t\t}\n\t\t\t// No strong directionality: do not wrap\n\t\t\treturn nodes[ 0 ];\n\t\t}\n\t} );\n}( jQuery ) );\n","module.exports = jQuery;","/*!\n * jQuery Internationalization library\n *\n * Copyright (C) 2011-2013 Santhosh Thottingal, Neil Kandalgaonkar\n *\n * jquery.i18n is dual licensed GPLv2 or later and MIT. You don't have to do\n * anything special to choose one license or the other and you don't have to\n * notify anyone which license you are using. You are free to use\n * UniversalLanguageSelector in commercial projects as long as the copyright\n * header is left intact. See files GPL-LICENSE and MIT-LICENSE for details.\n *\n * @licence GNU General Public Licence 2.0 or later\n * @licence MIT License\n */\n\n( function ( $ ) {\n\t'use strict';\n\n\tvar MessageParserEmitter = function () {\n\t\tthis.language = $.i18n.languages[ String.locale ] || $.i18n.languages[ 'default' ];\n\t};\n\n\tMessageParserEmitter.prototype = {\n\t\tconstructor: MessageParserEmitter,\n\n\t\t/**\n\t\t * (We put this method definition here, and not in prototype, to make\n\t\t * sure it's not overwritten by any magic.) Walk entire node structure,\n\t\t * applying replacements and template functions when appropriate\n\t\t *\n\t\t * @param {Mixed} node abstract syntax tree (top node or subnode)\n\t\t * @param {Array} replacements for $1, $2, ... $n\n\t\t * @return {Mixed} single-string node or array of nodes suitable for\n\t\t *  jQuery appending.\n\t\t */\n\t\temit: function ( node, replacements ) {\n\t\t\tvar ret, subnodes, operation,\n\t\t\t\tmessageParserEmitter = this;\n\n\t\t\tswitch ( typeof node ) {\n\t\t\t\tcase 'string':\n\t\t\t\tcase 'number':\n\t\t\t\t\tret = node;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'object':\n\t\t\t\t// node is an array of nodes\n\t\t\t\t\tsubnodes = $.map( node.slice( 1 ), function ( n ) {\n\t\t\t\t\t\treturn messageParserEmitter.emit( n, replacements );\n\t\t\t\t\t} );\n\n\t\t\t\t\toperation = node[ 0 ].toLowerCase();\n\n\t\t\t\t\tif ( typeof messageParserEmitter[ operation ] === 'function' ) {\n\t\t\t\t\t\tret = messageParserEmitter[ operation ]( subnodes, replacements );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error( 'unknown operation \"' + operation + '\"' );\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'undefined':\n\t\t\t\t// Parsing the empty string (as an entire expression, or as a\n\t\t\t\t// paramExpression in a template) results in undefined\n\t\t\t\t// Perhaps a more clever parser can detect this, and return the\n\t\t\t\t// empty string? Or is that useful information?\n\t\t\t\t// The logical thing is probably to return the empty string here\n\t\t\t\t// when we encounter undefined.\n\t\t\t\t\tret = '';\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error( 'unexpected type in AST: ' + typeof node );\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t},\n\n\t\t/**\n\t\t * Parsing has been applied depth-first we can assume that all nodes\n\t\t * here are single nodes Must return a single node to parents -- a\n\t\t * jQuery with synthetic span However, unwrap any other synthetic spans\n\t\t * in our children and pass them upwards\n\t\t *\n\t\t * @param {Array} nodes Mixed, some single nodes, some arrays of nodes.\n\t\t * @return {string}\n\t\t */\n\t\tconcat: function ( nodes ) {\n\t\t\tvar result = '';\n\n\t\t\t$.each( nodes, function ( i, node ) {\n\t\t\t\t// strings, integers, anything else\n\t\t\t\tresult += node;\n\t\t\t} );\n\n\t\t\treturn result;\n\t\t},\n\n\t\t/**\n\t\t * Return escaped replacement of correct index, or string if\n\t\t * unavailable. Note that we expect the parsed parameter to be\n\t\t * zero-based. i.e. $1 should have become [ 0 ]. if the specified\n\t\t * parameter is not found return the same string (e.g. \"$99\" ->\n\t\t * parameter 98 -> not found -> return \"$99\" ) TODO throw error if\n\t\t * nodes.length > 1 ?\n\t\t *\n\t\t * @param {Array} nodes One element, integer, n >= 0\n\t\t * @param {Array} replacements for $1, $2, ... $n\n\t\t * @return {string} replacement\n\t\t */\n\t\treplace: function ( nodes, replacements ) {\n\t\t\tvar index = parseInt( nodes[ 0 ], 10 );\n\n\t\t\tif ( index < replacements.length ) {\n\t\t\t\t// replacement is not a string, don't touch!\n\t\t\t\treturn replacements[ index ];\n\t\t\t} else {\n\t\t\t\t// index not found, fallback to displaying variable\n\t\t\t\treturn '$' + ( index + 1 );\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Transform parsed structure into pluralization n.b. The first node may\n\t\t * be a non-integer (for instance, a string representing an Arabic\n\t\t * number). So convert it back with the current language's\n\t\t * convertNumber.\n\t\t *\n\t\t * @param {Array} nodes List [ {String|Number}, {String}, {String} ... ]\n\t\t * @return {string} selected pluralized form according to current\n\t\t *  language.\n\t\t */\n\t\tplural: function ( nodes ) {\n\t\t\tvar count = parseFloat( this.language.convertNumber( nodes[ 0 ], 10 ) ),\n\t\t\t\tforms = nodes.slice( 1 );\n\n\t\t\treturn forms.length ? this.language.convertPlural( count, forms ) : '';\n\t\t},\n\n\t\t/**\n\t\t * Transform parsed structure into gender Usage\n\t\t * {{gender:gender|masculine|feminine|neutral}}.\n\t\t *\n\t\t * @param {Array} nodes List [ {String}, {String}, {String} , {String} ]\n\t\t * @return {string} selected gender form according to current language\n\t\t */\n\t\tgender: function ( nodes ) {\n\t\t\tvar gender = nodes[ 0 ],\n\t\t\t\tforms = nodes.slice( 1 );\n\n\t\t\treturn this.language.gender( gender, forms );\n\t\t},\n\n\t\t/**\n\t\t * Transform parsed structure into grammar conversion. Invoked by\n\t\t * putting {{grammar:form|word}} in a message\n\t\t *\n\t\t * @param {Array} nodes List [{Grammar case eg: genitive}, {String word}]\n\t\t * @return {string} selected grammatical form according to current\n\t\t *  language.\n\t\t */\n\t\tgrammar: function ( nodes ) {\n\t\t\tvar form = nodes[ 0 ],\n\t\t\t\tword = nodes[ 1 ];\n\n\t\t\treturn word && form && this.language.convertGrammar( word, form );\n\t\t}\n\t};\n\n\t$.extend( $.i18n.parser.emitter, new MessageParserEmitter() );\n}( jQuery ) );\n","/*!\n * jQuery Internationalization library\n *\n * Copyright (C) 2011-2013 Santhosh Thottingal, Neil Kandalgaonkar\n *\n * jquery.i18n is dual licensed GPLv2 or later and MIT. You don't have to do\n * anything special to choose one license or the other and you don't have to\n * notify anyone which license you are using. You are free to use\n * UniversalLanguageSelector in commercial projects as long as the copyright\n * header is left intact. See files GPL-LICENSE and MIT-LICENSE for details.\n *\n * @licence GNU General Public Licence 2.0 or later\n * @licence MIT License\n */\n\n( function ( $ ) {\n\t'use strict';\n\n\tvar MessageParser = function ( options ) {\n\t\tthis.options = $.extend( {}, $.i18n.parser.defaults, options );\n\t\tthis.language = $.i18n.languages[ String.locale ] || $.i18n.languages[ 'default' ];\n\t\tthis.emitter = $.i18n.parser.emitter;\n\t};\n\n\tMessageParser.prototype = {\n\n\t\tconstructor: MessageParser,\n\n\t\tsimpleParse: function ( message, parameters ) {\n\t\t\treturn message.replace( /\\$(\\d+)/g, function ( str, match ) {\n\t\t\t\tvar index = parseInt( match, 10 ) - 1;\n\n\t\t\t\treturn parameters[ index ] !== undefined ? parameters[ index ] : '$' + match;\n\t\t\t} );\n\t\t},\n\n\t\tparse: function ( message, replacements ) {\n\t\t\tif ( message.indexOf( '{{' ) < 0 ) {\n\t\t\t\treturn this.simpleParse( message, replacements );\n\t\t\t}\n\n\t\t\tthis.emitter.language = $.i18n.languages[ $.i18n().locale ] ||\n\t\t\t\t$.i18n.languages[ 'default' ];\n\n\t\t\treturn this.emitter.emit( this.ast( message ), replacements );\n\t\t},\n\n\t\tast: function ( message ) {\n\t\t\tvar pipe, colon, backslash, anyCharacter, dollar, digits, regularLiteral,\n\t\t\t\tregularLiteralWithoutBar, regularLiteralWithoutSpace, escapedOrLiteralWithoutBar,\n\t\t\t\tescapedOrRegularLiteral, templateContents, templateName, openTemplate,\n\t\t\t\tcloseTemplate, expression, paramExpression, result,\n\t\t\t\tpos = 0;\n\n\t\t\t// Try parsers until one works, if none work return null\n\t\t\tfunction choice( parserSyntax ) {\n\t\t\t\treturn function () {\n\t\t\t\t\tvar i, result;\n\n\t\t\t\t\tfor ( i = 0; i < parserSyntax.length; i++ ) {\n\t\t\t\t\t\tresult = parserSyntax[ i ]();\n\n\t\t\t\t\t\tif ( result !== null ) {\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn null;\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// Try several parserSyntax-es in a row.\n\t\t\t// All must succeed; otherwise, return null.\n\t\t\t// This is the only eager one.\n\t\t\tfunction sequence( parserSyntax ) {\n\t\t\t\tvar i, res,\n\t\t\t\t\toriginalPos = pos,\n\t\t\t\t\tresult = [];\n\n\t\t\t\tfor ( i = 0; i < parserSyntax.length; i++ ) {\n\t\t\t\t\tres = parserSyntax[ i ]();\n\n\t\t\t\t\tif ( res === null ) {\n\t\t\t\t\t\tpos = originalPos;\n\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\tresult.push( res );\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\t// Run the same parser over and over until it fails.\n\t\t\t// Must succeed a minimum of n times; otherwise, return null.\n\t\t\tfunction nOrMore( n, p ) {\n\t\t\t\treturn function () {\n\t\t\t\t\tvar originalPos = pos,\n\t\t\t\t\t\tresult = [],\n\t\t\t\t\t\tparsed = p();\n\n\t\t\t\t\twhile ( parsed !== null ) {\n\t\t\t\t\t\tresult.push( parsed );\n\t\t\t\t\t\tparsed = p();\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( result.length < n ) {\n\t\t\t\t\t\tpos = originalPos;\n\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn result;\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// Helpers -- just make parserSyntax out of simpler JS builtin types\n\n\t\t\tfunction makeStringParser( s ) {\n\t\t\t\tvar len = s.length;\n\n\t\t\t\treturn function () {\n\t\t\t\t\tvar result = null;\n\n\t\t\t\t\tif ( message.slice( pos, pos + len ) === s ) {\n\t\t\t\t\t\tresult = s;\n\t\t\t\t\t\tpos += len;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn result;\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tfunction makeRegexParser( regex ) {\n\t\t\t\treturn function () {\n\t\t\t\t\tvar matches = message.slice( pos ).match( regex );\n\n\t\t\t\t\tif ( matches === null ) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\tpos += matches[ 0 ].length;\n\n\t\t\t\t\treturn matches[ 0 ];\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tpipe = makeStringParser( '|' );\n\t\t\tcolon = makeStringParser( ':' );\n\t\t\tbackslash = makeStringParser( '\\\\' );\n\t\t\tanyCharacter = makeRegexParser( /^./ );\n\t\t\tdollar = makeStringParser( '$' );\n\t\t\tdigits = makeRegexParser( /^\\d+/ );\n\t\t\tregularLiteral = makeRegexParser( /^[^{}[\\]$\\\\]/ );\n\t\t\tregularLiteralWithoutBar = makeRegexParser( /^[^{}[\\]$\\\\|]/ );\n\t\t\tregularLiteralWithoutSpace = makeRegexParser( /^[^{}[\\]$\\s]/ );\n\n\t\t\t// There is a general pattern:\n\t\t\t// parse a thing;\n\t\t\t// if it worked, apply transform,\n\t\t\t// otherwise return null.\n\t\t\t// But using this as a combinator seems to cause problems\n\t\t\t// when combined with nOrMore().\n\t\t\t// May be some scoping issue.\n\t\t\tfunction transform( p, fn ) {\n\t\t\t\treturn function () {\n\t\t\t\t\tvar result = p();\n\n\t\t\t\t\treturn result === null ? null : fn( result );\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// Used to define \"literals\" within template parameters. The pipe\n\t\t\t// character is the parameter delimeter, so by default\n\t\t\t// it is not a literal in the parameter\n\t\t\tfunction literalWithoutBar() {\n\t\t\t\tvar result = nOrMore( 1, escapedOrLiteralWithoutBar )();\n\n\t\t\t\treturn result === null ? null : result.join( '' );\n\t\t\t}\n\n\t\t\tfunction literal() {\n\t\t\t\tvar result = nOrMore( 1, escapedOrRegularLiteral )();\n\n\t\t\t\treturn result === null ? null : result.join( '' );\n\t\t\t}\n\n\t\t\tfunction escapedLiteral() {\n\t\t\t\tvar result = sequence( [ backslash, anyCharacter ] );\n\n\t\t\t\treturn result === null ? null : result[ 1 ];\n\t\t\t}\n\n\t\t\tchoice( [ escapedLiteral, regularLiteralWithoutSpace ] );\n\t\t\tescapedOrLiteralWithoutBar = choice( [ escapedLiteral, regularLiteralWithoutBar ] );\n\t\t\tescapedOrRegularLiteral = choice( [ escapedLiteral, regularLiteral ] );\n\n\t\t\tfunction replacement() {\n\t\t\t\tvar result = sequence( [ dollar, digits ] );\n\n\t\t\t\tif ( result === null ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn [ 'REPLACE', parseInt( result[ 1 ], 10 ) - 1 ];\n\t\t\t}\n\n\t\t\ttemplateName = transform(\n\t\t\t\t// see $wgLegalTitleChars\n\t\t\t\t// not allowing : due to the need to catch \"PLURAL:$1\"\n\t\t\t\tmakeRegexParser( /^[ !\"$&'()*,./0-9;=?@A-Z^_`a-z~\\x80-\\xFF+-]+/ ),\n\n\t\t\t\tfunction ( result ) {\n\t\t\t\t\treturn result.toString();\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tfunction templateParam() {\n\t\t\t\tvar expr,\n\t\t\t\t\tresult = sequence( [ pipe, nOrMore( 0, paramExpression ) ] );\n\n\t\t\t\tif ( result === null ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\texpr = result[ 1 ];\n\n\t\t\t\t// use a \"CONCAT\" operator if there are multiple nodes,\n\t\t\t\t// otherwise return the first node, raw.\n\t\t\t\treturn expr.length > 1 ? [ 'CONCAT' ].concat( expr ) : expr[ 0 ];\n\t\t\t}\n\n\t\t\tfunction templateWithReplacement() {\n\t\t\t\tvar result = sequence( [ templateName, colon, replacement ] );\n\n\t\t\t\treturn result === null ? null : [ result[ 0 ], result[ 2 ] ];\n\t\t\t}\n\n\t\t\tfunction templateWithOutReplacement() {\n\t\t\t\tvar result = sequence( [ templateName, colon, paramExpression ] );\n\n\t\t\t\treturn result === null ? null : [ result[ 0 ], result[ 2 ] ];\n\t\t\t}\n\n\t\t\ttemplateContents = choice( [\n\t\t\t\tfunction () {\n\t\t\t\t\tvar res = sequence( [\n\t\t\t\t\t\t// templates can have placeholders for dynamic\n\t\t\t\t\t\t// replacement eg: {{PLURAL:$1|one car|$1 cars}}\n\t\t\t\t\t\t// or no placeholders eg:\n\t\t\t\t\t\t// {{GRAMMAR:genitive|{{SITENAME}}}\n\t\t\t\t\t\tchoice( [ templateWithReplacement, templateWithOutReplacement ] ),\n\t\t\t\t\t\tnOrMore( 0, templateParam )\n\t\t\t\t\t] );\n\n\t\t\t\t\treturn res === null ? null : res[ 0 ].concat( res[ 1 ] );\n\t\t\t\t},\n\t\t\t\tfunction () {\n\t\t\t\t\tvar res = sequence( [ templateName, nOrMore( 0, templateParam ) ] );\n\n\t\t\t\t\tif ( res === null ) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn [ res[ 0 ] ].concat( res[ 1 ] );\n\t\t\t\t}\n\t\t\t] );\n\n\t\t\topenTemplate = makeStringParser( '{{' );\n\t\t\tcloseTemplate = makeStringParser( '}}' );\n\n\t\t\tfunction template() {\n\t\t\t\tvar result = sequence( [ openTemplate, templateContents, closeTemplate ] );\n\n\t\t\t\treturn result === null ? null : result[ 1 ];\n\t\t\t}\n\n\t\t\texpression = choice( [ template, replacement, literal ] );\n\t\t\tparamExpression = choice( [ template, replacement, literalWithoutBar ] );\n\n\t\t\tfunction start() {\n\t\t\t\tvar result = nOrMore( 0, expression )();\n\n\t\t\t\tif ( result === null ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn [ 'CONCAT' ].concat( result );\n\t\t\t}\n\n\t\t\tresult = start();\n\n\t\t\t/*\n\t\t\t * For success, the pos must have gotten to the end of the input\n\t\t\t * and returned a non-null.\n\t\t\t * n.b. This is part of language infrastructure, so we do not throw an\n\t\t\t * internationalizable message.\n\t\t\t */\n\t\t\tif ( result === null || pos !== message.length ) {\n\t\t\t\tthrow new Error( 'Parse error at position ' + pos.toString() + ' in input: ' + message );\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t};\n\n\t$.extend( $.i18n.parser, new MessageParser() );\n}( jQuery ) );","/*!\n * jQuery Internationalization library - Message Store\n *\n * Copyright (C) 2012 Santhosh Thottingal\n *\n * jquery.i18n is dual licensed GPLv2 or later and MIT. You don't have to do anything special to\n * choose one license or the other and you don't have to notify anyone which license you are using.\n * You are free to use UniversalLanguageSelector in commercial projects as long as the copyright\n * header is left intact. See files GPL-LICENSE and MIT-LICENSE for details.\n *\n * @licence GNU General Public Licence 2.0 or later\n * @licence MIT License\n */\n\n( function ( $ ) {\n\t'use strict';\n\n\tvar MessageStore = function () {\n\t\tthis.messages = {};\n\t\tthis.sources = {};\n\t};\n\n\tfunction jsonMessageLoader( url ) {\n\t\tvar deferred = $.Deferred();\n\n\t\t$.getJSON( url )\n\t\t\t.done( deferred.resolve )\n\t\t\t.fail( function ( jqxhr, settings, exception ) {\n\t\t\t\t$.i18n.log( 'Error in loading messages from ' + url + ' Exception: ' + exception );\n\t\t\t\t// Ignore 404 exception, because we are handling fallabacks explicitly\n\t\t\t\tdeferred.resolve();\n\t\t\t} );\n\n\t\treturn deferred.promise();\n\t}\n\n\t/**\n\t * See https://github.com/wikimedia/jquery.i18n/wiki/Specification#wiki-Message_File_Loading\n\t */\n\tMessageStore.prototype = {\n\n\t\t/**\n\t\t * General message loading API This can take a URL string for\n\t\t * the json formatted messages.\n\t\t * <code>load('path/to/all_localizations.json');</code>\n\t\t *\n\t\t * This can also load a localization file for a locale <code>\n\t\t * load( 'path/to/de-messages.json', 'de' );\n\t\t * </code>\n\t\t * A data object containing message key- message translation mappings\n\t\t * can also be passed Eg:\n\t\t * <code>\n\t\t * load( { 'hello' : 'Hello' }, optionalLocale );\n\t\t * </code> If the data argument is\n\t\t * null/undefined/false,\n\t\t * all cached messages for the i18n instance will get reset.\n\t\t *\n\t\t * @param {string|Object} source\n\t\t * @param {string} locale Language tag\n\t\t * @return {jQuery.Promise}\n\t\t */\n\t\tload: function ( source, locale ) {\n\t\t\tvar key = null,\n\t\t\t\tdeferred = null,\n\t\t\t\tdeferreds = [],\n\t\t\t\tmessageStore = this;\n\n\t\t\tif ( typeof source === 'string' ) {\n\t\t\t\t// This is a URL to the messages file.\n\t\t\t\t$.i18n.log( 'Loading messages from: ' + source );\n\t\t\t\tdeferred = jsonMessageLoader( source )\n\t\t\t\t\t.done( function ( localization ) {\n\t\t\t\t\t\tmessageStore.set( locale, localization );\n\t\t\t\t\t} );\n\n\t\t\t\treturn deferred.promise();\n\t\t\t}\n\n\t\t\tif ( locale ) {\n\t\t\t\t// source is an key-value pair of messages for given locale\n\t\t\t\tmessageStore.set( locale, source );\n\n\t\t\t\treturn $.Deferred().resolve();\n\t\t\t} else {\n\t\t\t\t// source is a key-value pair of locales and their source\n\t\t\t\tfor ( key in source ) {\n\t\t\t\t\tif ( Object.prototype.hasOwnProperty.call( source, key ) ) {\n\t\t\t\t\t\tlocale = key;\n\t\t\t\t\t\t// No {locale} given, assume data is a group of languages,\n\t\t\t\t\t\t// call this function again for each language.\n\t\t\t\t\t\tdeferreds.push( messageStore.load( source[ key ], locale ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn $.when.apply( $, deferreds );\n\t\t\t}\n\n\t\t},\n\n\t\t/**\n\t\t * Set messages to the given locale.\n\t\t * If locale exists, add messages to the locale.\n\t\t *\n\t\t * @param {string} locale\n\t\t * @param {Object} messages\n\t\t */\n\t\tset: function ( locale, messages ) {\n\t\t\tif ( !this.messages[ locale ] ) {\n\t\t\t\tthis.messages[ locale ] = messages;\n\t\t\t} else {\n\t\t\t\tthis.messages[ locale ] = $.extend( this.messages[ locale ], messages );\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @param {string} locale\n\t\t * @param {string} messageKey\n\t\t * @return {boolean}\n\t\t */\n\t\tget: function ( locale, messageKey ) {\n\t\t\treturn this.messages[ locale ] && this.messages[ locale ][ messageKey ];\n\t\t}\n\t};\n\n\t$.extend( $.i18n.messageStore, new MessageStore() );\n}( jQuery ) );\n","/*!\n * jQuery Internationalization library\n *\n * Copyright (C) 2012 Santhosh Thottingal\n *\n * jquery.i18n is dual licensed GPLv2 or later and MIT. You don't have to do\n * anything special to choose one license or the other and you don't have to\n * notify anyone which license you are using. You are free to use\n * UniversalLanguageSelector in commercial projects as long as the copyright\n * header is left intact. See files GPL-LICENSE and MIT-LICENSE for details.\n *\n * @licence GNU General Public Licence 2.0 or later\n * @licence MIT License\n */\n\n( function ( $ ) {\n\t'use strict';\n\n\tvar I18N,\n\t\tslice = Array.prototype.slice;\n\t/**\n\t * @constructor\n\t * @param {Object} options\n\t */\n\tI18N = function ( options ) {\n\t\t// Load defaults\n\t\tthis.options = $.extend( {}, I18N.defaults, options );\n\n\t\tthis.parser = this.options.parser;\n\t\tthis.locale = this.options.locale;\n\t\tthis.messageStore = this.options.messageStore;\n\t\tthis.languages = {};\n\t};\n\n\tI18N.prototype = {\n\t\t/**\n\t\t * Localize a given messageKey to a locale.\n\t\t * @param {String} messageKey\n\t\t * @return {String} Localized message\n\t\t */\n\t\tlocalize: function ( messageKey ) {\n\t\t\tvar localeParts, localePartIndex, locale, fallbackIndex,\n\t\t\t\ttryingLocale, message;\n\n\t\t\tlocale = this.locale;\n\t\t\tfallbackIndex = 0;\n\n\t\t\twhile ( locale ) {\n\t\t\t\t// Iterate through locales starting at most-specific until\n\t\t\t\t// localization is found. As in fi-Latn-FI, fi-Latn and fi.\n\t\t\t\tlocaleParts = locale.split( '-' );\n\t\t\t\tlocalePartIndex = localeParts.length;\n\n\t\t\t\tdo {\n\t\t\t\t\ttryingLocale = localeParts.slice( 0, localePartIndex ).join( '-' );\n\t\t\t\t\tmessage = this.messageStore.get( tryingLocale, messageKey );\n\n\t\t\t\t\tif ( message ) {\n\t\t\t\t\t\treturn message;\n\t\t\t\t\t}\n\n\t\t\t\t\tlocalePartIndex--;\n\t\t\t\t} while ( localePartIndex );\n\n\t\t\t\tif ( locale === 'en' ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tlocale = ( $.i18n.fallbacks[ this.locale ] &&\n\t\t\t\t\t\t$.i18n.fallbacks[ this.locale ][ fallbackIndex ] ) ||\n\t\t\t\t\t\tthis.options.fallbackLocale;\n\t\t\t\t$.i18n.log( 'Trying fallback locale for ' + this.locale + ': ' + locale + ' (' + messageKey + ')' );\n\n\t\t\t\tfallbackIndex++;\n\t\t\t}\n\n\t\t\t// key not found\n\t\t\treturn '';\n\t\t},\n\n\t\t/*\n\t\t * Destroy the i18n instance.\n\t\t */\n\t\tdestroy: function () {\n\t\t\t$.removeData( document, 'i18n' );\n\t\t},\n\n\t\t/**\n\t\t * General message loading API This can take a URL string for\n\t\t * the json formatted messages. Example:\n\t\t * <code>load('path/to/all_localizations.json');</code>\n\t\t *\n\t\t * To load a localization file for a locale:\n\t\t * <code>\n\t\t * load('path/to/de-messages.json', 'de' );\n\t\t * </code>\n\t\t *\n\t\t * To load a localization file from a directory:\n\t\t * <code>\n\t\t * load('path/to/i18n/directory', 'de' );\n\t\t * </code>\n\t\t * The above method has the advantage of fallback resolution.\n\t\t * ie, it will automatically load the fallback locales for de.\n\t\t * For most usecases, this is the recommended method.\n\t\t * It is optional to have trailing slash at end.\n\t\t *\n\t\t * A data object containing message key- message translation mappings\n\t\t * can also be passed. Example:\n\t\t * <code>\n\t\t * load( { 'hello' : 'Hello' }, optionalLocale );\n\t\t * </code>\n\t\t *\n\t\t * A source map containing key-value pair of languagename and locations\n\t\t * can also be passed. Example:\n\t\t * <code>\n\t\t * load( {\n\t\t * bn: 'i18n/bn.json',\n\t\t * he: 'i18n/he.json',\n\t\t * en: 'i18n/en.json'\n\t\t * } )\n\t\t * </code>\n\t\t *\n\t\t * If the data argument is null/undefined/false,\n\t\t * all cached messages for the i18n instance will get reset.\n\t\t *\n\t\t * @param {string|Object} source\n\t\t * @param {string} locale Language tag\n\t\t * @return {jQuery.Promise}\n\t\t */\n\t\tload: function ( source, locale ) {\n\t\t\tvar fallbackLocales, locIndex, fallbackLocale, sourceMap = {};\n\t\t\tif ( !source && !locale ) {\n\t\t\t\tsource = 'i18n/' + $.i18n().locale + '.json';\n\t\t\t\tlocale = $.i18n().locale;\n\t\t\t}\n\t\t\tif ( typeof source === 'string' &&\n\t\t\t\t// source extension should be json, but can have query params after that.\n\t\t\t\tsource.split( '?' )[ 0 ].split( '.' ).pop() !== 'json'\n\t\t\t) {\n\t\t\t\t// Load specified locale then check for fallbacks when directory is\n\t\t\t\t// specified in load()\n\t\t\t\tsourceMap[ locale ] = source + '/' + locale + '.json';\n\t\t\t\tfallbackLocales = ( $.i18n.fallbacks[ locale ] || [] )\n\t\t\t\t\t.concat( this.options.fallbackLocale );\n\t\t\t\tfor ( locIndex = 0; locIndex < fallbackLocales.length; locIndex++ ) {\n\t\t\t\t\tfallbackLocale = fallbackLocales[ locIndex ];\n\t\t\t\t\tsourceMap[ fallbackLocale ] = source + '/' + fallbackLocale + '.json';\n\t\t\t\t}\n\t\t\t\treturn this.load( sourceMap );\n\t\t\t} else {\n\t\t\t\treturn this.messageStore.load( source, locale );\n\t\t\t}\n\n\t\t},\n\n\t\t/**\n\t\t * Does parameter and magic word substitution.\n\t\t *\n\t\t * @param {string} key Message key\n\t\t * @param {Array} parameters Message parameters\n\t\t * @return {string}\n\t\t */\n\t\tparse: function ( key, parameters ) {\n\t\t\tvar message = this.localize( key );\n\t\t\t// FIXME: This changes the state of the I18N object,\n\t\t\t// should probably not change the 'this.parser' but just\n\t\t\t// pass it to the parser.\n\t\t\tthis.parser.language = $.i18n.languages[ $.i18n().locale ] || $.i18n.languages[ 'default' ];\n\t\t\tif ( message === '' ) {\n\t\t\t\tmessage = key;\n\t\t\t}\n\t\t\treturn this.parser.parse( message, parameters );\n\t\t}\n\t};\n\n\t/**\n\t * Process a message from the $.I18N instance\n\t * for the current document, stored in jQuery.data(document).\n\t *\n\t * @param {string} key Key of the message.\n\t * @param {string} param1 [param...] Variadic list of parameters for {key}.\n\t * @return {string|$.I18N} Parsed message, or if no key was given\n\t * the instance of $.I18N is returned.\n\t */\n\t$.i18n = function ( key, param1 ) {\n\t\tvar parameters,\n\t\t\ti18n = $.data( document, 'i18n' ),\n\t\t\toptions = typeof key === 'object' && key;\n\n\t\t// If the locale option for this call is different then the setup so far,\n\t\t// update it automatically. This doesn't just change the context for this\n\t\t// call but for all future call as well.\n\t\t// If there is no i18n setup yet, don't do this. It will be taken care of\n\t\t// by the `new I18N` construction below.\n\t\t// NOTE: It should only change language for this one call.\n\t\t// Then cache instances of I18N somewhere.\n\t\tif ( options && options.locale && i18n && i18n.locale !== options.locale ) {\n\t\t\ti18n.locale = options.locale;\n\t\t}\n\n\t\tif ( !i18n ) {\n\t\t\ti18n = new I18N( options );\n\t\t\t$.data( document, 'i18n', i18n );\n\t\t}\n\n\t\tif ( typeof key === 'string' ) {\n\t\t\tif ( param1 !== undefined ) {\n\t\t\t\tparameters = slice.call( arguments, 1 );\n\t\t\t} else {\n\t\t\t\tparameters = [];\n\t\t\t}\n\n\t\t\treturn i18n.parse( key, parameters );\n\t\t} else {\n\t\t\t// FIXME: remove this feature/bug.\n\t\t\treturn i18n;\n\t\t}\n\t};\n\n\t$.fn.i18n = function () {\n\t\tvar i18n = $.data( document, 'i18n' );\n\n\t\tif ( !i18n ) {\n\t\t\ti18n = new I18N();\n\t\t\t$.data( document, 'i18n', i18n );\n\t\t}\n\n\t\treturn this.each( function () {\n\t\t\tvar $this = $( this ),\n\t\t\t\tmessageKey = $this.data( 'i18n' ),\n\t\t\t\tlBracket, rBracket, type, key;\n\n\t\t\tif ( messageKey ) {\n\t\t\t\tlBracket = messageKey.indexOf( '[' );\n\t\t\t\trBracket = messageKey.indexOf( ']' );\n\t\t\t\tif ( lBracket !== -1 && rBracket !== -1 && lBracket < rBracket ) {\n\t\t\t\t\ttype = messageKey.slice( lBracket + 1, rBracket );\n\t\t\t\t\tkey = messageKey.slice( rBracket + 1 );\n\t\t\t\t\tif ( type === 'html' ) {\n\t\t\t\t\t\t$this.html( i18n.parse( key ) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$this.attr( type, i18n.parse( key ) );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$this.text( i18n.parse( messageKey ) );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$this.find( '[data-i18n]' ).i18n();\n\t\t\t}\n\t\t} );\n\t};\n\n\tfunction getDefaultLocale() {\n\t\tvar nav, locale = $( 'html' ).attr( 'lang' );\n\n\t\tif ( !locale ) {\n\t\t\tif ( typeof window.navigator !== undefined ) {\n\t\t\t\tnav = window.navigator;\n\t\t\t\tlocale = nav.language || nav.userLanguage || '';\n\t\t\t} else {\n\t\t\t\tlocale = '';\n\t\t\t}\n\t\t}\n\t\treturn locale;\n\t}\n\n\t$.i18n.languages = {};\n\t$.i18n.messageStore = $.i18n.messageStore || {};\n\t$.i18n.parser = {\n\t\t// The default parser only handles variable substitution\n\t\tparse: function ( message, parameters ) {\n\t\t\treturn message.replace( /\\$(\\d+)/g, function ( str, match ) {\n\t\t\t\tvar index = parseInt( match, 10 ) - 1;\n\t\t\t\treturn parameters[ index ] !== undefined ? parameters[ index ] : '$' + match;\n\t\t\t} );\n\t\t},\n\t\temitter: {}\n\t};\n\t$.i18n.fallbacks = {};\n\t$.i18n.debug = false;\n\t$.i18n.log = function ( /* arguments */ ) {\n\t\tif ( window.console && $.i18n.debug ) {\n\t\t\twindow.console.log.apply( window.console, arguments );\n\t\t}\n\t};\n\t/* Static members */\n\tI18N.defaults = {\n\t\tlocale: getDefaultLocale(),\n\t\tfallbackLocale: 'en',\n\t\tparser: $.i18n.parser,\n\t\tmessageStore: $.i18n.messageStore\n\t};\n\n\t// Expose constructor\n\t$.i18n.constructor = I18N;\n}( jQuery ) );","/*!\n * jQuery idleTimer plugin\n * version 0.9.100511\n * by Paul Irish.\n *   http://github.com/paulirish/yui-misc/tree/\n * MIT license\n\n * adapted from YUI idle timer by nzakas:\n *   http://github.com/nzakas/yui-misc/\n*/\n/*\n * Copyright (c) 2009 Nicholas C. Zakas\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/* updated to fix Chrome setTimeout issue by Zaid Zawaideh */\n\n // API available in <= v0.8\n /*******************************\n\n // idleTimer() takes an optional argument that defines the idle timeout\n // timeout is in milliseconds; defaults to 30000\n $.idleTimer(10000);\n\n\n $(document).bind(\"idle.idleTimer\", function(){\n    // function you want to fire when the user goes idle\n });\n\n\n $(document).bind(\"active.idleTimer\", function(){\n  // function you want to fire when the user becomes active again\n });\n\n // pass the string 'destroy' to stop the timer\n $.idleTimer('destroy');\n\n // you can query if the user is idle or not with data()\n $.data(document,'idleTimer');  // 'idle'  or 'active'\n\n // you can get time elapsed since user when idle/active\n $.idleTimer('getElapsedTime'); // time since state change in ms\n\n ********/\n\n\n\n // API available in >= v0.9\n /*************************\n\n // bind to specific elements, allows for multiple timer instances\n $(elem).idleTimer(timeout|'destroy'|'getElapsedTime');\n $.data(elem,'idleTimer');  // 'idle'  or 'active'\n\n // if you're using the old $.idleTimer api, you should not do $(document).idleTimer(...)\n\n // element bound timers will only watch for events inside of them.\n // you may just want page-level activity, in which case you may set up\n //   your timers on document, document.documentElement, and document.body\n\n // You can optionally provide a second argument to override certain options.\n // Here are the defaults, so you can omit any or all of them.\n $(elem).idleTimer(timeout, {\n   startImmediately: true, //starts a timeout as soon as the timer is set up; otherwise it waits for the first event.\n   idle:    false,         //indicates if the user is idle\n   enabled: true,          //indicates if the idle timer is enabled\n   events:  'mousemove keydown DOMMouseScroll mousewheel mousedown touchstart touchmove' // activity is one of these events\n });\n\n ********/\n\n(function($){\n\n$.idleTimer = function(newTimeout, elem, opts){\n\n    // defaults that are to be stored as instance props on the elem\n\n\topts = $.extend({\n\t\tstartImmediately: true, //starts a timeout as soon as the timer is set up\n\t\tidle:    false,         //indicates if the user is idle\n\t\tenabled: true,          //indicates if the idle timer is enabled\n\t\ttimeout: 30000,         //the amount of time (ms) before the user is considered idle\n\t\tevents:  'mousemove keydown DOMMouseScroll mousewheel mousedown touchstart touchmove' // activity is one of these events\n\t}, opts);\n\n\n    elem = elem || document;\n\n    /* (intentionally not documented)\n     * Toggles the idle state and fires an appropriate event.\n     * @return {void}\n     */\n    var toggleIdleState = function(myelem){\n\n        // curse you, mozilla setTimeout lateness bug!\n        if (typeof myelem === 'number'){\n            myelem = undefined;\n        }\n\n        var obj = $.data(myelem || elem,'idleTimerObj');\n\n        //toggle the state\n        obj.idle = !obj.idle;\n\n        // reset timeout \n        var elapsed = (+new Date()) - obj.olddate;\n        obj.olddate = +new Date();\n\n        // handle Chrome always triggering idle after js alert or comfirm popup\n        if (obj.idle && (elapsed < opts.timeout)) {\n                obj.idle = false;\n                clearTimeout($.idleTimer.tId);\n                if (opts.enabled)\n                  $.idleTimer.tId = setTimeout(toggleIdleState, opts.timeout);\n                return;\n        }\n        \n        //fire appropriate event\n\n        // create a custom event, but first, store the new state on the element\n        // and then append that string to a namespace\n        var event = jQuery.Event( $.data(elem,'idleTimer', obj.idle ? \"idle\" : \"active\" )  + '.idleTimer'   );\n\n        // we do want this to bubble, at least as a temporary fix for jQuery 1.7\n        // event.stopPropagation();\n        $(elem).trigger(event);\n    },\n\n    /**\n     * Stops the idle timer. This removes appropriate event handlers\n     * and cancels any pending timeouts.\n     * @return {void}\n     * @method stop\n     * @static\n     */\n    stop = function(elem){\n\n        var obj = $.data(elem,'idleTimerObj') || {};\n\n        //set to disabled\n        obj.enabled = false;\n\n        //clear any pending timeouts\n        clearTimeout(obj.tId);\n\n        //detach the event handlers\n        $(elem).off('.idleTimer');\n    },\n\n\n    /* (intentionally not documented)\n     * Handles a user event indicating that the user isn't idle.\n     * @param {Event} event A DOM2-normalized event object.\n     * @return {void}\n     */\n    handleUserEvent = function(){\n\n        var obj = $.data(this,'idleTimerObj');\n\n        //clear any existing timeout\n        clearTimeout(obj.tId);\n\n\n\n        //if the idle timer is enabled\n        if (obj.enabled){\n\n\n            //if it's idle, that means the user is no longer idle\n            if (obj.idle){\n                toggleIdleState(this);\n            }\n\n            //set a new timeout\n            obj.tId = setTimeout(toggleIdleState, obj.timeout);\n\n        }\n     };\n\n\n    /**\n     * Starts the idle timer. This adds appropriate event handlers\n     * and starts the first timeout.\n     * @param {int} newTimeout (Optional) A new value for the timeout period in ms.\n     * @return {void}\n     * @method $.idleTimer\n     * @static\n     */\n\n\n    var obj = $.data(elem,'idleTimerObj') || {};\n\n    obj.olddate = obj.olddate || +new Date();\n\n    //assign a new timeout if necessary\n    if (typeof newTimeout === \"number\"){\n        opts.timeout = newTimeout;\n    } else if (newTimeout === 'destroy') {\n        stop(elem);\n        return this;\n    } else if (newTimeout === 'getElapsedTime'){\n        return (+new Date()) - obj.olddate;\n    }\n\n    //assign appropriate event handlers\n    $(elem).on($.trim((opts.events+' ').split(' ').join('.idleTimer ')),handleUserEvent);\n\n\n    obj.idle    = opts.idle;\n    obj.enabled = opts.enabled;\n    obj.timeout = opts.timeout;\n\n\n    //set a timeout to toggle state. May wish to omit this in some situations\n\tif (opts.startImmediately) {\n\t    obj.tId = setTimeout(toggleIdleState, obj.timeout);\n\t}\n\n    // assume the user is active for the first x seconds.\n    $.data(elem,'idleTimer',\"active\");\n\n    // store our instance on the object\n    $.data(elem,'idleTimerObj',obj);\n\n\n\n}; // end of $.idleTimer()\n\n\n// v0.9 API for defining multiple timers.\n$.fn.idleTimer = function(newTimeout,opts){\n\t// Allow omission of opts for backward compatibility\n\tif (!opts) {\n\t\topts = {};\n\t}\n\n    if(this[0]){\n        $.idleTimer(newTimeout,this[0],opts);\n    }\n\n    return this;\n};\n\n\n})(jQuery);\n","/*global variable declarations*/\n\n\"use strict\";\n\nimport \"../css/user-highlights.css\";\n\nfunction getCompletions() {\n    // Get the completion status\n    if (\n        window.location.href.match(\n            /(\\/index.html|toctree.html|genindex.html|navhelp.html|toc.html|assignments.html|Exercises.html)/\n        )\n    ) {\n        return;\n    }\n\n    var currentPathname = window.location.pathname;\n    if (currentPathname.indexOf(\"?\") !== -1) {\n        currentPathname = currentPathname.substring(\n            0,\n            currentPathname.lastIndexOf(\"?\")\n        );\n    }\n    var data = {\n        lastPageUrl: currentPathname,\n        isPtxBook: isPreTeXt(),\n    };\n    jQuery\n        .ajax({\n            url: `${eBookConfig.new_server_prefix}/logger/getCompletionStatus`,\n            data: data,\n            async: false,\n        })\n        .done(function (data) {\n            if (data != \"None\") {\n                var completionData = data.detail;\n                var completionClass, completionMsg;\n                if (completionData[0].completionStatus == 1) {\n                    completionClass = \"buttonConfirmCompletion\";\n                    completionMsg =\n                        \"<i class='glyphicon glyphicon-ok'></i> Completed. Well Done!\";\n                } else {\n                    completionClass = \"buttonAskCompletion\";\n                    completionMsg = \"Mark as Completed\";\n                }\n                let scp = document.querySelector(\"#scprogresscontainer\");\n                if (scp) {\n                    scp.classList.add(\"ptx-runestone-container\");\n                }\n                $(\"#scprogresscontainer\").append(\n                    '<div style=\"text-align:center\"><button class=\"btn btn-lg ' +\n                    completionClass +\n                    '\" id=\"completionButton\">' +\n                    completionMsg +\n                    \"</button></div>\"\n                );\n            }\n        });\n}\n\nfunction showLastPositionBanner() {\n    var lastPositionVal = $.getUrlVar(\"lastPosition\");\n    if (typeof lastPositionVal !== \"undefined\") {\n        $(\"body\").append(\n            '<img src=\"../_static/last-point.png\" style=\"position:absolute; padding-top:55px; left: 10px; top: ' +\n            parseInt(lastPositionVal) +\n            'px;\"/>'\n        );\n        $(\"html, body\").animate({ scrollTop: parseInt(lastPositionVal) }, 1000);\n    }\n}\n\nfunction addNavigationAndCompletionButtons() {\n    if (\n        window.location.href.match(\n            /(index.html|genindex.html|navhelp.html|toc.html|assignments.html|Exercises.html|toctree.html)/\n        )\n    ) {\n        return;\n    }\n    var navLinkBgRightHiddenPosition = -$(\"#navLinkBgRight\").outerWidth() - 5;\n    var navLinkBgRightHalfOpen;\n    var navLinkBgRightFullOpen = 0;\n\n    if ($(\"#completionButton\").hasClass(\"buttonAskCompletion\")) {\n        navLinkBgRightHalfOpen = navLinkBgRightHiddenPosition + 70;\n    } else if ($(\"#completionButton\").hasClass(\"buttonConfirmCompletion\")) {\n        navLinkBgRightHalfOpen = 0;\n    }\n    var relationsNextIconInitialPosition = $(\"#relations-next\").css(\"right\");\n    var relationsNextIconNewPosition = -(navLinkBgRightHiddenPosition + 35);\n\n    $(\"#navLinkBgRight\").css(\"right\", navLinkBgRightHiddenPosition).show();\n    var navBgShown = false;\n    $(window).scroll(function () {\n        if (\n            $(window).scrollTop() + $(window).height() ==\n            $(document).height()\n        ) {\n            $(\"#navLinkBgRight\").animate(\n                { right: navLinkBgRightHalfOpen },\n                200\n            );\n            $(\"#navLinkBgLeft\").animate({ left: \"0px\" }, 200);\n            if ($(\"#completionButton\").hasClass(\"buttonConfirmCompletion\")) {\n                $(\"#relations-next\").animate(\n                    { right: relationsNextIconNewPosition },\n                    200\n                );\n            }\n            navBgShown = true;\n        } else if (navBgShown) {\n            $(\"#navLinkBgRight\").animate(\n                { right: navLinkBgRightHiddenPosition },\n                200\n            );\n            $(\"#navLinkBgLeft\").animate({ left: \"-65px\" }, 200);\n            $(\"#relations-next\").animate({\n                right: relationsNextIconInitialPosition,\n            });\n            navBgShown = false;\n        }\n    });\n\n    var completionFlag = 0;\n    if ($(\"#completionButton\").hasClass(\"buttonAskCompletion\")) {\n        completionFlag = 0;\n    } else {\n        completionFlag = 1;\n    }\n    // Make sure we mark this page as visited regardless of how flakey\n    // the onunload handlers become.\n    processPageState(completionFlag, true, false, false);\n    $(\"#completionButton\").on(\"click\", function () {\n        var markingComplete = false;\n        var markingIncomplete = false;\n        if ($(this).hasClass(\"buttonAskCompletion\")) {\n            $(this)\n                .removeClass(\"buttonAskCompletion\")\n                .addClass(\"buttonConfirmCompletion\")\n                .html(\n                    \"<i class='glyphicon glyphicon-ok'></i> Completed. Well Done!\"\n                );\n            $(\"#navLinkBgRight\").animate({ right: navLinkBgRightFullOpen });\n            $(\"#relations-next\").animate({\n                right: relationsNextIconNewPosition,\n            });\n            navLinkBgRightHalfOpen = 0;\n            completionFlag = 1;\n            markingComplete = true;\n        } else if ($(this).hasClass(\"buttonConfirmCompletion\")) {\n            $(this)\n                .removeClass(\"buttonConfirmCompletion\")\n                .addClass(\"buttonAskCompletion\")\n                .html(\"Mark as Completed\");\n            navLinkBgRightHalfOpen = navLinkBgRightHiddenPosition + 70;\n            $(\"#navLinkBgRight\").animate({ right: navLinkBgRightHalfOpen });\n            $(\"#relations-next\").animate({\n                right: relationsNextIconInitialPosition,\n            });\n            completionFlag = 0;\n            markingIncomplete = true;\n        }\n        processPageState(\n            completionFlag,\n            false,\n            markingComplete,\n            markingIncomplete\n        );\n    });\n\n    // we cannot afford to do this at both load and unload especially as users\n    // go from page to page. This just doubles the load.  So, try without this one.\n    // $(window).on(\"beforeunload\", function (e) {\n    //     if (completionFlag == 0) {\n    //         processPageState(completionFlag, false, false, false);\n    //     }\n    // });\n}\n\n// _ decorateTableOfContents\n// -------------------------\nfunction decorateTableOfContents() {\n    if (\n        window.location.href.toLowerCase().indexOf(\"toc.html\") != -1 ||\n        window.location.href.toLowerCase().indexOf(\"index.html\") != -1 ||\n        window.location.href.toLowerCase().indexOf(\"frontmatter\") != -1\n    ) {\n        if (!isPreTeXt()) {\n            jQuery.get(\n                `${eBookConfig.new_server_prefix}/logger/getAllCompletionStatus`,\n                function (data) {\n                    var subChapterList;\n                    if (data != \"None\") {\n                        subChapterList = data.detail;\n\n                        var allSubChapterURLs = $(\"#main-content div li a\");\n                        $.each(subChapterList, function (index, item) {\n                            for (var s = 0; s < allSubChapterURLs.length; s++) {\n                                if (\n                                    allSubChapterURLs[s].href.indexOf(\n                                        item.chapterName +\n                                        \"/\" +\n                                        item.subChapterName\n                                    ) != -1\n                                ) {\n                                    if (item.completionStatus == 1) {\n                                        $(allSubChapterURLs[s].parentElement)\n                                            .addClass(\"completed\")\n                                            .append(\n                                                '<span class=\"infoTextCompleted\">- Completed this topic on ' +\n                                                item.endDate +\n                                                \"</span>\"\n                                            )\n                                            .children()\n                                            .first()\n                                            .hover(\n                                                function () {\n                                                    $(this)\n                                                        .next(\n                                                            \".infoTextCompleted\"\n                                                        )\n                                                        .show();\n                                                },\n                                                function () {\n                                                    $(this)\n                                                        .next(\n                                                            \".infoTextCompleted\"\n                                                        )\n                                                        .hide();\n                                                }\n                                            );\n                                    } else if (item.completionStatus == 0) {\n                                        $(allSubChapterURLs[s].parentElement)\n                                            .addClass(\"active\")\n                                            .append(\n                                                '<span class=\"infoTextActive\">Last read this topic on ' +\n                                                item.endDate +\n                                                \"</span>\"\n                                            )\n                                            .children()\n                                            .first()\n                                            .hover(\n                                                function () {\n                                                    $(this)\n                                                        .next(\".infoTextActive\")\n                                                        .show();\n                                                },\n                                                function () {\n                                                    $(this)\n                                                        .next(\".infoTextActive\")\n                                                        .hide();\n                                                }\n                                            );\n                                    }\n                                }\n                            }\n                        });\n                    }\n                }\n            );\n        }\n        var data = { course: eBookConfig.course };\n        jQuery.get(\n            `${eBookConfig.new_server_prefix}/logger/getlastpage`,\n            data,\n            function (data) {\n                var lastPageData;\n                if (data != \"None\") {\n                    lastPageData = data.detail;\n                    if (lastPageData.lastPageChapter != null) {\n                        $(\"#continue-reading\")\n                            .show()\n                            .html(\n                                '<div id=\"jump-to-chapter\" class=\"alert alert-info\" ><strong>You were Last Reading:</strong> ' +\n                                lastPageData.lastPageChapter +\n                                (lastPageData.lastPageSubchapter\n                                    ? \" &gt; \" +\n                                    lastPageData.lastPageSubchapter\n                                    : \"\") +\n                                ' <a href=\"' +\n                                lastPageData.lastPageUrl +\n                                \"?lastPosition=\" +\n                                lastPageData.lastPageScrollLocation +\n                                '\">Continue Reading</a></div>'\n                            );\n                    }\n                }\n            }\n        );\n    }\n}\n\nfunction enableCompletions() {\n    getCompletions();\n    showLastPositionBanner();\n    addNavigationAndCompletionButtons();\n    decorateTableOfContents();\n}\n\n// call enable user highlights after login\n$(document).on(\"runestone:login\", enableCompletions);\n\nfunction isPreTeXt() {\n    let ptxMarker = document.querySelector(\"body.pretext\");\n    if (ptxMarker) {\n        return true;\n    } else {\n        return false;\n    }\n}\n// _ processPageState\n// -------------------------\nfunction processPageState(\n    completionFlag,\n    pageLoad,\n    markingComplete,\n    markingIncomplete\n) {\n    /*Log last page visited*/\n    var currentPathname = window.location.pathname;\n    if (currentPathname.indexOf(\"?\") !== -1) {\n        currentPathname = currentPathname.substring(\n            0,\n            currentPathname.lastIndexOf(\"?\")\n        );\n    }\n    // Is this a ptx book?\n    let isPtxBook = isPreTeXt();\n    var data = {\n        lastPageUrl: currentPathname,\n        lastPageScrollLocation: Math.round($(window).scrollTop()),\n        completionFlag: completionFlag,\n        pageLoad: pageLoad,\n        markingComplete: markingComplete,\n        markingIncomplete: markingIncomplete,\n        course: eBookConfig.course,\n        isPtxBook: isPtxBook,\n    };\n    $(document).ajaxError(function (e, jqhxr, settings, exception) {\n        console.log(\"Request Failed for \" + settings.url);\n        console.log(e);\n    });\n    jQuery.ajax({\n        url: `${eBookConfig.new_server_prefix}/logger/updatelastpage`,\n        contentType: \"application/json; charset=utf-8\",\n        dataType: \"json\",\n        data: JSON.stringify(data),\n        method: \"POST\",\n        async: true,\n    });\n}\n\n$.extend({\n    getUrlVars: function () {\n        var vars = [],\n            hash;\n        var hashes = window.location.search\n            .slice(window.location.search.indexOf(\"?\") + 1)\n            .split(\"&\");\n        for (var i = 0; i < hashes.length; i++) {\n            hash = hashes[i].split(\"=\");\n            vars.push(hash[0]);\n            vars[hash[0]] = hash[1];\n        }\n        return vars;\n    },\n    getUrlVar: function (name) {\n        return $.getUrlVars()[name];\n    },\n});\n","/*\n    Support functions for PreTeXt books running on Runestone\n\n*/\n\nimport RunestoneBase from \"./runestonebase.js\";\n\nfunction setupPTXEvents() {\n    let rb = new RunestoneBase();\n    // log an event when a knowl is opened.\n    document.querySelectorAll(\"[data-knowl]\").forEach((el) => {\n        el.addEventListener(\"click\", function () {\n            let div_id = el.getAttribute(\"data-knowl\");\n            rb.logBookEvent({ event: \"knowl\", act: \"click\", div_id: div_id });\n        });\n    });\n    let born_hidden = document.querySelectorAll(\"details.born-hidden-knowl\");\n    born_hidden.forEach((el) => {\n        // log an event when a knowl is opened that was born hidden\n        el.addEventListener(\"toggle\", function () {\n            if (el.open) {\n                let div_id = el.id;\n                rb.logBookEvent({ event: \"knowl\", act: \"open\", div_id: div_id });\n            }\n        });\n    });\n    // log an event when a sage cell is evaluated\n    document.querySelectorAll(\".sagecell_evalButton\").forEach((btn) => {\n        btn.addEventListener(\"click\", function () {\n            let container = btn.closest(\".ptx-sagecell\");\n            let codeInput = container ? container.querySelector(\".sagecell_input\") : null;\n            let code = codeInput ? codeInput.textContent : \"\";\n            let div_id = container ? container.id : null;\n            if (! div_id) {\n                console.warn(\"Could not find container or div_id for sagecell button\");\n                return;\n                }\n\n            rb.logBookEvent({ event: \"sage\", act: \"run\", div_id: div_id });\n        });\n    });\n    if (typeof eBookConfig !== \"undefined\" && !eBookConfig.isInstructor) {\n        document.querySelectorAll(\".commentary\").forEach((el) => {\n            el.style.display = \"none\";\n        });\n    }\n}\n\nwindow.addEventListener(\"load\", function () {\n    console.log(\"setting up pretext\");\n    setupPTXEvents();\n    let wrap = document.getElementById(\"primary-navbar-sticky-wrapper\");\n    if (wrap) {\n        wrap.style.overflow = \"visible\";\n    }\n});\n","import RunestoneBase from \"../../common/js/runestonebase.js\";\n\nexport class SpliceWrapper extends RunestoneBase {\n    constructor() {\n        super();\n        this.initSplice();\n    }\n\n    initSplice() {\n        // SPLICE Events\n        window.addEventListener(\"message\", async (event) => {\n            \n            var sourceIframe = this.sendingIframe(event);\n            console.log(`SpliceWrapper: received message subject: ${event.data.subject} from iframe: ${sourceIframe ? sourceIframe.id : \"unknown\"}`);\n            if (event.data.subject == \"SPLICE.reportScoreAndState\") {\n                this.handleScoreAndState(event, sourceIframe);\n            } else if (event.data.subject == \"SPLICE.sendEvent\") {\n                this.handleSpliceEvent(event, sourceIframe);\n            } else if (event.data.subject == \"SPLICE.getState\") {\n                await this.handleGetState(event, sourceIframe);\n            } else if (\n                event.origin === \"https://www.myopenmath.com\" &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(\"lti.ext.imathas.result\") != -1\n            ) {\n                // proof of concept for My Open Math\n                let msgdata = JSON.parse(event.data);\n                let jwt = basicParseJwt(msgdata.jwt);\n                console.log(\n                    \"Result received from frame \" +\n                        msgdata.frame_id +\n                        \" with score \" +\n                        jwt.score\n                );\n                // todo send score to server\n                // does MOM have a way to get the state?\n                // todo send state to server\n            }\n        });\n    }\n\n    getUniqueID(event, frame) {\n        // Determine the unique identifier for this activity\n        // The SPLICE protocol allows for two possibilities\n        // 1. activity_id is the unique id as assigned by the provider\n        // 2. activity_id is the iframe src url\n        // if the activity_id is set there may also be another attribute called domain\n        // On Runestone we will try to map the activity to the div_id of the enclosing RS component\n        // if possible, otherwise we will use the activity_id or iframe src\n        // If an interactive is included in an exercises this allows us to map the score\n        // to the id the instructor used to assign the problem.\n        if (frame) {\n            let rsDiv = frame.closest(\"[data-component]\");\n            if (rsDiv) {\n                return rsDiv.id;\n            }\n        }\n        let location = event.data.activity_id;\n        if (!location) {\n            if (frame) {\n                location = frame.src;\n            } else {\n                location = \"unknown\";\n                console.error(\n                    \"Could not find iframe that sent the SPLICE event\"\n                );\n            }\n        }\n        return location;\n    }\n\n    handleScoreAndState(event, frame) {\n        console.log(\"Got SPLICE.reportScoreAndState\");\n        console.log(event.data.activity_id);\n        console.log(event.data.score);\n        console.log(event.data.state);\n        let location = this.getUniqueID(event, frame);\n        this.logBookEvent({\n            event: event.data.subject,\n            div_id: location,\n            act: `score: ${event.data.score}`,\n            score: event.data.score,\n            percent: event.data.score,\n            correct: event.data.score == 1.0 ? true : false,\n            answer: JSON.stringify(event.data.state),\n        });\n    }\n\n    sendingIframe(event) {\n        // determine the iframe that sent the event\n        // you would think that event.source would be the iframe\n        // but it is not and getting the location out of event.source\n        // creates CORS issues.\n        for (const f of document.getElementsByTagName(\"iframe\")) {\n            if (f.contentWindow === event.source) return f;\n        }\n        return undefined;\n    }\n\n    async getSavedState(location) {\n        // fetch the state from the server\n        try {\n            const response = await fetch(\"/ns/assessment/results\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                },\n                body: JSON.stringify({\n                    div_id: location,\n                    course: eBookConfig.course,\n                    event: \"SPLICE.getState\",\n                }),\n            });\n            if (!response.ok) {\n                throw new Error(`HTTP error! status: ${response.status}`);\n            }\n            const data = await response.json();\n            return data;\n        } catch (error) {\n            console.error(\"Error fetching SPLICE state:\", error);\n            return null;\n        }\n    }\n\n    async handleGetState(event, frame) {\n        console.log(\"Got SPLICE.getState\");\n        console.log(event.data.activity_id);\n        console.log(event.data.state);\n        // subject is SPLICE.getState.response\n        let location = this.getUniqueID(event, frame);\n        let res = await this.getSavedState(location);\n        let state = res.detail.answer;\n        event.source.postMessage(\n            {\n                message_id: event.data.message_id,\n                subject: \"SPLICE.getState.response\",\n                state: state,\n            },\n            \"*\"\n        );\n    }\n\n    handleSpliceEvent(event, frame) {\n        // handle generic SPLICE events, such as logged clicks\n        // or other events.  SPLICE does not require that we do\n        // anything with them, but in keeping with our tradition\n        // we will save them to the useinfo table in the database\n        // in case they prove to be useful for research later\n        console.log(\"Got SPLICE.sendEvent\");\n        console.log(event.data.activity_id);\n        console.log(event.data.name);\n        //console.log(event.data.data);\n        let location = this.getUniqueID(event, frame);\n        this.logBookEvent({\n            event: event.data.subject,\n            div_id: location,\n            act: event.data.name || \"unknown\",\n        });\n    }\n    // these stubs are not implemented, but are required by the RunestoneBase class\n    checkLocalStorage() {}\n    setLocalStorage() {}\n    restoreAnswers() {}\n    disableInteraction() {}\n}\n\nfunction basicParseJwt(token) {\n    var base64Url = token.split(\".\")[1];\n    var base64 = base64Url.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    var jsonPayload = decodeURIComponent(\n        window\n            .atob(base64)\n            .split(\"\")\n            .map(function (c) {\n                return \"%\" + (\"00\" + c.charCodeAt(0).toString(16)).slice(-2);\n            })\n            .join(\"\")\n    );\n    return JSON.parse(jsonPayload);\n}\n","// ***********************************************************************************\n// |docname| - A framework allowing a Runestone component to load only the JS it needs\n// ***********************************************************************************\n// The JavaScript required by all Runestone components is quite large and results in slow page loads. This approach enables a Runestone component to load only the JavaScript it needs, rather than loading JavaScript for all the components regardless of which are actually used.\n//\n// To accomplish this, webpack's split-chunks ability analyzes all JS, starting from this file. The dynamic imports below are transformed by webpack into the dynamic fetches of just the JS required by each file and all its dependencies. (If using static imports, webpack will assume that all files are already statically loaded via script tags, defeating the purpose of this framework.)\n//\n// However, this approach leads to complexity:\n//\n// -    The ``data-component`` attribute of each component must be kept in sync with the keys of the ``module_map`` below.\n// -    The values in the ``module_map`` must be kept in sync with the JavaScript files which implement each of the components.\n\n// Static imports\n// ==============\n// These imports are (we assume) needed by all pages. However, it would be much better to load these in the modules that actually use them.\n//\n// These are static imports; code in `dynamically loaded components`_ deals with dynamic imports.\n//\n// jQuery-related imports.\nimport \"jquery-ui/jquery-ui.js\";\nimport \"jquery-ui/themes/base/jquery.ui.all.css\";\nimport \"./runestone/common/js/jquery.idle-timer.js\";\nimport \"./runestone/common/js/jquery_i18n/jquery.i18n.js\";\nimport \"./runestone/common/js/jquery_i18n/jquery.i18n.emitter.bidi.js\";\nimport \"./runestone/common/js/jquery_i18n/jquery.i18n.emitter.js\";\nimport \"./runestone/common/js/jquery_i18n/jquery.i18n.fallbacks.js\";\nimport \"./runestone/common/js/jquery_i18n/jquery.i18n.messagestore.js\";\nimport \"./runestone/common/js/jquery_i18n/jquery.i18n.parser.js\";\nimport \"./runestone/common/js/jquery_i18n/jquery.i18n.language.js\";\n\n// Bootstrap - not needed for pxx development\nimport \"bootstrap/dist/js/bootstrap.js\";\n\n// common styles come from here\nimport \"./ptxrs-bootstrap.less\";\nimport \"./runestone/common/project_template/_templates/plugin_layouts/sphinx_bootstrap/static/bootstrap-sphinx.js\";\n\n// Misc\nimport \"./runestone/common/js/bookfuncs.js\";\nimport \"./runestone/common/js/user-highlights.js\";\nimport \"./runestone/common/js/pretext.js\";\n\n// These belong in dynamic imports for the obvious component; however, these components don't include a ``data-component`` attribute.\nimport \"./runestone/matrixeq/css/matrixeq.css\";\nimport \"./runestone/webgldemo/css/webglinteractive.css\";\n\n// These are only needed for the Runestone book, but not in a library mode (such as pretext). I would prefer to dynamically load them. However, these scripts are so small I haven't bothered to do so.\nimport { getSwitch, switchTheme } from \"./runestone/common/js/theme.js\";\nimport \"./runestone/common/js/presenter_mode.js\";\nimport \"./runestone/common/css/presenter_mode.less\";\nimport { renderOneComponent } from \"./runestone/common/js/renderComponent.js\";\nimport RunestoneBase from \"./runestone/common/js/runestonebase.js\";\nimport { SpliceWrapper } from \"./runestone/splice/js/spliceWrapper.js\";\n\n// Dynamically loaded components\n// =============================\n// This provides a list of modules that components can dynamically import. Webpack will create a list of imports for each based on its analysis.\nconst module_map = {\n    // Wrap each import in a function, so that it won't occur until the function is called. While something cleaner would be nice, webpack can't analyze things like ``import(expression)``.\n    //\n    // The keys must match the value of each component's ``data-component`` attribute -- the ``runestone_import`` and ``runestone_auto_import`` functions assume this.\n    activecode: () => import(\"./runestone/activecode/js/acfactory.js\"),\n    ble: () => import(\"./runestone/cellbotics/js/ble.js\"),\n    // Always import the timed version of a component if available, since the timed components also define the component's factory and include the component as well. Note that ``acfactory`` imports the timed components of ActiveCode, so it follows this pattern.\n    clickablearea: () =>\n        import(\"./runestone/clickableArea/js/timedclickable.js\"),\n    codelens: () => import(\"./runestone/codelens/js/codelens.js\"),\n    datafile: () => import(\"./runestone/datafile/js/datafile.js\"),\n    dragndrop: () => import(\"./runestone/dragndrop/js/timeddnd.js\"),\n    fillintheblank: () => import(\"./runestone/fitb/js/timedfitb.js\"),\n    groupsub: () => import(\"./runestone/groupsub/js/groupsub.js\"),\n    khanex: () => import(\"./runestone/khanex/js/khanex.js\"),\n    lp_build: () => import(\"./runestone/lp/js/lp.js\"),\n    matching: () => import(\"./runestone/matching/js/matching.js\"),\n    multiplechoice: () => import(\"./runestone/mchoice/js/timedmc.js\"),\n    hparsons: () => import(\"./runestone/hparsons/js/hparsons.js\"),\n    parsons: () => import(\"./runestone/parsons/js/timedparsons.js\"),\n    poll: () => import(\"./runestone/poll/js/poll.js\"),\n    quizly: () => import(\"./runestone/quizly/js/quizly.js\"),\n    reveal: () => import(\"./runestone/reveal/js/reveal.js\"),\n    selectquestion: () => import(\"./runestone/selectquestion/js/selectone.js\"),\n    shortanswer: () =>\n        import(\"./runestone/shortanswer/js/timed_shortanswer.js\"),\n    showeval: () => import(\"./runestone/showeval/js/showEval.js\"),\n    simple_sensor: () => import(\"./runestone/cellbotics/js/simple_sensor.js\"),\n    spreadsheet: () => import(\"./runestone/spreadsheet/js/spreadsheet.js\"),\n    tabbedStuff: () => import(\"./runestone/tabbedStuff/js/tabbedstuff.js\"),\n    timedAssessment: () => import(\"./runestone/timed/js/timed.js\"),\n    wavedrom: () => import(\"./runestone/wavedrom/js/wavedrom.js\"),\n    // TODO: since this isn't in a ``data-component``, need to trigger an import of this code manually.\n    webwork: () => import(\"./runestone/webwork/js/webwork.js\"),\n    youtube: () => import(\"./runestone/video/js/runestonevideo.js\"),\n    doenet: () => Promise.resolve(), // Doenet is loaded separately\n};\n\nconst module_map_cache = {};\nconst QUEUE_FLUSH_TIME_MS = 10;\nconst queue = [];\nlet queueLastFlush = 0;\n/**\n * Queue imports that are requested within `QUEUE_FLUSH_TIME_MS` of each other.\n * All such imports are imported at once, and then a promise is fired after all\n * the imports in the queue window have completed.\n */\nfunction queueImport(component_name) {\n    let resolve = null;\n    let reject = null;\n    const retPromise = new Promise((r, rej) => {\n        resolve = r;\n        reject = rej;\n    });\n    const item = { component_name, resolve, reject };\n    queue.push(item);\n    window.setTimeout(flushQueue, QUEUE_FLUSH_TIME_MS + 1);\n\n    return retPromise;\n}\nasync function flushQueue() {\n    if (queue.length === 0) {\n        return;\n    }\n    if (Date.now() - queueLastFlush < QUEUE_FLUSH_TIME_MS) {\n        window.setTimeout(flushQueue, QUEUE_FLUSH_TIME_MS + 1);\n        return;\n    }\n    // If we made it here, it has been at least QUEUE_FLUSH_TIME_MS since\n    // the last time we flushed the queue. Therefore, we should start flushing.\n    // We copy everything we flush and empty the array first.\n    queueLastFlush = Date.now();\n    const toFlush = [...queue];\n    queue.length = 0;\n    console.log(\n        \"Webpack is starting the loading process for the following Runestone modules\",\n        toFlush.map((item) => item.component_name)\n    );\n    const flushedPromise = toFlush.map(async (item) => {\n        try {\n            await module_map[item.component_name]();\n            console.log(\n                `Runestone component ${item.component_name} has been loaded`\n            );\n            return item;\n        } catch (e) {\n            item.reject(e);\n        }\n    });\n    const flushed = await Promise.all(flushedPromise);\n    try {\n        flushed.forEach(function (item) {\n            if (item) {\n                item.resolve();\n            }\n        });\n    } catch (e) {\n        console.error(e);\n    }\n}\n\n// .. _dynamic import machinery:\n//\n// Dynamic import machinery\n// ========================\n// Fulfill a promise when the Runestone pre-login complete event occurs.\nlet pre_login_complete_promise = new Promise((resolve) =>\n    $(document).on(\"runestone:pre-login-complete\", resolve)\n);\nlet loadedComponents;\n// Provide a simple function to import the JS for all components on the page.\nexport function runestone_auto_import() {\n    // Create a set of ``data-component`` values, to avoid duplication.\n    const s = new Set(\n        // All Runestone components have a ``data-component`` attribute.\n        $(\"[data-component]\")\n            .map(\n                // Extract the value of the data-component attribute.\n                (index, element) => $(element).attr(\"data-component\")\n                // Switch from a jQuery object back to an array, passing that to the Set constructor.\n            )\n            .get()\n    );\n    // webwork questions are not wrapped in div with a data-component so we have to check a different way\n    if (document.querySelector(\".webwork-button\")) {\n        s.add(\"webwork\");\n    }\n\n    // Load JS for each of the components found.\n    const a = [...s].map((value) => {\n        let z;\n        console.log(`Loading Runestone component: ${value}`);\n        try {\n            z = (module_map[value] || (() => Promise.resolve()))();\n        } catch (e) {\n            console.error(`Error loading ${value}:`, e);\n        }\n        z.error = (msg) => console.error(`Error in ${value}:`, msg);\n        return z;\n    });\n\n    // Send the Runestone login complete event when all JS is loaded and the pre-login is also complete.\n    Promise.all([pre_login_complete_promise, ...a]).then(function () {\n        if (!document.body.dataset.reactInUse) {\n            document.dispatchEvent(new CustomEvent(\"runestone:login-complete\"));\n        }\n    });\n}\n\npre_login_complete_promise.then(() => {\n    console.log(\"Runestone pre-login complete\");\n});\n\n// Load component JS when the document is ready.\n$(document).ready(runestone_auto_import);\n\n// Provide a function to import one specific `Runestone` component.\n// the import function inside module_map is async -- runestone_import\n// should be awaited when necessary to ensure the import completes\nexport async function runestone_import(component_name) {\n    if (module_map_cache[component_name]) {\n        return module_map_cache[component_name];\n    }\n    console.log(\n        `Runestone component ${component_name} is being queued for import`\n    );\n    const promise = queueImport(component_name);\n    module_map_cache[component_name] = promise;\n    return promise;\n}\n\nasync function popupScratchAC() {\n    // load the activecode bundle\n    await runestone_import(\"activecode\");\n    // scratchDiv will be defined if we have already created a scratch\n    // activecode.  If its not defined then we need to get it ready to toggle\n    if (!eBookConfig.scratchDiv) {\n        window.ACFactory.createScratchActivecode();\n        let divid = eBookConfig.scratchDiv;\n        window.componentMap[divid] = ACFactory.createActiveCode(\n            $(`#${divid}`)[0],\n            eBookConfig.acDefaultLanguage\n        );\n        if (eBookConfig.isLoggedIn) {\n            window.componentMap[divid].enableSaveLoad();\n        }\n    }\n    setTimeout(() => {\n        window.ACFactory.toggleScratchActivecode();\n    }, 100);\n}\n\n// Set the directory containing this script as the `path <https://webpack.js.org/guides/public-path/#on-the-fly>`_ for all webpacked scripts.\nconst script_src = document.currentScript.src;\n__webpack_public_path__ = script_src.substring(\n    0,\n    script_src.lastIndexOf(\"/\") + 1\n);\n\nvar splice = new SpliceWrapper();\n\n// Manual exports\n// ==============\n// Webpack's ``output.library`` setting doesn't seem to work with the split chunks plugin; do all exports manually through the ``window`` object instead.\n\nconst rc = {};\nrc.runestone_import = runestone_import;\nrc.runestone_auto_import = runestone_auto_import;\nrc.getSwitch = getSwitch;\nrc.switchTheme = switchTheme;\nrc.popupScratchAC = popupScratchAC;\nrc.renderOneComponent = renderOneComponent;\nwindow.componentMap = {};\nwindow.runestoneComponents = rc;\n","export function getSwitch() {\n    const toggleSwitch = document.querySelector('.theme-switch input[type=\"checkbox\"]');\n    const currentTheme = localStorage.getItem('theme') ? localStorage.getItem('theme') : null;\n\n    if (currentTheme) {\n        document.documentElement.setAttribute('data-theme', currentTheme);\n\n        if (currentTheme === 'dark') {\n            toggleSwitch.checked = true;\n        }\n    }\n}\n\nexport function switchTheme() {\n\n\tvar checkBox = document.getElementById(\"checkbox\");\n    if (checkBox.checked == true) {\n        document.documentElement.setAttribute('data-theme', 'dark');\n        localStorage.setItem('theme', 'dark'); //add this\n    }\n    else {\n        document.documentElement.setAttribute('data-theme', 'light');\n        localStorage.setItem('theme', 'light'); //add this\n    }\n}\n","/* ********************************\n * |docname| - Runestone Base Class\n * ********************************\n * All runestone components should inherit from RunestoneBase. In addition all runestone components should do the following things:\n *\n * 1.   Ensure that they are wrapped in a div with the class runestone\n * 2.   Write their source AND their generated html to the database if the database is configured\n * 3.   Properly save and restore their answers using the checkServer mechanism in this base class. Each component must provide an implementation of:\n *\n *      -    checkLocalStorage\n *      -    setLocalStorage\n *      -    restoreAnswers\n *      -    disableInteraction\n *\n * 4.   provide a Selenium based unit test\n */\n\nimport { pageProgressTracker } from \"./bookfuncs.js\";\n//import \"./../styles/runestone-custom-sphinx-bootstrap.css\";\n\nvar NO_DECORATE = [\"parsonsMove\", \"showeval\", \"video\", \"poll\", \"view_toggle\",\n    \"dashboard\", \"selectquestion\", \"codelens\", \"peer\"]\nexport default class RunestoneBase {\n    constructor(opts) {\n        this.component_ready_promise = new Promise(\n            (resolve) => (this._component_ready_resolve_fn = resolve)\n        );\n        this.optional = false;\n        if (typeof window.allComponents === \"undefined\") {\n            window.allComponents = [];\n        }\n        window.allComponents.push(this);\n        if (opts) {\n            this.sid = opts.sid;\n            this.graderactive = opts.graderactive;\n            this.showfeedback = true;\n            if (opts.timed) {\n                this.isTimed = true;\n            }\n            if (opts.enforceDeadline) {\n                this.deadline = opts.deadline;\n            }\n            this.optional = this.parseBooleanAttribute(opts.orig, \"data-optional\");\n            if (opts.selector_id) {\n                this.selector_id = opts.selector_id;\n            }\n            if (typeof opts.assessmentTaken !== \"undefined\") {\n                this.assessmentTaken = opts.assessmentTaken;\n            } else {\n                // default to true as this opt is only provided from a timedAssessment\n                this.assessmentTaken = true;\n            }\n            // This is for the selectquestion points\n            // If a selectquestion is part of a timed exam it will get\n            // the timedWrapper options.\n            if (typeof opts.timedWrapper !== \"undefined\") {\n                this.timedWrapper = opts.timedWrapper;\n            } else {\n                // However sometimes selectquestions\n                // are used in regular assignments.  The hacky way to detect this\n                // is to look for doAssignment in the URL and then grab\n                // the assignment name from the heading.\n                if (location.href.indexOf(\"doAssignment\") >= 0) {\n                    this.timedWrapper = $(\"h1#assignment_name\").text();\n                } else {\n                    this.timedWrapper = null;\n                }\n            }\n            if ($(opts.orig).data(\"question_label\")) {\n                this.question_label = $(opts.orig).data(\"question_label\");\n            }\n            this.is_toggle = true ? opts.is_toggle : false;\n            this.is_select = true ? opts.is_select : false;\n        }\n        this.mjelements = [];\n        let self = this;\n        this.mjReady = new Promise(function (resolve, reject) {\n            self.mjresolver = resolve;\n        });\n        this.aQueue = new AutoQueue();\n        if (opts && typeof opts.preamble !== \"undefined\") {\n            this.preamble = opts.preamble;\n            let y = document.createElement(\"div\");\n            y.classList.add(\"hidden-content\");\n            y.classList.add(\"process-math\");\n            y.innerHTML = \"\\\\(\" + this.preamble + \"\\\\)\";\n            // This is a hack to get the preamble into the DOM so that MathJax can process it.\n            opts.orig.appendChild(y);\n            y.id = \"ltx_preamble\";\n            y.style.display = \"none\";\n            // Add the preamble to the queue object so it can prepend it to\n            // future MathJax processing\n            this.aQueue.preamble = y\n        }\n\n        this.jsonHeaders = new Headers({\n            \"Content-type\": \"application/json; charset=utf-8\",\n            Accept: \"application/json\",\n        });\n    }\n\n    // Helper for parsing boolean data-* attributes\n    // Unset/\"false\"/\"no\" means false, anything else, including empty string means true\n    parseBooleanAttribute(element, attributeName) {\n        const attrValue = element.getAttribute(attributeName);\n        if (attrValue === null) {\n            return false;\n        }\n        const lowerValue = attrValue.toLowerCase();\n        if (lowerValue === \"false\" || lowerValue === \"no\") {\n            return false;\n        }\n        return true;\n    }\n\n    // _`logBookEvent`\n    //----------------\n    // This function sends the provided ``eventInfo`` to the `hsblog endpoint` of the server. Awaiting this function returns either ``undefined`` (if Runestone services are not available) or the data returned by the server as a JavaScript object (already JSON-decoded).\n    async logBookEvent(eventInfo) {\n        if (this.graderactive) {\n            return;\n        }\n        let post_return;\n        eventInfo.course_name = eBookConfig.course;\n        eventInfo.clientLoginStatus = eBookConfig.isLoggedIn;\n        eventInfo.timezoneoffset = new Date().getTimezoneOffset() / 60;\n        // For selectquestions we need to log using the selector_id for real time scoring\n        if (this.selector_id) {\n            eventInfo.selector_id = this.selector_id;\n        }\n        if (typeof this.percent === \"number\") {\n            eventInfo.percent = this.percent;\n        }\n        if (window.assignmentId) {\n            eventInfo.assignment_id = window.assignmentId;\n        }\n        if (\n            eBookConfig.isLoggedIn &&\n            eBookConfig.useRunestoneServices &&\n            eBookConfig.logLevel > 0\n        ) {\n            post_return = this.postLogMessage(eventInfo);\n        }\n        if (!this.isTimed || eBookConfig.debug) {\n            let prefix = eBookConfig.isLoggedIn ? \"Save\" : \"Not\";\n            console.log(`${prefix} logging event ` + JSON.stringify(eventInfo));\n        }\n        // When selectquestions are part of an assignment especially toggle questions\n        // we need to count using the selector_id of the select question.\n        // We  also need to log an event for that selector so that we will know\n        // that interaction has taken place.  This is **independent** of how the\n        // autograder will ultimately grade the question!\n        if (this.selector_id) {\n            eventInfo.div_id = this.selector_id.replace(\n                \"-toggleSelectedQuestion\",\n                \"\"\n            );\n            eventInfo.event = \"selectquestion\";\n            eventInfo.act = \"interaction\";\n            this.postLogMessage(eventInfo);\n        }\n        if (\n            typeof pageProgressTracker.updateProgress === \"function\" &&\n            eventInfo.act != \"edit\" &&\n            this.optional == false\n        ) {\n            pageProgressTracker.updateProgress(eventInfo.div_id);\n        }\n        // if the event is in the NO_DECORATE list then don't decorate the status\n        if (NO_DECORATE.indexOf(eventInfo.event) === -1) {\n            this.decorateStatus();\n        }\n        return post_return;\n    }\n\n    async postLogMessage(eventInfo) {\n        var post_return;\n        let request = new Request(\n            `${eBookConfig.new_server_prefix}/logger/bookevent`,\n            {\n                method: \"POST\",\n                headers: this.jsonHeaders,\n                body: JSON.stringify(eventInfo),\n            }\n        );\n        try {\n            var response = await fetch(request);\n            if (!response.ok) {\n                if (response.status === 422) {\n                    // Get details about why this is unprocesable.\n                    post_return = await response.json();\n                    console.log(JSON.stringify(post_return.detail, null, 4));\n                    throw new Error(\"Unprocessable Request\");\n                } else if (response.status == 401) {\n                    post_return = await response.json();\n                    console.log(\n                        `Missing authentication token ${post_return.detail}`\n                    );\n                    throw new Error(\"Missing authentication token\");\n                }\n                throw new Error(`Failed to save the log entry\n                    Status: ${response.status}`);\n            }\n            post_return = await response.json();\n            let scoreSpec = post_return.detail;\n            let gradeBox = null;\n            if (this.selector_id) {\n                let selector_id = this.selector_id.replace(\n                    \"-toggleSelectedQuestion\",\n                    \"\"\n                );\n                gradeBox = document.getElementById(`${selector_id}_score`);\n            } else {\n                gradeBox = document.getElementById(`${this.divid}_score`);\n            }\n            if (gradeBox && !this.isTimed && scoreSpec.score) {\n                this.updateScores(gradeBox, scoreSpec);\n            }\n        } catch (e) {\n            let detail = \"none\";\n            if (post_return && post_return.detail) {\n                detail = post_return.detail;\n            }\n            if (eBookConfig.useRunestoneServices) {\n                alert(`Error: Your action was not saved!\n                    The error was ${e}\n                    Status Code: ${response.status}\n                    Detail: ${JSON.stringify(detail, null, 4)}.\n                    Please report this error!`);\n            }\n            // send a request to save this error\n            console.log(\n                `Error: ${e} Detail: ${detail} Status Code: ${response.status}`\n            );\n        }\n        return post_return;\n    }\n    // update the score for the question and the total score\n    // the presence of the gradeBox is used to determine if we are on an assignment page.\n    updateScores(gradeBox, scoreSpec) {\n        if (!scoreSpec.assigned || scoreSpec.score === null) {\n            document.getElementById(`${this.divid}_message`).innerHTML = \"Score not updated.  Submissions are closed.\";\n            return;\n        }\n        let scoreSpan = gradeBox.getElementsByClassName(\"qscore\")[0];\n        if (scoreSpan) {\n            scoreSpan.innerHTML = scoreSpec.score.toFixed(1);\n        }\n        let allScores = document.getElementsByClassName(\"qscore\");\n        let allmax = document.getElementsByClassName(\"qmaxscore\");\n        let total = 0;\n        let max = 0;\n        for (let i = 0; i < allScores.length; i++) {\n            total += parseFloat(allScores[i].innerHTML);\n            max += parseFloat(allmax[i].innerHTML);\n        }\n        let totalSpan = document.getElementById(\"total_score\");\n        if (totalSpan) {\n            totalSpan.innerHTML = total.toFixed(1);\n        }\n        let maxSpan = document.getElementById(\"total_max\");\n        if (maxSpan) {\n            maxSpan.innerHTML = max;\n        }\n        let percentSpan = document.getElementById(\"total_percent\");\n        if (percentSpan) {\n            percentSpan.innerHTML = ((total / max) * 100).toFixed(2);\n        }\n    }\n\n    // .. _logRunEvent:\n    //\n    // logRunEvent\n    // -----------\n    // This function sends the provided ``eventInfo`` to the `runlog endpoint`. When awaited, this function returns the data (decoded from JSON) the server sent back.\n    async logRunEvent(eventInfo) {\n        let post_promise = \"done\";\n        if (this.graderactive) {\n            return;\n        }\n        eventInfo.course = eBookConfig.course;\n        eventInfo.clientLoginStatus = eBookConfig.isLoggedIn;\n        eventInfo.timezoneoffset = new Date().getTimezoneOffset() / 60;\n        if (this.forceSave || \"to_save\" in eventInfo === false) {\n            eventInfo.save_code = \"True\";\n        }\n        if (typeof eventInfo.errinfo !== \"undefined\") {\n            eventInfo.errinfo = eventInfo.errinfo.toString();\n        }\n        if (\n            eBookConfig.isLoggedIn &&\n            eBookConfig.useRunestoneServices &&\n            eBookConfig.logLevel > 0\n        ) {\n            let request = new Request(\n                `${eBookConfig.new_server_prefix}/logger/runlog`,\n                {\n                    method: \"POST\",\n                    headers: this.jsonHeaders,\n                    body: JSON.stringify(eventInfo),\n                }\n            );\n            let response = await fetch(request);\n            if (!response.ok) {\n                post_promise = await response.json();\n                if (eBookConfig.useRunestoneServices) {\n                    alert(`Failed to save your code\n                        Status is ${response.status}\n                        Detail: ${JSON.stringify(\n                        post_promise.detail,\n                        null,\n                        4\n                    )}`);\n                } else {\n                    console.log(\n                        `Did not save the code.\n                         Status: ${response.status}\n                         Detail: ${JSON.stringify(\n                            post_promise.detail,\n                            null,\n                            4\n                        )}`\n                    );\n                }\n            } else {\n                post_promise = await response.json();\n            }\n        }\n        if (!this.isTimed || eBookConfig.debug) {\n            console.log(\"running \" + JSON.stringify(eventInfo));\n        }\n        if (\n            typeof pageProgressTracker.updateProgress === \"function\" &&\n            this.optional == false\n        ) {\n            pageProgressTracker.updateProgress(eventInfo.div_id);\n        }\n        return post_promise;\n    }\n    /* Checking/loading from storage\n    **WARNING:**  DO NOT `await` this function!\n    This function, although async, does not explicitly resolve its promise by returning a value.  The reason for this is because it is called by the constructor for nearly every component.  In Javascript constructors cannot be async!\n\n    One of the recommended ways to handle the async requirements from within a constructor is to use an attribute as a promise and resolve that attribute at the appropriate time.\n    */\n    async checkServer(\n        // A string specifying the event name to use for querying the :ref:`getAssessResults` endpoint.\n        eventInfo,\n        // If true, this function will invoke ``indicate_component_ready()`` just before it returns. This is provided since most components are ready after this function completes its work.\n        //\n        // TODO: This defaults to false, to avoid causing problems with any components that haven't been updated and tested. After all Runestone components have been updated, default this to true and remove the extra parameter from most calls to this function.\n        will_be_ready = false\n    ) {\n        // Check if the server has stored answer\n        let self = this;\n        this.checkServerComplete = new Promise(function (resolve, reject) {\n            self.csresolver = resolve;\n        });\n        if (\n            eBookConfig.isLoggedIn &&\n            (this.useRunestoneServices || this.graderactive)\n        ) {\n            let data = {};\n            data.div_id = this.divid;\n            data.course = eBookConfig.course;\n            data.event = eventInfo;\n            if (this.graderactive && this.deadline) {\n                data.deadline = this.deadline;\n                data.rawdeadline = this.rawdeadline;\n                data.tzoff = this.tzoff;\n            }\n            if (this.sid) {\n                data.sid = this.sid;\n            }\n            if (!(data.div_id && data.course && data.event)) {\n                console.log(\n                    `A required field is missing data ${data.div_id}:${data.course}:${data.event}`\n                );\n            }\n            // If we are NOT in practice mode and we are not in a peer exercise\n            // and assessmentTaken is true\n            if (\n                !eBookConfig.practice_mode &&\n                !eBookConfig.peer &&\n                this.assessmentTaken\n            ) {\n                let request = new Request(\n                    `${eBookConfig.new_server_prefix}/assessment/results`,\n                    {\n                        method: \"POST\",\n                        body: JSON.stringify(data),\n                        headers: this.jsonHeaders,\n                    }\n                );\n                try {\n                    let response = await fetch(request);\n                    console.log(`Response from server: ${response.status}`);\n                    if (response.ok) {\n                        data = await response.json();\n                        data = data.detail;\n                        console.log(`Data from server: ${JSON.stringify(data)} calling repopulateFromStorage`);\n                        this.repopulateFromStorage(data);\n                        this.attempted = true;\n                        if (typeof data.correct !== \"undefined\") {\n                            this.correct = data.correct;\n                        } else {\n                            this.correct = null;\n                        }\n                        console.log(`resolving checkServer with server data`);\n                        this.csresolver(\"server\");\n                    } else {\n                        console.log(\n                            `HTTP Error getting results: ${response.statusText}`\n                        );\n                        this.checkLocalStorage(); // just go right to local storage\n                        console.log(`resolving checkServer with local data`);\n                        this.csresolver(\"local\");\n                    }\n                } catch (err) {\n                    console.log(`Error getting results: ${err}`);\n                    try {\n                        this.checkLocalStorage();\n                    } catch (err) {\n                        console.log(err);\n                    }\n                }\n            } else {\n                this.loadData({});\n                console.log(`resolving checkServer no answer given`);\n                this.csresolver(\"not taken\");\n            }\n        } else {\n            this.checkLocalStorage(); // just go right to local storage\n            console.log(`resolving checkServer with local data`);\n            this.csresolver(\"local\");\n        }\n\n        if (will_be_ready) {\n            this.indicate_component_ready();\n        }\n    }\n\n    // This method assumes that ``this.componentDiv`` refers to the ``div`` containing the component, and that this component's ID is set.\n    indicate_component_ready() {\n        // Add a class to indicate the component is now ready.\n        this.containerDiv.classList.add(\"runestone-component-ready\");\n        // Resolve the ``this.component_ready_promise``.\n        this._component_ready_resolve_fn();\n    }\n\n    loadData(data) {\n        // for most classes, loadData doesn't do anything. But for Parsons, and perhaps others in the future,\n        // initialization can happen even when there's no history to be loaded\n        return null;\n    }\n\n    /**\n     * repopulateFromStorage is called after a successful API call is made to ``getAssessResults`` in\n     * the checkServer method in this class\n     *\n     * ``restoreAnswers,`` ``setLocalStorage`` and ``checkLocalStorage`` are defined in the child classes.\n     *\n     * @param {*} data - a JSON object representing the data needed to restore a previous answer for a component\n     * @param {*} status - the http status\n     * @param {*} whatever - ignored\n     */\n    repopulateFromStorage(data) {\n        // decide whether to use the server's answer (if there is one) or to load from storage\n        if (data !== null && data !== \"no data\" && this.shouldUseServer(data)) {\n            this.restoreAnswers(data);\n            this.setLocalStorage(data);\n        } else {\n            this.checkLocalStorage();\n        }\n        this.decorateStatus();\n    }\n    shouldUseServer(data) {\n        // returns true if server data is more recent than local storage or if server storage is correct\n        if (\n            data.correct === \"T\" ||\n            data.correct === true ||\n            localStorage.length === 0 ||\n            this.graderactive === true ||\n            this.isTimed\n        ) {\n            return true;\n        }\n        let ex = localStorage.getItem(this.localStorageKey());\n        if (ex === null) {\n            return true;\n        }\n        let storedData;\n        try {\n            storedData = JSON.parse(ex);\n        } catch (err) {\n            // error while parsing; likely due to bad value stored in storage\n            console.log(err.message);\n            localStorage.removeItem(this.localStorageKey());\n            // definitely don't want to use local storage here\n            return true;\n        }\n        if (data.answer == storedData.answer) return true;\n        let storageDate = new Date(storedData.timestamp);\n        let serverDate = new Date(data.timestamp);\n        return serverDate >= storageDate;\n    }\n    // Return the key which to be used when accessing local storage.\n    localStorageKey() {\n        return (\n            eBookConfig.email +\n            \":\" +\n            eBookConfig.course +\n            \":\" +\n            this.divid +\n            \"-given\"\n        );\n    }\n    addCaption(elType) {\n        //someElement.parentNode.insertBefore(newElement, someElement.nextSibling);\n        if (!this.isTimed) {\n            var capDiv = document.createElement(\"p\");\n            if (this.question_label) {\n                // Display caption based on whether Runestone services have been detected\n                this.caption = eBookConfig.useRunestoneServices\n                    ? `Activity: ${this.question_label} ${this.caption}  <span class=\"runestone_caption_divid\">(${this.divid})</span>`\n                    : `Activity: ${this.question_label} ${this.caption}`; // Without runestone\n                $(capDiv).html(this.caption);\n                $(capDiv).addClass(`${elType}_caption`);\n            } else {\n                // Display caption based on whether Runestone services have been detected\n                $(capDiv).html(\n                    eBookConfig.useRunestoneServices\n                        ? this.caption + \" (\" + this.divid + \")\"\n                        : this.caption\n                ); // Without runestone\n                $(capDiv).addClass(`${elType}_caption`);\n                $(capDiv).addClass(`${elType}_caption_text`);\n            }\n            this.capDiv = capDiv;\n            //this.outerDiv.parentNode.insertBefore(capDiv, this.outerDiv.nextSibling);\n            this.containerDiv.appendChild(capDiv);\n        }\n    }\n\n    hasUserActivity() {\n        return this.isAnswered;\n    }\n\n    checkCurrentAnswer() {\n        console.log(\n            \"Each component should provide an implementation of checkCurrentAnswer\"\n        );\n    }\n\n    async logCurrentAnswer() {\n        console.log(\n            \"Each component should provide an implementation of logCurrentAnswer\"\n        );\n    }\n    renderFeedback() {\n        console.log(\n            \"Each component should provide an implementation of renderFeedback\"\n        );\n    }\n    disableInteraction() {\n        console.log(\n            \"Each component should provide an implementation of disableInteraction\"\n        );\n    }\n\n    toString() {\n        return `${this.constructor.name}: ${this.divid}`;\n    }\n\n    queueMathJax(component) {\n        if (typeof MathJax === \"undefined\") {\n            console.log(\"Error -- MathJax is not loaded\");\n            return Promise.resolve(null);\n        } else {\n            // See - https://docs.mathjax.org/en/latest/advanced/typeset.html\n            // Per the above we should keep track of the promises and only call this\n            // a second time if all previous promises have resolved.\n            // Create a queue of components\n            // should wait until defaultPageReady is defined\n            // If defaultPageReady is not defined then just enqueue the components.\n            // Once defaultPageReady is defined\n            // the window.runestoneMathReady promise will be fulfilled when the\n            // initial typesetting is complete.\n            if (MathJax.typesetPromise) {\n                if (typeof window.runestoneMathReady !== \"undefined\") {\n                    return window.runestoneMathReady.then(() =>\n                        this.mjresolver(this.aQueue.enqueue(component))\n                    );\n                } else {\n                    return this.mjresolver(this.aQueue.enqueue(component));\n                }\n            } else {\n                console.log(`Waiting on MathJax!! ${MathJax.typesetPromise}`);\n                setTimeout(() => this.queueMathJax(component), 200);\n                console.log(`Returning mjready promise: ${this.mjReady}`);\n                return this.mjReady;\n            }\n        }\n    }\n\n    decorateStatus() {\n        if (this.isTimed || eBookConfig.peer) return;\n        let rsDiv = $(this.containerDiv).closest(\"div.runestone\")[0];\n        if (!rsDiv) return;\n        rsDiv.classList.remove(\"notAnswered\");\n        rsDiv.classList.remove(\"isInCorrect\");\n        rsDiv.classList.remove(\"isCorrect\");\n        let assignmentInfo = localStorage.getItem(`currentAssignmentInfo_${eBookConfig.course}`);\n        let questions = [];\n        if (assignmentInfo) {\n            questions = JSON.parse(assignmentInfo).questions\n        }\n        if (questions.indexOf(this.divid) >= 0) {\n            rsDiv.classList.add(\"isAssigned\");\n        }\n        if (this.correct) {\n            rsDiv.classList.add(\"isCorrect\");\n        } else {\n            if (this.correct === null || typeof this.correct === \"undefined\") {\n                rsDiv.classList.add(\"notAnswered\");\n            } else {\n                rsDiv.classList.add(\"isInCorrect\");\n            }\n        }\n    }\n}\n\n// Inspiration and lots of code for this solution come from\n// https://stackoverflow.com/questions/53540348/js-async-await-tasks-queue\n// The idea here is that until MathJax is ready we can just enqueue things\n// once mathjax becomes ready then we can drain the queue and continue as usual.\n\nclass Queue {\n    constructor() {\n        this._items = [];\n    }\n    enqueue(item) {\n        this._items.push(item);\n    }\n    dequeue() {\n        return this._items.shift();\n    }\n    get size() {\n        return this._items.length;\n    }\n}\n\nclass AutoQueue extends Queue {\n    constructor() {\n        super();\n        this._pendingPromise = false;\n    }\n\n    enqueue(component) {\n        return new Promise((resolve, reject) => {\n            super.enqueue({ component, resolve, reject });\n            this.dequeue();\n        });\n    }\n\n    async dequeue() {\n        if (this._pendingPromise) return false;\n\n        let item = super.dequeue();\n\n        if (!item) return false;\n        let qq = this;\n        try {\n            this._pendingPromise = true;\n\n            let payload = await window.runestoneMathReady\n                .then(async function () {\n                    console.log(\n                        `MathJax Ready -- dequeing a typesetting run for ${item.component.id} ${qq.preamble?.innerHTML}`\n                    );\n                    if (qq.preamble) {\n                        await MathJax.typesetPromise([qq.preamble])\n                        // Use insertAdjacentElement to preserve existing DOM elements and event listeners\n                        // instead of overwriting innerHTML which destroys event handlers\n                        let preambleDiv = document.createElement(\"div\");\n                        preambleDiv.innerHTML = qq.preamble.innerHTML;\n                        item.component.insertAdjacentElement(\"afterbegin\", preambleDiv);\n                        console.log(\n                            `MathJax typeset the preamble for ${item.component.id}`\n                        );\n                        return await MathJax.typesetPromise([item.component]);\n                    } else {\n                        return await MathJax.typesetPromise([item.component]);\n                    }\n                });\n\n            this._pendingPromise = false;\n            item.resolve(payload);\n        } catch (e) {\n            this._pendingPromise = false;\n            item.reject(e);\n        } finally {\n            // If there are more items in the queue, continue processing them\n            this.dequeue();\n        }\n\n        return true;\n    }\n}\n\nwindow.RunestoneBase = RunestoneBase;\n","/**\n *\n * User: bmiller\n * Original: 2011-04-20\n * Date: 2019-06-14\n * Time: 2:01 PM\n * This change marks the beginning of version 4.0 of the runestone components\n * Login/logout is no longer handled through javascript but rather server side.\n * Many of the components depend on the runestone:login event so we will keep that\n * for now to keep the churn fairly minimal.\n */\n\n/*\n\n Copyright (C) 2011  Brad Miller  bonelake@gmail.com\n\n This program is free software: you can redistribute it and/or modify\n it under the terms of the GNU General Public License as published by\n the Free Software Foundation, either version 3 of the License, or\n (at your option) any later version.\n\n This program is distributed in the hope that it will be useful,\n but WITHOUT ANY WARRANTY; without even the implied warranty of\n MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n GNU General Public License for more details.\n\n You should have received a copy of the GNU General Public License\n along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n */\n\n//\n// Page decoration functions\n//\n/*\nMaybe something like this at the top:\n\nActive assignment: [Ch 15 reading]      [Exit assignment link]\nOn page (3 of 7) [Select input showing current page, can select others] \nBecoming this if not on a page in assignment\n\nActive assignment: [Ch 15 reading]      [Exit assignment link]\nThis page is not part of that assignment. Select a page to return to it:\n[Select input]\n*/\nfunction addReadingList() {\n    let assignment_info_string = localStorage.getItem(`currentAssignmentInfo_${eBookConfig.course}`)\n        \n    if (assignment_info_string && eBookConfig.readings) {\n        var top,bottom,active,page_name,exit_link,fst,snd, new_pos, path_parts, new_pos_link;\n        var assignment_info = JSON.parse(assignment_info_string);\n        let assignment_id = assignment_info.id;\n        let assignment_name = assignment_info.name;\n        let reading_names = assignment_info.readingNames;\n\n        active = document.createElement(\"div\");\n        active.textContent = \"Active assignment: \"\n\n        page_name = document.createElement(\"a\");\n        page_name.textContent = assignment_name;\n        page_name.href = `/assignment/student/doAssignment?assignment_id=${assignment_id}`;\n        \n        active.append(page_name);\n\n        exit_link = document.createElement(\"a\");\n        exit_link.textContent = \" Exit Assignment\";\n        exit_link.href=window.location.pathname;\n\n        exit_link.addEventListener('click',function(event) {\n            localStorage.removeItem(`currentAssignmentInfo_${eBookConfig.course}`);\n        });\n\n        //active.append(exit_link)\n\n        let cur_path_parts = window.location.pathname.split(\"/\");\n        let name =\n            cur_path_parts[cur_path_parts.length - 2] +\n            \"/\" +\n            cur_path_parts[cur_path_parts.length - 1];\n        // if body has pretext class, then strip the leading path parts from each of the strings in eBookConfig.readings\n        let body = document.getElementsByTagName(\"body\")[0];\n        let ptxbook = false;\n        let endLop = 2;\n        if (body.classList.contains(\"pretext\")) {\n            ptxbook = true;\n            eBookConfig.readings = eBookConfig.readings.map(r => r.split(\"/\").pop());\n            name = name.split(\"/\").pop();\n            endLop = 1;\n        }\n\n        let position = eBookConfig.readings.indexOf(name);\n        let num_readings = eBookConfig.readings.length;\n        // get prev name\n        if (position > 0) {\n            new_pos = eBookConfig.readings[position - 1];\n            path_parts = cur_path_parts.slice(0, cur_path_parts.length - endLop);\n            path_parts.push(new_pos);\n            new_pos_link = path_parts.join(\"/\");\n            fst = active.cloneNode(true);\n            let txt = document.createElement(\"p\");\n            txt.textContent = `Page ${position + 1} of ${num_readings}, `;\n            var fst_lnk = document.createElement(\"a\");\n            //fst_lnk.className = \"btn btn-lg reading-navigation prev-reading\";\n            fst_lnk.href = new_pos_link;\n            fst_lnk.textContent = `Back to page ${\n                position\n            } of ${num_readings}: ${reading_names[position-1]}.`;\n            txt.append(fst_lnk);\n            fst.append(txt);\n            \n        } else if (position == 0){\n            fst = active.cloneNode(true);\n            let txt = document.createElement(\"p\");\n            txt.textContent = `Page 1 of ${num_readings}.`;\n            fst.append(txt);\n        } else {\n            // this isn't a reading page in the assignment, check to see if any\n            // activities on this page are assigned to the current assignment\n            let exerciseOnPage = false;\n            let pageExercises = Object.keys(componentMap);\n            if (pageExercises.length == 0) {\n                pageExercises = document.querySelectorAll(\"[data-component]\");\n                pageExercises = Array.from(pageExercises).map(function(el) {\n                    return el.id;\n                })\n            }\n            for (let ex of pageExercises) {\n                if (assignment_info.questions.includes(ex)) {\n                    exerciseOnPage = true;\n                    break;\n                }\n            }\n            new_pos = eBookConfig.readings[0];\n            path_parts = cur_path_parts.slice(0, cur_path_parts.length - endLop);\n            path_parts.push(new_pos);\n            new_pos_link = path_parts.join(\"/\");\n            fst = active.cloneNode(true);\n            let txt = document.createElement(\"p\");\n            if (exerciseOnPage) {\n                txt.textContent = \"This page has activities assigned to the current assignment.\";\n            } else {\n                txt.textContent = \"Notice: this page is not part of the assignment.\";\n            }\n            txt.append(exit_link);\n            fst.append(txt);\n        }\n        if (position == eBookConfig.readings.length - 1) {\n            // no more readings\n            snd = active;\n            let txt = document.createElement(\"p\");\n            txt.textContent = `Page ${num_readings} of ${num_readings}: ${reading_names[position]}`;\n            snd.append(txt);\n        } else if (position >= 0) {\n            // get next name\n            new_pos = eBookConfig.readings[position + 1];\n            path_parts = cur_path_parts.slice(0, cur_path_parts.length - endLop);\n            path_parts.push(new_pos);\n            new_pos_link = path_parts.join(\"/\");\n            snd = active;\n            var snd_lnk = document.createElement(\"a\");\n            //snd_lnk.className = \"btn btn-lg reading-navigation next-reading\";\n            snd_lnk.href = new_pos_link;\n            snd_lnk.textContent = `Continue to page ${\n                position + 2\n            } of ${num_readings}: ${reading_names[position+1]}`;\n            let txt = document.createElement(\"p\");\n            txt.append(snd_lnk);\n            snd.append(txt);\n            \n        } else {\n            snd = active.cloneNode(true);\n            let txt = document.createElement(\"p\");\n            txt.textContent = \"Notice: this page is not part of the assignment. To remove this warning click \";\n            let exit_clone = exit_link.cloneNode(true);\n\n            exit_clone.addEventListener('click',function(event) {\n                localStorage.removeItem(`currentAssignmentInfo_${eBookConfig.course}`);\n            });\n            txt.append(exit_clone);\n            snd.append(txt);\n            \n\n        }\n\n        top = document.createElement(\"div\");\n        top.className = \"ptx-runestone-container\"\n        fst.className = \"runestone assignment-nav top-assignment-nav\"\n        //top.style.backgroundColor = \"var(--componentBgColor)\"\n        //top.style.borderColor = \"var(--componentBorderColor)\"\n        //top.style.borderWidth = \"1px\"\n        top.append(fst);\n        //top.append(snd);\n\n        bottom = document.createElement(\"div\");\n        bottom.className = \"ptx-runestone-container\"\n        snd.className = \"runestone assignment-nav bottom-assignment-nav\"\n        //bottom.style.backgroundColor = \"var(--componentBgColor)\"\n        //bottom.style.borderColor = \"var(--componentBorderColor)\"\n        //bottom.style.borderWidth = \"1px\"\n        \n        //bottom.append(active.cloneNode(true));\n        //bottom.append(fst.cloneNode(true));\n        bottom.append(snd);\n\n\n        // check the body tag to see if it has a pretext class (no jquery)\n        if (ptxbook) {\n            //append parts to the header and progress container\n            let content = document.getElementById(\"ptx-content\");\n            if (content) {\n                content.insertBefore(top, content.firstChild);\n            }\n            let pc = document.getElementById(\"scprogresscontainer\");\n            if (pc) {\n                pc.style.marginBottom = \"20px\";\n                pc.appendChild(bottom);\n            }\n            return;\n        }\n        const mainContent = document.getElementById(\"main-content\");\n        if (mainContent && snd) {\n            mainContent.insertBefore(top,mainContent.firstChild)\n            mainContent.appendChild(bottom);\n            \n        }\n    }\n}\n\nfunction timedRefresh() {\n    var timeoutPeriod = 900000; // 75 minutes\n    let idleTimeoutId;\n\n    function onIdle() {\n        // After timeout period send the user back to the index.  This will force a login\n        // if needed when they want to go to a particular page.  This may not be perfect\n        // but its an easy way to make sure laptop users are properly logged in when they\n        // take quizzes and save stuff.\n        if (location.href.indexOf(\"index.html\") < 0) {\n            console.log(\"Idle timer - \" + location.pathname);\n            location.href =\n                eBookConfig.app +\n                \"/default/user/login?_next=\" +\n                location.pathname +\n                location.search;\n        }\n    }\n\n    function resetIdleTimer() {\n        if (idleTimeoutId) {\n            clearTimeout(idleTimeoutId);\n        }\n        idleTimeoutId = setTimeout(onIdle, timeoutPeriod);\n    }\n\n    [\"mousemove\", \"keydown\", \"scroll\", \"click\", \"touchstart\", \"wheel\"].forEach(\n        (eventName) => {\n            window.addEventListener(eventName, resetIdleTimer, { passive: true });\n        },\n    );\n\n    resetIdleTimer();\n}\n\nclass PageProgressBar {\n    constructor(actDict) {\n        this.possible = 0;\n        this.total = 1;\n        if (actDict && \"assignment_spec\" in actDict) {\n            this.assignment_spec = actDict.assignment_spec;\n            delete actDict.assignment_spec;\n        }\n        if (actDict && Object.keys(actDict).length > 0) {\n            this.activities = actDict;\n        } else {\n            let activities = { page: 0 };\n            document.querySelectorAll(\".runestone\").forEach(function (e) {\n                activities[e.firstElementChild.id] = 0;\n            });\n            this.activities = activities;\n        }\n        this.calculateProgress();\n        // Hide the progress bar on the index page.\n        if (\n            window.location.pathname.match(\n                /.*\\/(index.html|toctree.html|Exercises.html|search.html)$/i,\n            )\n        ) {\n            const scprogresscontainer = document.getElementById(\n                \"scprogresscontainer\",\n            );\n            if (scprogresscontainer) scprogresscontainer.style.display = \"none\";\n        }\n        this.renderProgress();\n    }\n\n    calculateProgress() {\n        for (let k in this.activities) {\n            if (k !== undefined) {\n                this.possible++;\n                if (this.activities[k] > 0) {\n                    this.total++;\n                }\n            }\n        }\n    }\n\n    renderProgress() {\n        let value = 0;\n        const scprogresstotal = document.getElementById(\"scprogresstotal\");\n        if (scprogresstotal) scprogresstotal.textContent = this.total;\n        const scprogressposs = document.getElementById(\"scprogressposs\");\n        if (scprogressposs) scprogressposs.textContent = this.possible;\n        try {\n            value = (100 * this.total) / this.possible;\n        } catch (e) {\n            value = 0;\n        }\n        // Replace #subchapterprogress div with a native <progress> element if not already done\n        let subchapterprogress = document.getElementById(\"subchapterprogress\");\n        if (subchapterprogress && subchapterprogress.tagName !== \"PROGRESS\") {\n            // Replace the div with a <progress> element\n            const progressElem = document.createElement(\"progress\");\n            progressElem.id = \"subchapterprogress\";\n            progressElem.max = 100;\n            progressElem.value = value;\n            // Copy over any classes from the old div\n            progressElem.className = subchapterprogress.className;\n            subchapterprogress.replaceWith(progressElem);\n            subchapterprogress = progressElem;\n        } else if (subchapterprogress) {\n            subchapterprogress.max = 100;\n            subchapterprogress.value = value;\n        }\n        if (this.assignment_spec) {\n            // If the user has completed all activities, send the reading score.\n            // This handles the case where there are no activities on the page or\n            //  where the user completed activities on the assignment page and now\n            //  is viewing the reading page.\n            let completeActivities = this.total - 1; // subtract 1 for the page reading which is in total but not an activity\n            let requiredActivities =\n                this.assignment_spec.activities_required || 0;\n            if (this.assignment_spec.activities_required === null) {\n                this.assignment_spec.activities_required = this.possible - 1; // if activities_required is null, then there are none on the page\n            }\n            if (completeActivities >= requiredActivities) {\n                this.sendCompletedReadingScore().then(() => {\n                    console.log(\"Reading score sent for page\");\n                    // wait a tick then mark the page complete\n                    // this is needed to let the progress bar update before marking complete\n                    setTimeout(() => {\n                        let cb = document.getElementById(\"completionButton\");\n                        if (\n                            cb &&\n                            cb.textContent.toLowerCase() === \"mark as completed\"\n                        ) {\n                            cb.click();\n                        }\n                    }, 500);\n                });\n            }\n        }\n        if (!eBookConfig.isLoggedIn) {\n            const subchapterDiv = document.getElementById(\"subchapterprogress\");\n            if (subchapterDiv) subchapterDiv.classList.add(\"loggedout\");\n        }\n    }\n\n    updateProgress(div_id) {\n        this.activities[div_id]++;\n        // Only update the progress bar on the first interaction with an object.\n        if (this.activities[div_id] === 1) {\n            this.total++;\n            let val = (100 * this.total) / this.possible;\n            const scprogresstotal2 = document.getElementById(\"scprogresstotal\");\n            if (scprogresstotal2) scprogresstotal2.textContent = this.total;\n            const scprogressposs2 = document.getElementById(\"scprogressposs\");\n            if (scprogressposs2) scprogressposs2.textContent = this.possible;\n            let subchapterprogress2 =\n                document.getElementById(\"subchapterprogress\");\n            if (\n                subchapterprogress2 &&\n                subchapterprogress2.tagName === \"PROGRESS\"\n            ) {\n                subchapterprogress2.value = val;\n            }\n            if (\n                this.assignment_spec &&\n                this.assignment_spec.activities_required !== null &&\n                this.total >= this.assignment_spec.activities_required\n            ) {\n                console.log(\"Required activities completed\");\n                this.sendCompletedReadingScore().then(() => {\n                    console.log(\"Reading score sent\");\n                });\n            }\n            if (\n                val == 100.0 &&\n                (function () {\n                    const cb = document.getElementById(\"completionButton\");\n                    return (\n                        cb &&\n                        cb.textContent &&\n                        cb.textContent.toLowerCase() === \"mark as completed\"\n                    );\n                })()\n            ) {\n                const cb = document.getElementById(\"completionButton\");\n                if (cb && typeof cb.click === \"function\") {\n                    cb.click();\n                }\n            }\n        }\n    }\n\n    async sendCompletedReadingScore() {\n        let headers = new Headers({\n            \"Content-type\": \"application/json; charset=utf-8\",\n            Accept: \"application/json\",\n        });\n        let data = { ...this.assignment_spec };\n        let request = new Request(\n            `${eBookConfig.new_server_prefix}/logger/update_reading_score`,\n            {\n                method: \"POST\",\n                body: JSON.stringify(data),\n                headers: headers,\n            },\n        );\n        try {\n            let response = await fetch(request);\n            if (!response.ok) {\n                console.error(\n                    `Failed to send reading score! ${response.statusText}`,\n                );\n            }\n            data = await response.json();\n        } catch (e) {\n            console.error(`Error sending reading score ${e}`);\n        }\n    }\n}\n\nexport var pageProgressTracker = {};\n\nfunction getCookie(name) {\n    const value = `; ${document.cookie}`;\n    const parts = value.split(`; ${name}=`);\n    if (parts.length === 2) return parts.pop().split(\";\").shift();\n}\n\nasync function handlePageSetup() {\n    var mess;\n    if (eBookConfig.useRunestoneServices) {\n        let headers = new Headers({\n            \"Content-type\": \"application/json; charset=utf-8\",\n            Accept: \"application/json\",\n        });\n        let data = {\n            timezoneoffset: new Date().getTimezoneOffset() / 60,\n            timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n        };\n        let RS_info = getCookie(\"RS_info\");\n        var tz_match = false;\n        if (RS_info) {\n            try {\n                let cleaned = RS_info.replace(/\\\\054/g, \",\"); // handle octal comma encoding\n                let info = JSON.parse(decodeURIComponent(cleaned));\n                info = JSON.parse(decodeURIComponent(info));\n                if (\n                    info.timezone === data.timezone &&\n                    info.tz_offset === data.timezoneoffset\n                ) {\n                    console.log(\n                        \"Timezone cookie matches, not sending timezone to server\",\n                    );\n                    tz_match = true;\n                }\n            } catch (e) {\n                console.error(\n                    \"Error parsing RS_info cookie, sending timezone to server\",\n                );\n            }\n        }\n        if (tz_match === false) {\n            // Set a cookie so we don't have to do this again for a while.\n            let request = new Request(\n                `${eBookConfig.new_server_prefix}/logger/set_tz_offset`,\n                {\n                    method: \"POST\",\n                    body: JSON.stringify(data),\n                    headers: headers,\n                },\n            );\n            try {\n                let response = await fetch(request);\n                if (!response.ok) {\n                    console.error(\n                        `Failed to set timezone! ${response.statusText}`,\n                    );\n                }\n                data = await response.json();\n            } catch (e) {\n                console.error(`Error setting timezone ${e}`);\n            }\n        }\n    }\n    console.log(`This page served by ${eBookConfig.served_by}`);\n    if (eBookConfig.isLoggedIn) {\n        mess = `username: ${eBookConfig.username}`;\n        if (!eBookConfig.isInstructor) {\n            const ipDropdown = document.getElementById(\"ip_dropdown_link\");\n            if (ipDropdown && typeof ipDropdown.remove === \"function\") {\n                ipDropdown.remove();\n            }\n            const instPeer = document.getElementById(\"inst_peer_link\");\n            if (instPeer && typeof instPeer.remove === \"function\") {\n                instPeer.remove();\n            }\n        }\n        document.dispatchEvent(new Event(\"runestone:login\"));\n        addReadingList();\n        // Avoid the timedRefresh on the grading page.\n        if (\n            window.location.pathname.indexOf(\"/admin/grading\") == -1 &&\n            window.location.pathname.indexOf(\"/peer/\") == -1\n        ) {\n            timedRefresh();\n        }\n    } else {\n        mess = \"Not logged in\";\n        document.dispatchEvent(new Event(\"runestone:logout\"));\n        let bw = document.getElementById(\"browsing_warning\");\n        if (bw) {\n            bw.innerHTML =\n                \"<p class='navbar_message'>Saving and Logging are Disabled</p>\";\n        }\n        let aw = document.getElementById(\"ad_warning\");\n        if (aw) {\n            aw.innerHTML =\n                \"<p class='navbar_message'> Log-in to Remove <a href='/runestone/default/ads'>Ads!</a>  &nbsp;</p>\";\n        }\n    }\n    document.querySelectorAll(\".loggedinuser\").forEach((el) => {\n        el.innerHTML = mess;\n    });\n\n    pageProgressTracker = new PageProgressBar(eBookConfig.activities);\n    notifyRunestoneComponents();\n}\n\nfunction setupNavbarLoggedIn() {\n    const profileLink = document.getElementById(\"profilelink\");\n    if (profileLink) profileLink.style.removeProperty(\"display\");\n    const passwordLink = document.getElementById(\"passwordlink\");\n    if (passwordLink) passwordLink.style.removeProperty(\"display\");\n    const registerLink = document.getElementById(\"registerlink\");\n    if (registerLink) registerLink.style.display = \"none\";\n    document.querySelectorAll(\"li.loginout\").forEach((el) => {\n        el.innerHTML =\n            '<a href=\"' +\n            eBookConfig.app +\n            '/default/user/logout\">Log Out</a>';\n    });\n}\ndocument.addEventListener(\"runestone:login\", setupNavbarLoggedIn);\n\nfunction setupNavbarLoggedOut() {\n    if (eBookConfig.useRunestoneServices) {\n        console.log(\"setup navbar for logged out\");\n        const registerLink = document.getElementById(\"registerlink\");\n        if (registerLink) registerLink.style.removeProperty(\"display\");\n        const profileLink = document.getElementById(\"profilelink\");\n        if (profileLink) profileLink.style.display = \"none\";\n        const passwordLink = document.getElementById(\"passwordlink\");\n        if (passwordLink) passwordLink.style.display = \"none\";\n        const ipDropdown = document.getElementById(\"ip_dropdown_link\");\n        if (ipDropdown) ipDropdown.style.display = \"none\";\n        const instPeer = document.getElementById(\"inst_peer_link\");\n        if (instPeer) instPeer.style.display = \"none\";\n        document.querySelectorAll(\"li.loginout\").forEach((el) => {\n            el.innerHTML =\n                '<a href=\"' +\n                eBookConfig.app +\n                '/default/user/login\">Login</a>';\n        });\n        document.querySelectorAll(\".footer\").forEach((el) => {\n            el.innerHTML = \"user not logged in\";\n        });\n    }\n}\ndocument.addEventListener(\"runestone:logout\", setupNavbarLoggedOut);\n\nfunction notifyRunestoneComponents() {\n    // Runestone components wait until login process is over to load components because of storage issues. This triggers the `dynamic import machinery`, which then sends the login complete signal when this and all dynamic imports are finished.\n    console.log(\"triggering runestone:pre-login-complete\");\n    document.dispatchEvent(new Event(\"runestone:pre-login-complete\"));\n}\n\nfunction placeAdCopy() {\n    if (typeof showAd !== \"undefined\" && showAd) {\n        let adNum = Math.floor(Math.random() * 2) + 1;\n        let adBlock = document.getElementById(`adcopy_${adNum}`);\n        let rsElements = document.querySelectorAll(\".runestone\");\n        if (rsElements.length > 0) {\n            let randomIndex = Math.floor(Math.random() * rsElements.length);\n            rsElements[randomIndex].after(adBlock);\n            adBlock.style.display = \"block\";\n        }\n    }\n}\n\n// initialize stuff\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n    if (eBookConfig) {\n        handlePageSetup();\n        placeAdCopy();\n    } else {\n        if (typeof eBookConfig === \"undefined\") {\n            console.log(\n                \"eBookConfig is not defined.  This page must not be set up for Runestone\",\n            );\n        }\n    }\n});\n\n// misc stuff\n// todo:  This could be further distributed but making a video.js file just for one function seems dumb.\nwindow.addEventListener(\"load\", function () {\n    // add the video play button overlay image\n    document.querySelectorAll(\".video-play-overlay\").forEach(function (el) {\n        el.style.backgroundImage =\n            \"url('{{pathto('_static/play_overlay_icon.png', 1)}}')\";\n    });\n\n    // This function is needed to allow the dropdown search bar to work;\n    // The default behaviour is that the dropdown menu closes when something in\n    // it (like the search bar) is clicked\n    document\n        .querySelectorAll(\".dropdown input, .dropdown label\")\n        .forEach(function (el) {\n            el.addEventListener(\"click\", function (e) {\n                e.stopPropagation();\n            });\n        });\n\n    // re-write some urls\n    // This is tricker than it looks and you have to obey the rules for # anchors\n    // The #anchors must come after the query string as the server basically ignores any part\n    // of a url that comes after # - like a comment...\n    if (location.href.includes(\"mode=browsing\")) {\n        let queryString = \"?mode=browsing\";\n        document.querySelectorAll(\"a\").forEach((link) => {\n            let anchorText = \"\";\n            if (\n                link.href.includes(\"books/published\") &&\n                !link.href.includes(\"?mode=browsing\")\n            ) {\n                if (link.href.includes(\"#\")) {\n                    let aPoint = link.href.indexOf(\"#\");\n                    anchorText = link.href.substring(aPoint);\n                    link.href = link.href.substring(0, aPoint);\n                }\n                link.href = link.href.includes(\"?\")\n                    ? link.href + queryString.replace(\"?\", \"&\") + anchorText\n                    : link.href + queryString + anchorText;\n            }\n        });\n    }\n});\n\n/**\n * Returns true if the string appears to contain LaTeX math.\n */\nexport function looksLikeLatexMath(text) {\n    if (typeof text !== \"string\") return false;\n\n    // Common LaTeX math delimiters\n    const mathDelimiters = [\n        /\\$\\$[\\s\\S]+?\\$\\$/, // $$ ... $$\n        /\\$[^$\\n]+?\\$/, // $ ... $\n        /\\\\\\[[\\s\\S]+?\\\\\\]/, // \\[ ... \\]\n        /\\\\\\([\\s\\S]+?\\\\\\)/, // \\( ... \\)\n    ];\n\n    // Common math commands (avoid generic \\text or \\ref-only cases)\n    const mathCommands =\n        /\\\\(frac|sqrt|sum|prod|int|lim|sin|cos|tan|log|ln|alpha|beta|gamma|pi|theta|sigma|Delta|cdot|times|leq|geq|neq)\\b/;\n\n    // Superscripts/subscripts like x^2 or a_i\n    const superSubScript = /[a-zA-Z0-9]\\s*[\\^_]\\s*\\{?.+?\\}?/;\n\n    return (\n        mathDelimiters.some((re) => re.test(text)) ||\n        mathCommands.test(text) ||\n        superSubScript.test(text)\n    );\n}\n","import { runestone_import } from \"../../../webpack.index.js\";\n\nexport async function renderRunestoneComponent(\n    componentSrc,\n    whereDiv,\n    moreOpts\n) {\n    /**\n     *  The easy part is adding the componentSrc to the existing div.\n     *  The tedious part is calling the right functions to turn the\n     *  source into the actual component.\n     */\n    if (!componentSrc) {\n        jQuery(`#${whereDiv}`).html(\n            `<p>Sorry, no source is available for preview.</p>`\n        );\n        return;\n    }\n    let patt = /..\\/_images/g;\n    componentSrc = componentSrc.replace(\n        patt,\n        `${eBookConfig.app}/books/published/${eBookConfig.basecourse}/_images`\n    );\n    jQuery(`#${whereDiv}`).html(componentSrc);\n\n    if (typeof window.componentMap === \"undefined\") {\n        window.componentMap = {};\n    }\n\n    let componentKind = $($(`#${whereDiv} [data-component]`)[0]).data(\n        \"component\"\n    );\n    // Import the JavaScript for this component before proceeding.\n    await runestone_import(componentKind);\n    let opt = {};\n    opt.orig = jQuery(`#${whereDiv} [data-component]`)[0];\n    if (opt.orig) {\n        opt.lang = $(opt.orig).data(\"lang\");\n        opt.useRunestoneServices = true;\n        opt.graderactive = false;\n        opt.python3 = true;\n        if (typeof moreOpts !== \"undefined\") {\n            for (let key in moreOpts) {\n                opt[key] = moreOpts[key];\n            }\n        }\n    }\n\n    if (typeof component_factory === \"undefined\") {\n        alert(\"Error:  Missing the component factory!\");\n    } else {\n        if (\n            !window.component_factory[componentKind] &&\n            !jQuery(`#${whereDiv}`).html()\n        ) {\n            jQuery(`#${whereDiv}`).html(\n                `<p>Preview not available for ${componentKind}</p>`\n            );\n        } else {\n            let res = window.component_factory[componentKind](opt);\n            if (componentKind === \"activecode\") {\n                if (moreOpts.multiGrader) {\n                    window.componentMap[\n                        `${moreOpts.gradingContainer} ${res.divid}`\n                    ] = res;\n                } else {\n                    window.componentMap[res.divid] = res;\n                }\n            }\n        }\n    }\n}\n\nexport function createTimedComponent(componentSrc, moreOpts) {\n    /* The important distinction is that the component does not really need to be rendered\n    into the page, in fact, due to the async nature of getting the source the list of questions\n    is made and the original html is replaced by the look of the exam.\n    */\n\n    let patt = /..\\/_images/g;\n    componentSrc = componentSrc.replace(\n        patt,\n        `${eBookConfig.app}/books/published/${eBookConfig.basecourse}/_images`\n    );\n\n    let componentKind = $($(componentSrc).find(\"[data-component]\")[0]).data(\n        \"component\"\n    );\n\n    let origId = $(componentSrc).find(\"[data-component]\").first().attr(\"id\");\n\n    // Double check -- if the component source is not in the DOM, then briefly add it\n    // and call the constructor.\n    let hdiv;\n    if (!document.getElementById(origId)) {\n        hdiv = $(\"<div/>\", {\n            css: { display: \"none\" },\n        }).appendTo(\"body\");\n        hdiv.html(componentSrc);\n    }\n    // at this point hdiv is a jquery object\n\n    let ret;\n    let opts = {\n        orig: document.getElementById(origId),\n        timed: true,\n    };\n    if (typeof moreOpts !== \"undefined\") {\n        for (let key in moreOpts) {\n            opts[key] = moreOpts[key];\n        }\n    }\n\n    if (componentKind in window.component_factory) {\n        ret = window.component_factory[componentKind](opts);\n    }\n\n    let rdict = {};\n    rdict.question = ret;\n    return rdict;\n}\n\n// For integration with the React overhault of Pretext\n// 1. Disable the automatic instantiation at the end of each component.js\n// 2. react will search for all \".runestone\" and will call this function for each of them.\nexport async function renderOneComponent(rsDiv) {\n    // Find the actual component inside the runestone component.\n    let component = rsDiv.querySelector(\"[data-component]\");\n    if (component == null) {\n        console.log(\"Render was called for a component, but now [data-component] attribute is present. This may mean the component has already been rendered.\")\n        return;\n    }\n    let componentKind = component.dataset.component;\n    await runestone_import(componentKind);\n    if ($(this).closest(\"[data-component=timedAssessment]\").length == 0) {\n        // If this element exists within a timed component, don't render it here\n        try {\n            let divid = component.id;\n            window.componentMap[divid] = window.component_factory[\n                componentKind\n            ]({\n                orig: component,\n                useRunestoneServices: eBookConfig.useRunestoneServices,\n            });\n        } catch (err) {\n            console.log(`Error rendering ${componentKind} Problem ${this.id}\n                         Details: ${err}`);\n        }\n    }\n}\n"],"names":["$","patchToc","$ul","minLevel","findA","$elem","level","find","each","index","item","$item","tag","tagName","toLowerCase","$childrenLi","children","$parentLi","parent","length","addClass","first","attr","patchTables","removeClass","navHeight","height","shiftWindow","scrollBy","location","hash","window","addEventListener","this","remove","not","$parent","$kids","detach","replaceWith","after","$localLi","dropdown","i","e","hasClass","text","jQuery","codeExercises","presentModeInitialized","presentToggle","dataComponent","closest","css","wrapAll","wrap","before","presentModeSetup","bod","presentClass","fullHeightClass","bottomClass","localStorage","setItem","presenterCssLink","disabled","activateExercise","getActiveExercise","active","filter","nextExercise","nextIndex","prevExercise","prevIndex","document","on","eBookConfig","isInstructor","prepend","change","i18n","extend","fallbacks","ab","ace","aln","als","an","anp","arn","arz","av","ay","ba","bar","bcc","bh","bjn","bm","bpy","bqi","bug","ce","crh","csb","cv","dsb","dtp","egl","eml","ff","fit","frc","frp","frr","fur","gag","gan","gl","glk","gn","gsw","hif","hsb","ht","ii","inh","iu","jut","jv","kaa","kbd","khw","kiu","kk","kl","koi","krc","ks","ksh","ku","kv","lad","lb","lbe","lez","li","lij","liv","lmo","ln","ltg","lzz","mai","mg","mhr","min","mo","mrj","mwl","myv","mzn","nah","nap","nds","no","os","pcd","pdc","pdt","pfl","pms","pt","qu","qug","rgn","rmy","rue","ruq","sa","sah","scn","sg","sgs","sli","sr","srn","stq","su","szl","tcy","tg","tt","ty","udm","ug","uk","vec","vep","vls","vmf","vot","vro","wa","wo","wuu","xal","xmf","yi","za","zea","zh","language","pluralRules","ak","one","am","ar","zero","two","few","many","ars","as","be","bn","br","bs","cs","cy","da","fa","fil","fr","ga","gd","gu","guw","gv","he","hi","hr","hy","is","iw","kab","kn","kw","lag","lt","lv","mk","mr","mt","naq","nso","pa","pl","prg","ro","ru","se","sh","shi","si","sk","sl","sma","smi","smj","smn","sms","ti","tl","tzm","zu","convertPlural","count","forms","pluralFormIndex","form","explicitPluralPattern","RegExp","test","parseInt","slice","indexOf","undefined","map","locale","getPluralForm","Math","number","pluralForms","pluralRuleParser","convertNumber","num","integer","tmp","transformTable","numberString","convertedNumber","digitTransformTable","String","parseFloat","convertGrammar","word","gender","push","tables","ml","lo","or","kh","my","ta","te","th","bo","split","languages","strongDirRegExp","parser","emitter","bidi","nodes","m","dir","match","module","exports","MessageParserEmitter","prototype","constructor","emit","node","replacements","ret","subnodes","operation","messageParserEmitter","n","Error","concat","result","replace","plural","grammar","MessageParser","options","defaults","simpleParse","message","parameters","str","parse","ast","pipe","colon","backslash","anyCharacter","dollar","digits","regularLiteral","regularLiteralWithoutBar","escapedOrLiteralWithoutBar","escapedOrRegularLiteral","templateContents","templateName","openTemplate","closeTemplate","expression","paramExpression","p","fn","pos","choice","parserSyntax","sequence","res","originalPos","nOrMore","parsed","makeStringParser","s","len","makeRegexParser","regex","matches","escapedLiteral","replacement","templateParam","expr","templateWithReplacement","templateWithOutReplacement","template","toString","join","start","MessageStore","messages","sources","load","source","url","deferred","key","deferreds","messageStore","log","Deferred","getJSON","done","resolve","fail","jqxhr","settings","exception","promise","localization","set","Object","hasOwnProperty","call","when","apply","get","messageKey","I18N","nav","Array","localize","localeParts","localePartIndex","fallbackIndex","tryingLocale","fallbackLocale","destroy","removeData","fallbackLocales","locIndex","sourceMap","pop","param1","data","arguments","lBracket","rBracket","type","$this","html","debug","console","navigator","userLanguage","idleTimer","newTimeout","elem","opts","startImmediately","idle","enabled","timeout","events","toggleIdleState","myelem","obj","elapsed","Date","olddate","clearTimeout","tId","setTimeout","event","Event","trigger","off","stop","trim","isPreTeXt","querySelector","processPageState","completionFlag","pageLoad","markingComplete","markingIncomplete","currentPathname","pathname","substring","lastIndexOf","isPtxBook","lastPageUrl","lastPageScrollLocation","round","scrollTop","course","ajaxError","jqhxr","ajax","new_server_prefix","contentType","dataType","JSON","stringify","method","async","lastPositionVal","href","completionClass","completionMsg","detail","completionStatus","scp","classList","add","append","getCompletions","getUrlVar","animate","navLinkBgRightHalfOpen","navLinkBgRightHiddenPosition","outerWidth","relationsNextIconInitialPosition","relationsNextIconNewPosition","show","navBgShown","scroll","right","left","addNavigationAndCompletionButtons","subChapterList","allSubChapterURLs","chapterName","subChapterName","parentElement","endDate","hover","next","hide","lastPageData","lastPageChapter","lastPageSubchapter","decorateTableOfContents","getUrlVars","vars","hashes","search","name","rb","querySelectorAll","forEach","el","div_id","getAttribute","logBookEvent","act","open","id","btn","container","codeInput","textContent","warn","style","display","setupPTXEvents","getElementById","overflow","SpliceWrapper","super","initSplice","base64","jsonPayload","sourceIframe","sendingIframe","subject","handleScoreAndState","handleSpliceEvent","handleGetState","origin","msgdata","jwt","decodeURIComponent","atob","c","charCodeAt","frame_id","score","getUniqueID","frame","rsDiv","activity_id","src","error","state","percent","correct","answer","f","getElementsByTagName","contentWindow","getSavedState","response","fetch","headers","body","ok","status","json","postMessage","message_id","checkLocalStorage","setLocalStorage","restoreAnswers","disableInteraction","module_map","activecode","ble","clickablearea","codelens","datafile","dragndrop","fillintheblank","groupsub","khanex","lp_build","matching","multiplechoice","hparsons","parsons","poll","quizly","reveal","selectquestion","shortanswer","showeval","simple_sensor","spreadsheet","tabbedStuff","timedAssessment","wavedrom","webwork","youtube","doenet","Promise","module_map_cache","QUEUE_FLUSH_TIME_MS","queue","queueLastFlush","flushQueue","now","toFlush","component_name","flushedPromise","reject","flushed","all","pre_login_complete_promise","runestone_auto_import","Set","element","a","value","z","msg","then","dataset","reactInUse","dispatchEvent","CustomEvent","runestone_import","retPromise","r","rej","queueImport","ready","script_src","currentScript","rc","getSwitch","toggleSwitch","currentTheme","getItem","documentElement","setAttribute","checked","switchTheme","popupScratchAC","scratchDiv","ACFactory","createScratchActivecode","divid","componentMap","createActiveCode","acDefaultLanguage","isLoggedIn","enableSaveLoad","toggleScratchActivecode","renderOneComponent","runestoneComponents","NO_DECORATE","RunestoneBase","component_ready_promise","_component_ready_resolve_fn","optional","allComponents","sid","graderactive","showfeedback","timed","isTimed","enforceDeadline","deadline","parseBooleanAttribute","orig","selector_id","assessmentTaken","timedWrapper","question_label","is_toggle","is_select","mjelements","self","mjReady","mjresolver","aQueue","AutoQueue","preamble","y","createElement","innerHTML","appendChild","jsonHeaders","Headers","Accept","attributeName","attrValue","lowerValue","eventInfo","post_return","course_name","clientLoginStatus","timezoneoffset","getTimezoneOffset","assignmentId","assignment_id","useRunestoneServices","logLevel","postLogMessage","prefix","updateProgress","decorateStatus","request","Request","scoreSpec","gradeBox","updateScores","alert","assigned","scoreSpan","getElementsByClassName","toFixed","allScores","allmax","total","max","totalSpan","maxSpan","percentSpan","logRunEvent","post_promise","forceSave","save_code","errinfo","checkServer","will_be_ready","checkServerComplete","csresolver","rawdeadline","tzoff","practice_mode","peer","loadData","repopulateFromStorage","attempted","statusText","err","indicate_component_ready","containerDiv","shouldUseServer","storedData","ex","localStorageKey","removeItem","storageDate","timestamp","email","addCaption","elType","capDiv","caption","hasUserActivity","isAnswered","checkCurrentAnswer","logCurrentAnswer","renderFeedback","queueMathJax","component","MathJax","typesetPromise","runestoneMathReady","enqueue","assignmentInfo","questions","Queue","_items","dequeue","shift","size","_pendingPromise","qq","payload","preambleDiv","insertAdjacentElement","PageProgressBar","actDict","possible","assignment_spec","keys","activities","page","firstElementChild","calculateProgress","scprogresscontainer","renderProgress","k","scprogresstotal","scprogressposs","subchapterprogress","progressElem","className","completeActivities","requiredActivities","activities_required","sendCompletedReadingScore","cb","click","subchapterDiv","val","scprogresstotal2","scprogressposs2","subchapterprogress2","pageProgressTracker","looksLikeLatexMath","some","re","profileLink","removeProperty","passwordLink","registerLink","app","ipDropdown","instPeer","mess","timezone","Intl","DateTimeFormat","resolvedOptions","timeZone","RS_info","parts","cookie","getCookie","tz_match","cleaned","info","tz_offset","served_by","username","assignment_info_string","readings","top","bottom","page_name","exit_link","fst","snd","new_pos","path_parts","new_pos_link","assignment_info","assignment_name","reading_names","readingNames","cur_path_parts","ptxbook","endLop","contains","position","num_readings","cloneNode","txt","fst_lnk","exerciseOnPage","pageExercises","from","includes","snd_lnk","exit_clone","content","insertBefore","firstChild","pc","marginBottom","mainContent","addReadingList","idleTimeoutId","onIdle","resetIdleTimer","eventName","passive","timedRefresh","bw","aw","handlePageSetup","showAd","adNum","floor","random","adBlock","rsElements","placeAdCopy","backgroundImage","stopPropagation","queryString","link","anchorText","aPoint","renderRunestoneComponent","componentSrc","whereDiv","moreOpts","basecourse","componentKind","opt","lang","python3","component_factory","multiGrader","gradingContainer","createTimedComponent","hdiv","origId","appendTo","rdict","question"],"sourceRoot":""}