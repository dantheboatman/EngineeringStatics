{"version":3,"file":"529.115400ffea03835d.js","mappings":"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","sources":["webpack://WebComponents/./runestone/clickableArea/js/clickable.js","webpack://WebComponents/./runestone/clickableArea/js/timedclickable.js"],"sourcesContent":["/*==========================================\n=======     Master clickable.js     ========\n============================================\n===   This file contains the JS for the  ===\n===  Runestone clickable area component. ===\n============================================\n===              Created by              ===\n===           Isaiah Mayerchak           ===\n===                7/1/15                ===\n==========================================*/\n\"use strict\";\n\nimport RunestoneBase from \"../../common/js/runestonebase.js\";\nimport \"../css/clickable.css\";\n\nexport default class ClickableArea extends RunestoneBase {\n    constructor(opts) {\n        super(opts);\n        var orig = opts.orig; // entire <div> element that will be replaced by new HTML\n        this.origElem = orig;\n        this.divid = orig.id;\n        this.useRunestoneServices = opts.useRunestoneServices;\n        this.clickableArray = []; // holds all clickable elements\n        this.correctArray = []; // holds the IDs of all correct clickable span elements, used for eval\n        this.incorrectArray = []; // holds IDs of all incorrect clickable span elements, used for eval\n        //For use with Sphinx-rendered html\n        this.isTable = false;\n        if (this.origElem.getAttribute(\"data-cc\") !== null) {\n            if (this.origElem.hasAttribute(\"data-table\")) {\n                this.isTable = true;\n                this.ccArray = this.origElem.getAttribute(\"data-cc\").split(\";\");\n                this.ciArray = this.origElem.getAttribute(\"data-ci\").split(\";\");\n            } else {\n                this.ccArray = this.origElem.getAttribute(\"data-cc\").split(\",\");\n                this.ciArray = this.origElem.getAttribute(\"data-ci\").split(\",\");\n            }\n        }\n        // For use in the recursive replace function\n        this.clickIndex = 0; // Index of this.clickedIndexArray that we're checking against\n        this.clickableCounter = 0; // Index of the current clickable element\n        this.getQuestion();\n        this.getFeedback();\n        this.renderNewElements();\n        this.caption = \"Clickable\";\n        this.addCaption(\"runestone\");\n        this.checkServer(\"clickableArea\", true);\n        if (typeof Prism !== \"undefined\") {\n            Prism.highlightAllUnder(this.containerDiv);\n        }\n    }\n    /*===========================\n    == Update basic attributes ==\n    ===========================*/\n    getQuestion() {\n        for (var i = 0; i < this.origElem.childNodes.length; i++) {\n            const node = this.origElem.childNodes[i];\n            if (node.nodeType === Node.ELEMENT_NODE && node.hasAttribute(\"data-question\")) {\n                this.question = node;\n                this.question.classList.add(\"exercise-statement\");\n                break;\n            }\n        }\n    }\n    getFeedback() {\n        this.feedback = \"\";\n        for (var i = 0; i < this.origElem.childNodes.length; i++) {\n            const node = this.origElem.childNodes[i];\n            if (node.nodeType === Node.ELEMENT_NODE && node.hasAttribute(\"data-feedback\")) {\n                this.feedback = node;\n            }\n        }\n        if (this.feedback !== \"\") {\n            this.feedback.remove();\n            this.feedback = this.feedback.innerHTML;\n        }\n    }\n    /*===========================================\n    ====   Functions generating final HTML   ====\n    ===========================================*/\n    renderNewElements() {\n        // wrapper function for generating everything\n        this.containerDiv = document.createElement(\"div\");\n        this.containerDiv.id = this.origElem.id;\n        this.containerDiv.appendChild(this.question);\n        const origClass = this.origElem.getAttribute(\"class\");\n        if (origClass) {\n            this.containerDiv.classList.add(...origClass.split(\" \").filter(Boolean));\n        }\n        this.newDiv = document.createElement(\"div\");\n        var newContent = this.origElem.innerHTML;\n        while (newContent[0] === \"\\n\") {\n            newContent = newContent.slice(1);\n        }\n        this.newDiv.innerHTML = newContent;\n        this.newDiv.classList.add(\"exercise-content\");\n        this.containerDiv.appendChild(this.newDiv);\n        this.createButtons();\n        this.createFeedbackDiv();\n        this.origElem.replaceWith(this.containerDiv);\n    }\n    createButtons() {\n        this.submitButton = document.createElement(\"button\"); // Check me button\n        this.submitButton.textContent = \"Check Me\";\n        this.submitButton.className = \"btn btn-success\";\n        this.submitButton.name = \"do answer\";\n        this.submitButton.type = \"button\";\n        this.submitButton.onclick = function () {\n            this.checkCurrentAnswer();\n            this.logCurrentAnswer();\n            this.renderFeedback();\n        }.bind(this);\n        this.containerDiv.appendChild(this.submitButton);\n    }\n    createFeedbackDiv() {\n        this.feedBackDiv = document.createElement(\"div\");\n        this.containerDiv.appendChild(document.createElement(\"br\"));\n        this.containerDiv.appendChild(this.feedBackDiv);\n    }\n    /*===================================\n    === Checking/restoring from storage ===\n    ===================================*/\n    restoreAnswers(data) {\n        // Restore answers from storage retrieval done in RunestoneBase or from local storage\n        if (data.answer !== undefined) {\n            // if we got data from the server\n            this.hasStoredAnswers = true;\n            this.clickedIndexArray = data.answer.split(\";\");\n        }\n        if (this.ccArray === undefined) {\n            this.modifyClickables(this.newDiv.childNodes);\n        } else {\n            // For use with Sphinx-rendered HTML\n            this.ccCounter = 0;\n            this.ccIndex = 0;\n            this.ciIndex = 0;\n            if (!this.isTable) {\n                this.modifyViaCC(this.newDiv.children);\n            } else {\n                this.modifyTableViaCC(this.newDiv.children);\n            }\n        }\n    }\n    checkLocalStorage() {\n        if (this.graderactive) {\n            return;\n        }\n        var storageObj;\n        // Gets previous answer data from local storage if it exists\n        this.hasStoredAnswers = false;\n        var len = localStorage.length;\n        if (len > 0) {\n            var ex = localStorage.getItem(this.localStorageKey());\n            if (ex !== null) {\n                this.hasStoredAnswers = true;\n                try {\n                    storageObj = JSON.parse(ex);\n                    this.clickedIndexArray = storageObj.answer.split(\";\");\n                } catch (err) {\n                    // error while parsing; likely due to bad value stored in storage\n                    console.log(err.message);\n                    localStorage.removeItem(this.localStorageKey());\n                    this.hasStoredAnswers = false;\n                    this.restoreAnswers({});\n                    return;\n                }\n                if (this.useRunestoneServices) {\n                    // log answer to server\n                    this.givenIndexArray = [];\n                    for (var i = 0; i < this.clickableArray.length; i++) {\n                        if (this.clickableArray[i].classList.contains(\"clickable-clicked\")) {\n                            this.givenIndexArray.push(i);\n                        }\n                    }\n                    this.logBookEvent({\n                        event: \"clickableArea\",\n                        act: this.clickedIndexArray.join(\";\"),\n                        answer: this.clickedIndexArray.join(\";\"),\n                        div_id: this.divid,\n                        correct: storageObj.correct,\n                    });\n                }\n            }\n        }\n        this.restoreAnswers({}); // pass empty object\n    }\n    setLocalStorage(data) {\n        // Array of the indices of clicked elements is passed to local storage\n        var answer;\n        if (data.answer !== undefined) {\n            // If we got data from the server, we can just use that\n            answer = this.clickedIndexArray.join(\";\");\n        } else {\n            this.givenIndexArray = [];\n            for (var i = 0; i < this.clickableArray.length; i++) {\n                if (this.clickableArray[i].classList.contains(\"clickable-clicked\")) {\n                    this.givenIndexArray.push(i);\n                }\n            }\n            answer = this.givenIndexArray.join(\";\");\n        }\n        var timeStamp = new Date();\n        var correct = data.correct;\n        var storageObject = {\n            answer: answer,\n            correct: correct,\n            timestamp: timeStamp,\n        };\n        localStorage.setItem(\n            this.localStorageKey(),\n            JSON.stringify(storageObject)\n        );\n    }\n    /*==========================\n    === Auxilliary functions ===\n    ==========================*/\n    modifyClickables(childNodes) {\n        // Strips the data-correct/data-incorrect labels and updates the correct/incorrect arrays\n        for (var i = 0; i < childNodes.length; i++) {\n            const node = childNodes[i];\n            if (\n                node.nodeType === Node.ELEMENT_NODE &&\n                (node.hasAttribute(\"data-correct\") || node.hasAttribute(\"data-incorrect\"))\n            ) {\n                this.manageNewClickable(node);\n                if (node.hasAttribute(\"data-correct\")) {\n                    node.removeAttribute(\"data-correct\");\n                    this.correctArray.push(node);\n                } else {\n                    node.removeAttribute(\"data-incorrect\");\n                    this.incorrectArray.push(node);\n                }\n            }\n            if (node.childNodes && node.childNodes.length !== 0) {\n                this.modifyClickables(node.childNodes);\n            }\n        }\n    }\n    modifyViaCC(children) {\n        for (var i = 0; i < children.length; i++) {\n            if (children[i].children.length !== 0) {\n                this.modifyViaCC(children[i].children);\n            } else {\n                this.ccCounter++;\n                if (this.ccCounter === Math.floor(this.ccArray[this.ccIndex])) {\n                    this.manageNewClickable(children[i]);\n                    this.correctArray.push(children[i]);\n                    this.ccIndex++;\n                } else if (\n                    this.ccCounter === Math.floor(this.ciArray[this.ciIndex])\n                ) {\n                    this.manageNewClickable(children[i]);\n                    this.incorrectArray.push(children[i]);\n                    this.ciIndex++;\n                }\n            }\n        }\n    }\n    modifyTableViaCC(children) {\n        // table version of modifyViaCC\n        var tComponentArr = [];\n        for (let i = 0; i < children.length; i++) {\n            if (children[i].nodeName === \"TABLE\") {\n                let tmp = children[i];\n                for (let j = 0; j < tmp.children.length; j++) {\n                    if (tmp.children[j].nodeName === \"THEAD\") {\n                        tComponentArr.push(tmp.children[j]);\n                    } else if (tmp.children[j].nodeName === \"TBODY\") {\n                        tComponentArr.push(tmp.children[j]);\n                    } else if (tmp.children[j].nodeName === \"TFOOT\") {\n                        tComponentArr.push(tmp.children[j]);\n                    }\n                }\n            }\n        }\n        for (var t = 0; t < tComponentArr.length; t++) {\n            for (let i = 0; i < tComponentArr[t].children.length; i++) {\n                this.ccCounter++;\n                // First check if the entire row needs to be clickable\n                if (\n                    this.ccIndex < this.ccArray.length &&\n                    this.ccCounter ===\n                        Math.floor(this.ccArray[this.ccIndex].split(\",\")[0]) &&\n                    Math.floor(this.ccArray[this.ccIndex].split(\",\")[1]) === 0\n                ) {\n                    this.manageNewClickable(tComponentArr[t].children[i]);\n                    this.correctArray.push(tComponentArr[t].children[i]);\n                    this.ccIndex++;\n                } else if (\n                    this.ciIndex < this.ciArray.length &&\n                    this.ccCounter ===\n                        Math.floor(this.ciArray[this.ciIndex].split(\",\")[0]) &&\n                    Math.floor(this.ciArray[this.ciIndex].split(\",\")[1]) === 0\n                ) {\n                    this.manageNewClickable(tComponentArr[t].children[i]);\n                    this.incorrectArray.push(tComponentArr[t].children[i]);\n                    this.ciIndex++;\n                } else {\n                    // If not, check the individual data cells\n                    for (\n                        let j = 0;\n                        j < tComponentArr[t].children[i].children.length;\n                        j++\n                    ) {\n                        let tmp = j + 1;\n                        if (\n                            this.ccIndex < this.ccArray.length &&\n                            tmp ===\n                                Math.floor(\n                                    this.ccArray[this.ccIndex].split(\",\")[1]\n                                ) &&\n                            this.ccCounter ===\n                                Math.floor(\n                                    this.ccArray[this.ccIndex].split(\",\")[0]\n                                )\n                        ) {\n                            this.manageNewClickable(\n                                tComponentArr[t].children[i].children[j]\n                            );\n                            this.correctArray.push(\n                                tComponentArr[t].children[i].children[j]\n                            );\n                            this.ccIndex++;\n                        } else if (\n                            this.ciIndex < this.ciArray.length &&\n                            tmp ===\n                                Math.floor(\n                                    this.ciArray[this.ciIndex].split(\",\")[1]\n                                ) &&\n                            this.ccCounter ===\n                                Math.floor(\n                                    this.ciArray[this.ciIndex].split(\",\")[0]\n                                )\n                        ) {\n                            this.manageNewClickable(\n                                tComponentArr[t].children[i].children[j]\n                            );\n                            this.incorrectArray.push(\n                                tComponentArr[t].children[i].children[j]\n                            );\n                            this.ciIndex++;\n                        }\n                    }\n                }\n            }\n        }\n    }\n    manageNewClickable(clickable) {\n        // adds the \"clickable\" functionality\n        clickable.classList.add(\"clickable\");\n        if (this.hasStoredAnswers) {\n            // Check if the element we're about to append to the pre was in local storage as clicked via its index\n            if (\n                this.clickedIndexArray[this.clickIndex].toString() ===\n                this.clickableCounter.toString()\n            ) {\n                clickable.classList.add(\"clickable-clicked\");\n                this.clickIndex++;\n                if (this.clickIndex === this.clickedIndexArray.length) {\n                    // Stop doing this if the index array is used up\n                    this.hasStoredAnswers = false;\n                }\n            }\n        }\n        let self = this;\n        clickable.onclick = function () {\n            self.isAnswered = true;\n            if (this.classList.contains(\"clickable-clicked\")) {\n                this.classList.remove(\"clickable-clicked\");\n                this.classList.remove(\"clickable-incorrect\");\n            } else {\n                this.classList.add(\"clickable-clicked\");\n            }\n        };\n        this.clickableArray.push(clickable);\n        this.clickableCounter++;\n    }\n    /*======================================\n    == Evaluation and displaying feedback ==\n    ======================================*/\n    checkCurrentAnswer() {\n        // Evaluation is done by iterating over the correct/incorrect arrays and checking by class\n        this.correct = true;\n        this.correctNum = 0;\n        this.incorrectNum = 0;\n        for (let i = 0; i < this.correctArray.length; i++) {\n            if (!this.correctArray[i].classList.contains(\"clickable-clicked\")) {\n                this.correct = false;\n            } else {\n                this.correctNum++;\n            }\n        }\n        for (let i = 0; i < this.incorrectArray.length; i++) {\n            if (this.incorrectArray[i].classList.contains(\"clickable-clicked\")) {\n                this.correct = false;\n                this.incorrectNum++;\n            } else {\n                this.incorrectArray[i].classList.remove(\"clickable-incorrect\");\n            }\n        }\n        this.percent =\n            (this.correctNum - this.incorrectNum) / this.correctArray.length;\n        this.percent = Math.max(0, this.percent);\n        this.setLocalStorage({ correct: this.correct ? \"T\" : \"F\" });\n    }\n\n    async logCurrentAnswer(sid) {\n        const answer = this.givenIndexArray.join(\";\");\n        let data = {\n            event: \"clickableArea\",\n            answer: answer,\n            act: answer,\n            div_id: this.divid,\n            correct: this.correct ? \"T\" : \"F\",\n        };\n        if (typeof sid !== \"undefined\") {\n            data.sid = sid;\n        }\n        await this.logBookEvent(data);\n    }\n\n    renderFeedback() {\n        if (this.correct) {\n            this.feedBackDiv.innerHTML = \"You are Correct!\";\n            this.feedBackDiv.className = \"alert alert-info\";\n        } else {\n            for (let i = 0; i < this.incorrectArray.length; i++) {\n                if (this.incorrectArray[i].classList.contains(\"clickable-clicked\")) {\n                    this.incorrectArray[i].classList.add(\"clickable-incorrect\");\n                } else {\n                    this.incorrectArray[i].classList.remove(\"clickable-incorrect\");\n                }\n            }\n            this.feedBackDiv.innerHTML =\n                \"Incorrect. You clicked on \" +\n                this.correctNum +\n                \" of the \" +\n                this.correctArray.length.toString() +\n                \" correct elements and \" +\n                this.incorrectNum +\n                \" of the \" +\n                this.incorrectArray.length.toString() +\n                \" incorrect elements. \" +\n                this.feedback;\n            this.feedBackDiv.className = \"alert alert-danger\";\n        }\n    }\n\n    disableInteraction() {\n        for (var i = 0; i < this.clickableArray.length; i++) {\n            this.clickableArray[i].style.cursor = \"initial\";\n            this.clickableArray[i].onclick = function () {\n                return;\n            };\n        }\n    }\n}\n\n/*=================================\n== Find the custom HTML tags and ==\n==   execute our code on them    ==\n=================================*/\ndocument.addEventListener(\"runestone:login-complete\", function () {\n    document.querySelectorAll(\"[data-component=clickablearea]\").forEach(function (el, index) {\n        if (!el.closest(\"[data-component=timedAssessment]\")) {\n            // If this element exists within a timed component, don't render it here\n            try {\n                window.componentMap[el.id] = new ClickableArea({\n                    orig: el,\n                    useRunestoneServices: eBookConfig.useRunestoneServices,\n                });\n            } catch (err) {\n                console.log(`Error rendering ClickableArea Problem ${el.id}\n                             Details: ${err}`);\n            }\n        }\n    });\n});\n","import ClickableArea from \"./clickable.js\";\n\n(\"use strict\");\n\nexport default class TimedClickableArea extends ClickableArea {\n    constructor(opts) {\n        super(opts);\n        if (! this.assessmentTaken){\n            this.restoreAnswers({});  // This takes the place of reinitializeListeners -- but might be better to implement that method for consistency.\n        }\n        this.renderTimedIcon(this.containerDiv);\n        this.hideButtons();\n    }\n\n    hideButtons() {\n        if (this.submitButton) {\n            this.submitButton.style.display = \"none\";\n        }\n    }\n\n    renderTimedIcon(component) {\n        // renders the clock icon on timed components.    The component parameter\n        // is the element that the icon should be appended to.\n        var timeIconDiv = document.createElement(\"div\");\n        var timeIcon = document.createElement(\"img\");\n        timeIcon.src = \"../_static/clock.png\";\n        timeIcon.style.width = \"15px\";\n        timeIcon.style.height = \"15px\";\n        timeIconDiv.className = \"timeTip\";\n        timeIconDiv.title = \"\";\n        timeIconDiv.appendChild(timeIcon);\n        component.insertBefore(timeIconDiv, component.firstChild);\n    }\n\n    checkCorrectTimed() {\n        // Returns if the question was correct, incorrect, or skipped (return null in the last case)\n        if (this.correctNum === 0 && this.incorrectNum === 0) {\n            this.correct = null;\n        }\n        switch (this.correct) {\n            case true:\n                return \"T\";\n            case false:\n                return \"F\";\n            default:\n                return null;\n        }\n    }\n\n    hideFeedback() {\n        if (this.feedBackDiv) {\n            this.feedBackDiv.style.display = \"none\";\n        }\n    }\n}\n\nif (typeof window.component_factory === \"undefined\") {\n    window.component_factory = {};\n}\nwindow.component_factory.clickablearea = function (opts) {\n    if (opts.timed) {\n        return new TimedClickableArea(opts);\n    }\n    return new ClickableArea(opts);\n};\n"],"names":["ClickableArea","constructor","opts","super","orig","this","origElem","divid","id","useRunestoneServices","clickableArray","correctArray","incorrectArray","isTable","getAttribute","hasAttribute","ccArray","split","ciArray","clickIndex","clickableCounter","getQuestion","getFeedback","renderNewElements","caption","addCaption","checkServer","Prism","highlightAllUnder","containerDiv","i","childNodes","length","node","nodeType","Node","ELEMENT_NODE","question","classList","add","feedback","remove","innerHTML","document","createElement","appendChild","origClass","filter","Boolean","newDiv","newContent","slice","createButtons","createFeedbackDiv","replaceWith","submitButton","textContent","className","name","type","onclick","checkCurrentAnswer","logCurrentAnswer","renderFeedback","bind","feedBackDiv","restoreAnswers","data","undefined","answer","hasStoredAnswers","clickedIndexArray","modifyClickables","ccCounter","ccIndex","ciIndex","modifyTableViaCC","children","modifyViaCC","checkLocalStorage","graderactive","storageObj","localStorage","ex","getItem","localStorageKey","JSON","parse","err","console","log","message","removeItem","givenIndexArray","contains","push","logBookEvent","event","act","join","div_id","correct","setLocalStorage","timeStamp","Date","storageObject","timestamp","setItem","stringify","manageNewClickable","removeAttribute","Math","floor","tComponentArr","nodeName","tmp","j","t","clickable","toString","self","isAnswered","correctNum","incorrectNum","percent","max","sid","disableInteraction","style","cursor","addEventListener","querySelectorAll","forEach","el","index","closest","window","componentMap","eBookConfig","TimedClickableArea","assessmentTaken","renderTimedIcon","hideButtons","display","component","timeIconDiv","timeIcon","src","width","height","title","insertBefore","firstChild","checkCorrectTimed","hideFeedback","component_factory","clickablearea","timed"],"sourceRoot":""}